[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "inclass_ex/ICE2/ice2.html",
    "href": "inclass_ex/ICE2/ice2.html",
    "title": "In-Class Exercise 2: Geospatial Data Wrangling",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse, funModeling)\n\nImporting WPdx+ (Nigeria) data set\n\nwp_nga <- read_csv(\"data/aspatial/wpdx.csv\")\n\nCreating Feature Data Frame for WPDX\n\n#wp_nga$Geometry = st_as_sfc(wp_nga$`New Georeferenced Column`)\n\n\nwp_nga\n\n# A tibble: 1,000 × 70\n   row_id source     lat_deg lon_deg report_date         statu…¹ water…² water…³\n    <dbl> <chr>        <dbl>   <dbl> <dttm>              <chr>   <chr>   <chr>  \n 1 429068 GRID3         7.98    5.12 2018-08-29 00:00:00 Unknown <NA>    <NA>   \n 2 222071 Federal M…    6.96    3.60 2015-08-16 00:00:00 Yes     Boreho… Well   \n 3 160612 WaterAid      6.49    7.93 2020-12-04 00:00:00 Yes     Boreho… Well   \n 4 160669 WaterAid      6.73    7.65 2020-12-04 00:00:00 Yes     Boreho… Well   \n 5 160642 WaterAid      6.78    7.66 2020-12-04 00:00:00 Yes     Boreho… Well   \n 6 160628 WaterAid      6.96    7.78 2020-12-04 00:00:00 Yes     Boreho… Well   \n 7 160632 WaterAid      7.02    7.84 2020-12-04 00:00:00 Yes     Boreho… Well   \n 8 642747 Living Wa…    7.33    8.98 2016-10-03 00:00:00 Yes     Boreho… Well   \n 9 642456 Living Wa…    7.17    9.11 2016-10-03 00:00:00 Yes     Boreho… Well   \n10 641347 Living Wa…    7.20    9.22 2015-03-28 00:00:00 Yes     Boreho… Well   \n# … with 990 more rows, 62 more variables: water_tech_clean <chr>,\n#   `_water_tech_category` <chr>, facility_type <chr>,\n#   clean_country_name <chr>, clean_adm1 <chr>, clean_adm2 <chr>,\n#   clean_adm3 <lgl>, clean_adm4 <lgl>, install_year <dbl>, installer <chr>,\n#   rehab_year <lgl>, rehabilitator <lgl>, management_clean <chr>,\n#   status_clean <chr>, pay <chr>, fecal_coliform_presence <lgl>,\n#   fecal_coliform_value <dbl>, subjective_quality <chr>, activity_id <chr>, …\n\n\n\n#wp_sf <- st_sf(wp_nga, crs = 4326)\n#wp_sf\n\n\n\n\nBoth sets of geospatial data are imported with the correct CRS of 26392.\n\ngeoNGA = st_read(dsn=\"data/geospatial/geoboundaries_nga\", \n                 layer = \"geoBoundaries-NGA-ADM2\") %>%\n  st_transform(crs = 26392)\n\nReading layer `geoBoundaries-NGA-ADM2' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE2\\data\\geospatial\\geoboundaries_nga' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\nNGA <- st_read(\"data/geospatial/NGA_cnty_admin2\",\n               layer = \"nga_polbndl_adm2_1m_salb\") %>%\n  st_transform(crs = 26392)\n\nReading layer `nga_polbndl_adm2_1m_salb' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE2\\data\\geospatial\\NGA_cnty_admin2' \n  using driver `ESRI Shapefile'\nSimple feature collection with 1685 features and 1 field\nGeometry type: LINESTRING\nDimension:     XY\nBounding box:  xmin: 2.744192 ymin: 4.363015 xmax: 14.57926 ymax: 13.90103\nGeodetic CRS:  WGS 84\n\n\n\n\n\n\n\n#NGA <- NGA %>%\n  #select(c(3:4, 8:9))\n\n\n\n\n\n#wpdx_sf %>%\n # group_by(water_source_clean) %>%\n  #summarise(n = n()) %>%\n  #mutate(freq = n / sum(n))"
  },
  {
    "objectID": "handson_ex/HE3/HE3.html",
    "href": "handson_ex/HE3/HE3.html",
    "title": "Hands-on Exercise 3: Cloropleth Mapping with R",
    "section": "",
    "text": "pacman::p_load(sf, tmap, tidyverse)\n\nWarning: unable to access index for repository http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.2:\n  cannot open URL 'http://www.stats.ox.ac.uk/pub/RWin/bin/windows/contrib/4.2/PACKAGES'\n\n\npackage 'tmap' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\kwang\\AppData\\Local\\Temp\\Rtmp4AzRWp\\downloaded_packages\n\n\n\ntmap installed\n\n\nWarning in pacman::p_load(sf, tmap, tidyverse): Failed to install/load:\ntmap\n\n\n\nImporting Data\nImporting Geospatial Data\n\nmpsz <- st_read(\n  dsn='data/geospatial',\n  layer='MP14_SUBZONE_WEB_PL'\n)\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE3\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\nmpsz\n\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 10 features:\n   OBJECTID SUBZONE_NO       SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1         1          1    MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2         2          1    PEARL'S HILL    OTSZ01      Y          OUTRAM\n3         3          3       BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4         4          8  HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5         5          3         REDHILL    BMSZ03      N     BUKIT MERAH\n6         6          7  ALEXANDRA HILL    BMSZ07      N     BUKIT MERAH\n7         7          9   BUKIT HO SWEE    BMSZ09      N     BUKIT MERAH\n8         8          2     CLARKE QUAY    SRSZ02      Y SINGAPORE RIVER\n9         9         13 PASIR PANJANG 1    QTSZ13      N      QUEENSTOWN\n10       10          7       QUEENSWAY    QTSZ07      N      QUEENSTOWN\n   PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1          MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2          OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3          SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4          BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5          BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n6          BM CENTRAL REGION       CR 9D286521EF5E3B59 2014-12-05 25358.82\n7          BM CENTRAL REGION       CR 7839A8577144EFE2 2014-12-05 27680.06\n8          SR CENTRAL REGION       CR 48661DC0FBA09F7A 2014-12-05 29253.21\n9          QT CENTRAL REGION       CR 1F721290C421BFAB 2014-12-05 22077.34\n10         QT CENTRAL REGION       CR 3580D2AFFBEE914C 2014-12-05 24168.31\n     Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1  29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2  29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3  29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4  29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5  30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...\n6  29991.38   4428.913  1030378.8 MULTIPOLYGON (((25899.7 297...\n7  30230.86   3275.312   551732.0 MULTIPOLYGON (((27746.95 30...\n8  30222.86   2208.619   290184.7 MULTIPOLYGON (((29351.26 29...\n9  29893.78   6571.323  1084792.3 MULTIPOLYGON (((20996.49 30...\n10 30104.18   3454.239   631644.3 MULTIPOLYGON (((24472.11 29...\n\n\nImporting Attribute Data\n\npopdata <- read_csv('data/aspatial/respopagesextod2011to2020.csv')\n\nRows: 984656 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): PA, SZ, AG, Sex, TOD\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\n\nData Wrangling\n\npopdata2020 <- popdata %>%\n  filter(Time == 2020) %>%\n  group_by(PA, SZ, AG) %>%\n  summarise(`POP` = sum(`Pop`)) %>%\n  ungroup()%>%\n  pivot_wider(names_from=AG, \n              values_from=POP) %>%\n  mutate(YOUNG = rowSums(.[3:6])\n         +rowSums(.[12])) %>%\nmutate(`ECONOMY ACTIVE` = rowSums(.[7:11])+\nrowSums(.[13:15]))%>%\nmutate(`AGED`=rowSums(.[16:21])) %>%\nmutate(`TOTAL`=rowSums(.[3:21])) %>%  \nmutate(`DEPENDENCY` = (`YOUNG` + `AGED`)\n/`ECONOMY ACTIVE`) %>%\n  select(`PA`, `SZ`, `YOUNG`, \n       `ECONOMY ACTIVE`, `AGED`, \n       `TOTAL`, `DEPENDENCY`)\n\n`summarise()` has grouped output by 'PA', 'SZ'. You can override using the\n`.groups` argument.\n\n\n\n\nJoining Attribute and Geospatial Data"
  },
  {
    "objectID": "inclass_ex/ICE3/ice3.html",
    "href": "inclass_ex/ICE3/ice3.html",
    "title": "In-class Exercise 3: Analytical Mappping",
    "section": "",
    "text": "Installing and loading packages\n\npacman::p_load(sf, tidyverse, tmap)\n\n\n\n\nNGA_wp <- read_rds(\"data/rds/NGA_wp.rds\")"
  },
  {
    "objectID": "inclass_ex/ICE3/ice3.html#basic-choropleth-mapping",
    "href": "inclass_ex/ICE3/ice3.html#basic-choropleth-mapping",
    "title": "In-class Exercise 3: Analytical Mappping",
    "section": "2 Basic Choropleth Mapping",
    "text": "2 Basic Choropleth Mapping\n\n2.1 Visualising Distribution of Non-functional Water Point\n\np1 <- tm_shape(NGA_wp) +\n  tm_fill(\"wp_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of functional water points by LGAs\",\n            legend.outside = FALSE)\n\n\np2 <- tm_shape(NGA_wp) +\n  tm_fill(\"total_wp\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of total water points by LGA\",\n            legend.outside = FALSE)\n\n\ntmap_arrange(p2, p1, nrow=1)"
  },
  {
    "objectID": "inclass_ex/ICE3/ice3.html#choropleth-map-for-rates",
    "href": "inclass_ex/ICE3/ice3.html#choropleth-map-for-rates",
    "title": "In-class Exercise 3: Analytical Mappping",
    "section": "3 Choropleth Map for Rates",
    "text": "3 Choropleth Map for Rates\n\n3.1 Deriving Proportion of Functional and Non-Functional Water Points\n\nNGA_wp <- NGA_wp %>%\n  mutate(pct_functional = wp_functional/total_wp) %>%\n  mutate(pct_nonfunctional = wp_nonfunctional/total_wp)\n\n\n\n3.2 Plotting Map of Rate\n\ntm_shape(NGA_wp) +\n  tm_fill(\"pct_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\",\n          legend.hist = TRUE) +\n  tm_borders(lwd = 0.1,\n             alpha = 1) +\n  tm_layout(main.title = \"Rate map of functional water points by LGA\",\n            legend.outside = TRUE)"
  },
  {
    "objectID": "inclass_ex/ICE3/ice3.html#extreme-value-maps",
    "href": "inclass_ex/ICE3/ice3.html#extreme-value-maps",
    "title": "In-class Exercise 3: Analytical Mappping",
    "section": "4 Extreme Value Maps",
    "text": "4 Extreme Value Maps\n\n4.1 Percentile Map\nExclude NA records\n\nNGA_wp <- NGA_wp %>%\n  drop_na()\n\nCreate customised classification and extracting values\n\npercent <- c(0, .01, .1, .5, .9, .99, 1)\nvar <- NGA_wp[\"pct_functional\"] %>%\n  st_set_geometry(NULL)\nquantile(var[, 1], percent)\n\n       0%        1%       10%       50%       90%       99%      100% \n0.0000000 0.0000000 0.2169811 0.4791667 0.8611111 1.0000000 1.0000000 \n\n\n\n\n4.2 get.var Function\n\nget.var <- function(vname, df) {\n  v <- df[vname] %>%\n    st_set_geometry(NULL)\n  v <- unname(v[, 1])\n  return(v)\n}\n\n\n\n4.3 Percentile Mapping Function\n\npercentmap <- function(vnam, df, legtitle = NA, mtitle = \"Percentile Map\"){\n  percent <- c(0, .01, .1, .5, .9, .99, 1)\n  var <- get.var(vnam, df)\n  bperc <- quantile(var, percent)\n  tm_shape(df) +\n  tm_polygons() +\n  tm_shape(df) +\n    tm_fill(vnam,\n            title = legtitle,\n            breaks = bperc,\n            palette = \"Blues\",\n            labels = c(\"< 1%\", \"1% - 10%\", \"10% - 50%\", \"50% - 90%\", \"90%- 99%\", \"> 99%\")) +\n    tm_borders() +\n    tm_layout(main.title = mtitle,\n              title.position = c(\"right\", \"bottom\"))\n}\n\nTesting out the function\n\npercentmap(\"total_wp\", NGA_wp)\n\n\n\n\n\n\n4.4 Box Map\n\nggplot(data = NGA_wp,\n       aes(x = \"\",\n           y = wp_nonfunctional)) +\n  geom_boxplot()\n\n\n\n\n\n\n4.5 Boxbreak Function\n\nboxbreaks <- function(v,mult=1.5) {\n  qv <- unname(quantile(v))\n  iqr <- qv[4] - qv[2]\n  upfence <- qv[4] + mult * iqr\n  lofence <- qv[2] - mult * iqr\n  # initialize break points vector\n  bb <- vector(mode=\"numeric\",length=7)\n  # logic for lower and upper fences\n  if (lofence < qv[1]) {  # no lower outliers\n    bb[1] <- lofence\n    bb[2] <- floor(qv[1])\n  } else {\n    bb[2] <- lofence\n    bb[1] <- qv[1]\n  }\n  if (upfence > qv[5]) { # no upper outliers\n    bb[7] <- upfence\n    bb[6] <- ceiling(qv[5])\n  } else {\n    bb[6] <- upfence\n    bb[7] <- qv[5]\n  }\n  bb[3:5] <- qv[2:4]\n  return(bb)\n}\n\n\n\n4.6 Boxmap function\n\nboxmap <- function(vnam, df, \n                   legtitle=NA,\n                   mtitle=\"Box Map\",\n                   mult=1.5){\n  var <- get.var(vnam,df)\n  bb <- boxbreaks(var)\n  tm_shape(df) +\n    tm_polygons() +\n  tm_shape(df) +\n     tm_fill(vnam,title=legtitle,\n             breaks=bb,\n             palette=\"Blues\",\n          labels = c(\"lower outlier\", \n                     \"< 25%\", \n                     \"25% - 50%\", \n                     \"50% - 75%\",\n                     \"> 75%\", \n                     \"upper outlier\"))  +\n  tm_borders() +\n  tm_layout(main.title = mtitle, \n            title.position = c(\"left\",\n                               \"top\"))\n}\n\n\ntmap_mode(\"plot\")\nboxmap(\"wp_nonfunctional\", NGA_wp)"
  },
  {
    "objectID": "inclass_ex/ICE3/ice3.html#recode-zero",
    "href": "inclass_ex/ICE3/ice3.html#recode-zero",
    "title": "In-class Exercise 3: Analytical Mappping",
    "section": "5 Recode Zero",
    "text": "5 Recode Zero\n\nNGA_wp <- NGA_wp %>%\n  mutate(wp_functional = na_if(\n    total_wp, total_wp < 0))"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html",
    "href": "handson_ex/HE4/HE4.html",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "",
    "text": "pacman::p_load(maptools, sf, raster, spatstat, tmap, tidyr, dplyr)"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#data-wrangling",
    "href": "handson_ex/HE4/HE4.html#data-wrangling",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "2 Data Wrangling",
    "text": "2 Data Wrangling\n\n2.1 Spatial Data\n\n2.1.1 Importing the Spatial Data\n\nchildcare_sf <- st_read(dsn = \"data/child-care-services-geojson.geojson\") %>%\n  st_transform(crs = 3414)\n\nReading layer `child-care-services-geojson' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE4\\data\\child-care-services-geojson.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 1545 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.248403 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\n\nsg_sf <- st_read(dsn = \"data\", layer = \"CostalOutline\")\n\nReading layer `CostalOutline' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE4\\data' using driver `ESRI Shapefile'\nSimple feature collection with 60 features and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2663.926 ymin: 16357.98 xmax: 56047.79 ymax: 50244.03\nProjected CRS: SVY21\n\n\n\nmpsz_sf <- st_read(dsn = \"data\", layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE4\\data' using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\nChecking CRS of each simple features data frame\n\nst_crs(childcare_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\nst_crs(mpsz_sf)\n\nCoordinate Reference System:\n  User input: SVY21 \n  wkt:\nPROJCRS[\"SVY21\",\n    BASEGEOGCRS[\"SVY21[WGS84]\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"Degree\",0.0174532925199433]]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\n\nst_crs(sg_sf)\n\nCoordinate Reference System:\n  User input: SVY21 \n  wkt:\nPROJCRS[\"SVY21\",\n    BASEGEOGCRS[\"SVY21[WGS84]\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"Degree\",0.0174532925199433]]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nUpdating CRS on mpsz_sf and sg_sf\n\nmpsz_sf <- st_transform(mpsz_sf, crs = 3414)\n\n\nst_crs(mpsz_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\nsg_sf <- st_transform(sg_sf, crs = 3414)\n\n\nst_crs(sg_sf)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#mapping-geospatial-data-sets",
    "href": "handson_ex/HE4/HE4.html#mapping-geospatial-data-sets",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "3 Mapping Geospatial Data Sets",
    "text": "3 Mapping Geospatial Data Sets\n\n3.1 Childcare Data\n\ntmap_mode('plot')\ntm_shape(childcare_sf)+\n  tm_dots(alph=0.5, size=0.01)+\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\ntmap_mode('view')\ntm_shape(childcare_sf)+\n  tm_dots()"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#geospatial-data-wrangling",
    "href": "handson_ex/HE4/HE4.html#geospatial-data-wrangling",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "4 Geospatial Data Wrangling",
    "text": "4 Geospatial Data Wrangling\n\n4.1 Conversion to Spatial Point/Polygon Data Frame\n\nchildcare <- as_Spatial(childcare_sf)\nmpsz <- as_Spatial(mpsz_sf)\nsg <- as_Spatial(sg_sf)\n\n\nchildcare\n\nclass       : SpatialPointsDataFrame \nfeatures    : 1545 \nextent      : 11203.01, 45404.24, 25667.6, 49300.88  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 2\nnames       :    Name,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Description \nmin values  :   kml_1, <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSBLOCKHOUSENUMBER</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSBUILDINGNAME</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSPOSTALCODE</th> <td>018989</td> </tr><tr bgcolor=\"\"> <th>ADDRESSSTREETNAME</th> <td>1, MARINA BOULEVARD, #B1 - 01, ONE MARINA BOULEVARD, SINGAPORE 018989</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSTYPE</th> <td></td> </tr><tr bgcolor=\"\"> <th>DESCRIPTION</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>HYPERLINK</th> <td></td> </tr><tr bgcolor=\"\"> <th>LANDXADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>LANDYADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"\"> <th>NAME</th> <td>THE LITTLE SKOOL-HOUSE INTERNATIONAL PTE. LTD.</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>PHOTOURL</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSFLOORNUMBER</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>08F73931F4A691F4</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200826094036</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSUNITNUMBER</th> <td></td> </tr></table></center> \nmax values  : kml_999,                  <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSBLOCKHOUSENUMBER</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSBUILDINGNAME</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSPOSTALCODE</th> <td>829646</td> </tr><tr bgcolor=\"\"> <th>ADDRESSSTREETNAME</th> <td>200, PONGGOL SEVENTEENTH AVENUE, SINGAPORE 829646</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSTYPE</th> <td></td> </tr><tr bgcolor=\"\"> <th>DESCRIPTION</th> <td>Child Care Services</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>HYPERLINK</th> <td></td> </tr><tr bgcolor=\"\"> <th>LANDXADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>LANDYADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"\"> <th>NAME</th> <td>RAFFLES KIDZ @ PUNGGOL PTE LTD</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>PHOTOURL</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSFLOORNUMBER</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>379D017BF244B0FA</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200826094036</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSUNITNUMBER</th> <td></td> </tr></table></center> \n\n\n\nmpsz\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 323 \nextent      : 2667.538, 56396.44, 15748.72, 50256.33  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 15\nnames       : OBJECTID, SUBZONE_NO, SUBZONE_N, SUBZONE_C, CA_IND, PLN_AREA_N, PLN_AREA_C,       REGION_N, REGION_C,          INC_CRC, FMEL_UPD_D,     X_ADDR,     Y_ADDR,    SHAPE_Leng,    SHAPE_Area \nmin values  :        1,          1, ADMIRALTY,    AMSZ01,      N, ANG MO KIO,         AM, CENTRAL REGION,       CR, 00F5E30B5C9B7AD8,      16409,  5092.8949,  19579.069, 871.554887798, 39437.9352703 \nmax values  :      323,         17,    YUNNAN,    YSSZ09,      Y,     YISHUN,         YS,    WEST REGION,       WR, FFCCF172717C2EAF,      16409, 50424.7923, 49552.7904, 68083.9364708,  69748298.792 \n\n\n\nsg\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 60 \nextent      : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 4\nnames       : GDO_GID, MSLINK, MAPID,              COSTAL_NAM \nmin values  :       1,      1,     0,             ISLAND LINK \nmax values  :      60,     67,     0, SINGAPORE - MAIN ISLAND \n\n\n\n\n4.2 Conversion from Spatial Classes to Spatial Objects\n\nchildcare_sp <- as(childcare, \"SpatialPoints\")\nsg_sp <- as(sg, \"SpatialPolygons\")\n\n\nchildcare_sp\n\nclass       : SpatialPoints \nfeatures    : 1545 \nextent      : 11203.01, 45404.24, 25667.6, 49300.88  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \n\n\n\nsg_sp\n\nclass       : SpatialPolygons \nfeatures    : 60 \nextent      : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \n\n\n\n\n4.3 Conversion from Spatial Object to ppp Format (spatstat)\n\nchildcare_ppp <- as(childcare_sp, \"ppp\")\nchildcare_ppp\n\nPlanar point pattern: 1545 points\nwindow: rectangle = [11203.01, 45404.24] x [25667.6, 49300.88] units\n\n\n\nplot(childcare_ppp)\n\n\n\n\n\nsummary(childcare_ppp)\n\nPlanar point pattern:  1545 points\nAverage intensity 1.91145e-06 points per square unit\n\n*Pattern contains duplicated points*\n\nCoordinates are given to 3 decimal places\ni.e. rounded to the nearest multiple of 0.001 units\n\nWindow: rectangle = [11203.01, 45404.24] x [25667.6, 49300.88] units\n                    (34200 x 23630 units)\nWindow area = 808287000 square units\n\n\n\n\n4.4 Jittering Duplicate Points\nCheck for any duplicate points\n\nany(duplicated(childcare_ppp))\n\n[1] TRUE\n\n\nCheck the number of duplications\n\nsum(multiplicity(childcare_ppp) > 1)\n\n[1] 128\n\n\nJitter the duplicate points\n\nchildcare_ppp_jit <- rjitter(childcare_ppp, \n                             retry=TRUE, \n                             nsim=1, \n                             drop=TRUE)\n\nCheck for duplicate points\n\nany(duplicated(childcare_ppp_jit))\n\n[1] FALSE\n\n\n\n\n4.5 Creating owin Object\n\nsg_owin <- as(sg_sp, \"owin\")\n\n\nplot(sg_owin)\n\n\n\n\n\nsummary(sg_owin)\n\nWindow: polygonal boundary\n60 separate polygons (no holes)\n            vertices        area relative.area\npolygon 1         38 1.56140e+04      2.09e-05\npolygon 2        735 4.69093e+06      6.27e-03\npolygon 3         49 1.66986e+04      2.23e-05\npolygon 4         76 3.12332e+05      4.17e-04\npolygon 5       5141 6.36179e+08      8.50e-01\npolygon 6         42 5.58317e+04      7.46e-05\npolygon 7         67 1.31354e+06      1.75e-03\npolygon 8         15 4.46420e+03      5.96e-06\npolygon 9         14 5.46674e+03      7.30e-06\npolygon 10        37 5.26194e+03      7.03e-06\npolygon 11        53 3.44003e+04      4.59e-05\npolygon 12        74 5.82234e+04      7.78e-05\npolygon 13        69 5.63134e+04      7.52e-05\npolygon 14       143 1.45139e+05      1.94e-04\npolygon 15       165 3.38736e+05      4.52e-04\npolygon 16       130 9.40465e+04      1.26e-04\npolygon 17        19 1.80977e+03      2.42e-06\npolygon 18        16 2.01046e+03      2.69e-06\npolygon 19        93 4.30642e+05      5.75e-04\npolygon 20        90 4.15092e+05      5.54e-04\npolygon 21       721 1.92795e+06      2.57e-03\npolygon 22       330 1.11896e+06      1.49e-03\npolygon 23       115 9.28394e+05      1.24e-03\npolygon 24        37 1.01705e+04      1.36e-05\npolygon 25        25 1.66227e+04      2.22e-05\npolygon 26        10 2.14507e+03      2.86e-06\npolygon 27       190 2.02489e+05      2.70e-04\npolygon 28       175 9.25904e+05      1.24e-03\npolygon 29      1993 9.99217e+06      1.33e-02\npolygon 30        38 2.42492e+04      3.24e-05\npolygon 31        24 6.35239e+03      8.48e-06\npolygon 32        53 6.35791e+05      8.49e-04\npolygon 33        41 1.60161e+04      2.14e-05\npolygon 34        22 2.54368e+03      3.40e-06\npolygon 35        30 1.08382e+04      1.45e-05\npolygon 36       327 2.16921e+06      2.90e-03\npolygon 37       111 6.62927e+05      8.85e-04\npolygon 38        90 1.15991e+05      1.55e-04\npolygon 39        98 6.26829e+04      8.37e-05\npolygon 40       415 3.25384e+06      4.35e-03\npolygon 41       222 1.51142e+06      2.02e-03\npolygon 42       107 6.33039e+05      8.45e-04\npolygon 43         7 2.48299e+03      3.32e-06\npolygon 44        17 3.28303e+04      4.38e-05\npolygon 45        26 8.34758e+03      1.11e-05\npolygon 46       177 4.67446e+05      6.24e-04\npolygon 47        16 3.19460e+03      4.27e-06\npolygon 48        15 4.87296e+03      6.51e-06\npolygon 49        66 1.61841e+04      2.16e-05\npolygon 50       149 5.63430e+06      7.53e-03\npolygon 51       609 2.62570e+07      3.51e-02\npolygon 52         8 7.82256e+03      1.04e-05\npolygon 53       976 2.33447e+07      3.12e-02\npolygon 54        55 8.25379e+04      1.10e-04\npolygon 55       976 2.33447e+07      3.12e-02\npolygon 56        61 3.33449e+05      4.45e-04\npolygon 57         6 1.68410e+04      2.25e-05\npolygon 58         4 9.45963e+03      1.26e-05\npolygon 59        46 6.99702e+05      9.35e-04\npolygon 60        13 7.00873e+04      9.36e-05\nenclosing rectangle: [2663.93, 56047.79] x [16357.98, 50244.03] units\n                     (53380 x 33890 units)\nWindow area = 748741000 square units\nFraction of frame area: 0.414\n\n\n\n\n4.6 Combining Point Events Object and owin Object\n\nchildcareSG_ppp = childcare_ppp[sg_owin]\n\n\nsummary(childcareSG_ppp)\n\nPlanar point pattern:  1545 points\nAverage intensity 2.063463e-06 points per square unit\n\n*Pattern contains duplicated points*\n\nCoordinates are given to 3 decimal places\ni.e. rounded to the nearest multiple of 0.001 units\n\nWindow: polygonal boundary\n60 separate polygons (no holes)\n            vertices        area relative.area\npolygon 1         38 1.56140e+04      2.09e-05\npolygon 2        735 4.69093e+06      6.27e-03\npolygon 3         49 1.66986e+04      2.23e-05\npolygon 4         76 3.12332e+05      4.17e-04\npolygon 5       5141 6.36179e+08      8.50e-01\npolygon 6         42 5.58317e+04      7.46e-05\npolygon 7         67 1.31354e+06      1.75e-03\npolygon 8         15 4.46420e+03      5.96e-06\npolygon 9         14 5.46674e+03      7.30e-06\npolygon 10        37 5.26194e+03      7.03e-06\npolygon 11        53 3.44003e+04      4.59e-05\npolygon 12        74 5.82234e+04      7.78e-05\npolygon 13        69 5.63134e+04      7.52e-05\npolygon 14       143 1.45139e+05      1.94e-04\npolygon 15       165 3.38736e+05      4.52e-04\npolygon 16       130 9.40465e+04      1.26e-04\npolygon 17        19 1.80977e+03      2.42e-06\npolygon 18        16 2.01046e+03      2.69e-06\npolygon 19        93 4.30642e+05      5.75e-04\npolygon 20        90 4.15092e+05      5.54e-04\npolygon 21       721 1.92795e+06      2.57e-03\npolygon 22       330 1.11896e+06      1.49e-03\npolygon 23       115 9.28394e+05      1.24e-03\npolygon 24        37 1.01705e+04      1.36e-05\npolygon 25        25 1.66227e+04      2.22e-05\npolygon 26        10 2.14507e+03      2.86e-06\npolygon 27       190 2.02489e+05      2.70e-04\npolygon 28       175 9.25904e+05      1.24e-03\npolygon 29      1993 9.99217e+06      1.33e-02\npolygon 30        38 2.42492e+04      3.24e-05\npolygon 31        24 6.35239e+03      8.48e-06\npolygon 32        53 6.35791e+05      8.49e-04\npolygon 33        41 1.60161e+04      2.14e-05\npolygon 34        22 2.54368e+03      3.40e-06\npolygon 35        30 1.08382e+04      1.45e-05\npolygon 36       327 2.16921e+06      2.90e-03\npolygon 37       111 6.62927e+05      8.85e-04\npolygon 38        90 1.15991e+05      1.55e-04\npolygon 39        98 6.26829e+04      8.37e-05\npolygon 40       415 3.25384e+06      4.35e-03\npolygon 41       222 1.51142e+06      2.02e-03\npolygon 42       107 6.33039e+05      8.45e-04\npolygon 43         7 2.48299e+03      3.32e-06\npolygon 44        17 3.28303e+04      4.38e-05\npolygon 45        26 8.34758e+03      1.11e-05\npolygon 46       177 4.67446e+05      6.24e-04\npolygon 47        16 3.19460e+03      4.27e-06\npolygon 48        15 4.87296e+03      6.51e-06\npolygon 49        66 1.61841e+04      2.16e-05\npolygon 50       149 5.63430e+06      7.53e-03\npolygon 51       609 2.62570e+07      3.51e-02\npolygon 52         8 7.82256e+03      1.04e-05\npolygon 53       976 2.33447e+07      3.12e-02\npolygon 54        55 8.25379e+04      1.10e-04\npolygon 55       976 2.33447e+07      3.12e-02\npolygon 56        61 3.33449e+05      4.45e-04\npolygon 57         6 1.68410e+04      2.25e-05\npolygon 58         4 9.45963e+03      1.26e-05\npolygon 59        46 6.99702e+05      9.35e-04\npolygon 60        13 7.00873e+04      9.36e-05\nenclosing rectangle: [2663.93, 56047.79] x [16357.98, 50244.03] units\n                     (53380 x 33890 units)\nWindow area = 748741000 square units\nFraction of frame area: 0.414\n\n\nPlotting childcareSG_ppp\n\nplot(childcareSG_ppp)"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#first-order-spatial-point-patterns-analysis",
    "href": "handson_ex/HE4/HE4.html#first-order-spatial-point-patterns-analysis",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "5 First-order Spatial Point Patterns Analysis",
    "text": "5 First-order Spatial Point Patterns Analysis\n\n5.1 Kernel Density Estimation\n\n5.1.1 Automatic Bandwidth Selection Method\n\nkde_childcareSG_bw <- density(\n  childcareSG_ppp,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n)\n\n\nplot(kde_childcareSG_bw)\n\n\n\n\nRetrieving the bandwidth used to compute KDE layer\n\nbw <- bw.diggle(childcareSG_ppp)\nbw\n\n   sigma \n298.4095 \n\n\n\n\n5.1.2 Re-scaling KDE Values\nConvert unit of measurement from meter to kilometer\n\nchildcareSG_ppp.km <- rescale(childcareSG_ppp, 1000, \"km\")\n\n\nkde_childcareSG_bw <- density(\n  childcareSG_ppp.km,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n)\n\n\nplot(kde_childcareSG_bw)\n\n\n\n\n\n\n\n5.2 Alternative Methods\n\nbw.CvL(childcareSG_ppp.km)\n\n   sigma \n4.543278 \n\n\n\nbw.scott(childcareSG_ppp.km)\n\n sigma.x  sigma.y \n2.224898 1.450966 \n\n\n\nbw.ppl(childcareSG_ppp.km)\n\n    sigma \n0.3897114 \n\n\n\nbw.diggle(childcareSG_ppp.km)\n\n    sigma \n0.2984095 \n\n\n\n5.2.1 Comparing Outputs of Different Algorithms\n\nkde_childcareSG.ppl <- density(childcareSG_ppp.km, \n                               sigma=bw.ppl, \n                               edge=TRUE,\n                               kernel=\"gaussian\")\npar(mfrow=c(1,2))\nplot(kde_childcareSG_bw, main = \"bw.diggle\")\nplot(kde_childcareSG.ppl, main = \"bw.ppl\")\n\n\n\n\n\n\n5.2.2 Alternative Kernel Methods\n\npar(mfrow = c(2,2))\nplot(density(\n  childcareSG_ppp.km,\n  sigma = bw.ppl,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Gaussian\")\nplot(density(\n  childcareSG_ppp.km,\n  sigma = bw.ppl,\n  edge = TRUE,\n  kernel = \"epanechnikov\"\n), main = \"Epanechnikov\")\nplot(density(\n  childcareSG_ppp.km,\n  sigma = bw.ppl,\n  edge = TRUE,\n  kernel = \"quartic\"\n), main = \"Quartic\")\nplot(density(\n  childcareSG_ppp.km,\n  sigma = bw.ppl,\n  edge = TRUE,\n  kernel = \"disc\"\n), main = \"Disc\")\n\n\n\n\n\n\n5.2.3 Comparing Fixed and Adaptive Bandwidth\n\npar(mfrow = c(1,2))\nplot(density(\n  childcareSG_ppp.km,\n  sigma = 0.6,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Fixed Bandwidth\")\nplot(adaptive.density(\n  childcareSG_ppp.km,\n  method = \"kernel\"\n), main = \"Adaptive Bandwidth\")\n\n\n\n\n\n\n5.2.4 Converting KDE Output to Grid Object\n\ngridded_kde_childcareSG_bw <- as.SpatialGridDataFrame.im(kde_childcareSG_bw)\nspplot(gridded_kde_childcareSG_bw)\n\n\n\n\n\n\n5.2.5 Convert Grid Output to Raster Layer\n\nkde_childcareSG_bw_raster <- raster(gridded_kde_childcareSG_bw)\n\n\nkde_childcareSG_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.4170614, 0.2647348  (x, y)\nextent     : 2.663926, 56.04779, 16.35798, 50.24403  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -8.476185e-15, 28.51831  (min, max)\n\n\nMissing CRS requires projection systems assignment\n\nprojection(kde_childcareSG_bw_raster) <- CRS(\"+init=EPSG:3414\")\nkde_childcareSG_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.4170614, 0.2647348  (x, y)\nextent     : 2.663926, 56.04779, 16.35798, 50.24403  (xmin, xmax, ymin, ymax)\ncrs        : +init=EPSG:3414 \nsource     : memory\nnames      : v \nvalues     : -8.476185e-15, 28.51831  (min, max)\n\n\n\n\n5.2.6 Visualising Output\n\ntm_shape(kde_childcareSG_bw_raster) +\n  tm_raster(\"v\") +\n  tm_layout(\n    legend.position = c(\"right\", \"bottom\"),\n    frame = FALSE\n  )\n\n\n\n\n\n\n\n\n5.3 Comparing Spatial Point Patterns\n\n5.3.1 Extracting Study Area\nComparing KDE of childcare at 4 locations: Punggol, Tampines, Choa Chu Kang and Jurong West.\n\npg = mpsz[mpsz@data$PLN_AREA_N == \"PUNGGOL\",]\ntm = mpsz[mpsz@data$PLN_AREA_N == \"TAMPINES\",]\nck = mpsz[mpsz@data$PLN_AREA_N == \"CHOA CHU KANG\",]\njw = mpsz[mpsz@data$PLN_AREA_N == \"JURONG WEST\",]\n\nPlotting the 4 target planning areas:\n\npar(mfrow = c(2,2))\nplot(pg, main = \"Punggol\")\nplot(tm, main = \"Tampines\")\nplot(ck, main = \"Choa Chu Kang\")\nplot(jw, main = \"Jurong West\")\n\n\n\n\n\n\n5.3.2 Converting Spatial Point Data Frame into Spatial Polygon Objects\n\npg_sp = as(pg, \"SpatialPolygons\")\ntm_sp = as(tm, \"SpatialPolygons\")\nck_sp = as(ck, \"SpatialPolygons\")\njw_sp = as(jw, \"SpatialPolygons\")\n\n\n\n5.3.3 Converting Spatial Polygon Objects to owin Objects\n\npg_owin = as(pg_sp, \"owin\")\ntm_owin = as(tm_sp, \"owin\")\nck_owin = as(ck_sp, \"owin\")\njw_owin = as(jw_sp, \"owin\")\n\n\n\n5.3.4 Combining Childcare Points and Study Areas\n\nchildcare_pg_ppp = childcare_ppp_jit[pg_owin]\nchildcare_tm_ppp = childcare_ppp_jit[tm_owin]\nchildcare_ck_ppp = childcare_ppp_jit[ck_owin]\nchildcare_jw_ppp = childcare_ppp_jit[jw_owin]\n\n\n\n5.3.5 Re-scaling unit of measurement from meter to kilometer:\n\nchildcare_pg_ppp.km = rescale(childcare_pg_ppp, 1000, \"km\")\nchildcare_tm_ppp.km = rescale(childcare_tm_ppp, 1000, \"km\")\nchildcare_ck_ppp.km = rescale(childcare_ck_ppp, 1000, \"km\")\nchildcare_jw_ppp.km = rescale(childcare_jw_ppp, 1000, \"km\")\n\n\n\n5.3.6 Plotting Output\n\npar(mfrow = c(2,2))\nplot(childcare_pg_ppp.km, main = \"Punggol\")\nplot(childcare_tm_ppp.km, main = \"Tampines\")\nplot(childcare_ck_ppp.km, main = \"Choa Chu Kang\")\nplot(childcare_jw_ppp.km, main = \"Jurong West\")\n\n\n\n\n\n\n5.3.7 Computing KDE\n\npar(mfrow = c(2,2))\nplot(density(\n  childcare_pg_ppp.km,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Punggol\")\nplot(density(\n  childcare_tm_ppp.km,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Tampines\")\nplot(density(\n  childcare_ck_ppp.km,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Choa Chu Kang\")\nplot(density(\n  childcare_jw_ppp.km,\n  sigma = bw.diggle,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Jurong West\")\n\n\n\n\n\n\n5.3.8 Computing Fixed Bandwidth KDE\nBandwidth = 250m\n\npar(mfrow = c(2,2))\nplot(density(\n  childcare_pg_ppp.km,\n  sigma = 0.25,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Punggol\")\nplot(density(\n  childcare_tm_ppp.km,\n  sigma = 0.25,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Tampines\")\nplot(density(\n  childcare_ck_ppp.km,\n  sigma = 0.25,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Choa Chu Kang\")\nplot(density(\n  childcare_jw_ppp.km,\n  sigma = 0.25,\n  edge = TRUE,\n  kernel = \"gaussian\"\n), main = \"Jurong West\")"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#nearest-neighbour-analysis",
    "href": "handson_ex/HE4/HE4.html#nearest-neighbour-analysis",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "6 Nearest Neighbour Analysis",
    "text": "6 Nearest Neighbour Analysis\nTest hypotheses:\nH0 = The distribution of childcare services are randomly distributed.\nH1 = The distribution of childcare services are not randomly distributed.\nConfident Interval of 95%.\n\n6.1 Clark and Evans Test\n\n6.1.1 Singapore Area\n\nclarkevans.test(\n  childcareSG_ppp,\n  correction = \"none\",\n  clipregion = \"sg_owin\",\n  alternative = c(\"clustered\"),\n  nsim = 99\n)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 99 simulations of CSR with fixed n\n\ndata:  childcareSG_ppp\nR = 0.54756, p-value = 0.01\nalternative hypothesis: clustered (R < 1)\n\n\nConclusion:\nSince p-value is smaller than 0.05, null hypothesis is rejected. The distribution of childcare services are not randomly distributed.\nSince the R value is 0.55 (2 d.p.) < 1, the pattern exhibits clustering.\n\n\n6.1.2 Choa Chu Kang Planning Area\n\nclarkevans.test(\n  childcare_ck_ppp,\n  correction = \"none\",\n  clipregion = NULL,\n  alternative = c(\"two.sided\"),\n  nsim = 999\n)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 999 simulations of CSR with fixed n\n\ndata:  childcare_ck_ppp\nR = 0.91854, p-value = 0.064\nalternative hypothesis: two-sided\n\n\nConclusion:\nSince p-value is larger than 0.05, null hypothesis is not rejected. The distribution of childcare services in Choa Chu Kang are randomly distributed.\nSince the R value is 0.97 (2 d.p.) < 1, the pattern exhibits clustering.\n\n\n6.1.3 Tampines Planning Area\n\nclarkevans.test(\n  childcare_tm_ppp,\n  correction = \"none\",\n  clipregion = NULL,\n  alternative = \"two.sided\",\n  nsim = 999\n)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 999 simulations of CSR with fixed n\n\ndata:  childcare_tm_ppp\nR = 0.80798, p-value = 0.002\nalternative hypothesis: two-sided\n\n\nConclusion:\nSince p-value is smaller than 0.05, null hypothesis is rejected. The distribution of childcare services in Tampines are not randomly distributed.\nSince the R value is 0.80 (2 d.p.) < 1, the pattern exhibits clustering."
  },
  {
    "objectID": "handson_ex/HE1/HE1.html",
    "href": "handson_ex/HE1/HE1.html",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "",
    "text": "pacman::p_load(sf, tidyverse)"
  },
  {
    "objectID": "handson_ex/HE1/HE1.html#plotting-geospatial-data",
    "href": "handson_ex/HE1/HE1.html#plotting-geospatial-data",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "3 Plotting Geospatial Data",
    "text": "3 Plotting Geospatial Data\n\n3.1 plot(sf)\n\nThe plot() function is a simple way to plot the data. For better quality plots, tmap should be used.\n\nDefault plot: multi-plot of all attributes\n\nplot(mpsz)\n\n\n\n\n\n3.1.1 Plotting only the Geometry\n\nplot(st_geometry(mpsz))\n\n\n\n\n\n\n3.1.2 Plotting Specific Attributes\n\nplot(mpsz[\"PLN_AREA_N\"])"
  },
  {
    "objectID": "handson_ex/HE1/HE1.html#projection",
    "href": "handson_ex/HE1/HE1.html#projection",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "4 Projection",
    "text": "4 Projection\n\n4.1 Assigning EPSG Code to sf Data Frame\n\n4.1.1 Checking CRS of sf Data Frame\n\nst_crs(mpsz)\n\nCoordinate Reference System:\n  User input: SVY21 \n  wkt:\nPROJCRS[\"SVY21\",\n    BASEGEOGCRS[\"SVY21[WGS84]\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"Degree\",0.0174532925199433]]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nThe EPSG is 9001 when svy21 should be 3414.\n\n\n4.1.2 Assigning the Correct EPSG Code\n\nmpsz3414 <- st_set_crs(mpsz, 3414)\nst_crs(mpsz3414)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\n\n\n4.2 Transforming Projections\n\npreschool3414 <- st_transform(\n  preschool, crs = 3414\n)\nhead(preschool3414, n=5)\n\nSimple feature collection with 5 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 13258.34 ymin: 35611.04 xmax: 35272.09 ymax: 46634.14\nz_range:       zmin: 0 zmax: 0\nProjected CRS: SVY21 / Singapore TM\n   Name\n1 kml_1\n2 kml_2\n3 kml_3\n4 kml_4\n5 kml_5\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Description\n1       <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BRILLIANT TOTS PTE. LTD.</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9334</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>610, JURONG WEST STREET 65, #01 - 534, S 640610</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>640610</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>0523C7904478A63D</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n2       <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUBBLESLAND PLAYHOUSE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT7680</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>238, COMPASSVALE WALK, #01 - 542, S 540238</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>540238</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>18BED05A501AA168</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n3 <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUCKET HOUSE PRESCHOOL</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9527</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>39, WOODLANDS CLOSE, #01 - 62, MEGA@WOODLANDS, S 737856</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>737856</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>C88B9AC31EE71BF6</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n4      <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUMBLE BEE CHILD CARE CENTRE</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT3150</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>369, WOODLANDS AVENUE 1, #01 - 853, S 730369</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>730369</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>64AB8FACA8F60129</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n5         <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9117</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>327B, ANCHORVALE ROAD, #01 - 322, S 542327</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>542327</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>E1B55AC65B9059E8</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n                       geometry\n1 POINT Z (13258.34 35611.04 0)\n2 POINT Z (35272.09 41373.42 0)\n3 POINT Z (25050.54 46634.14 0)\n4 POINT Z (22892.48 46127.66 0)\n5 POINT Z (34155.79 41949.13 0)"
  },
  {
    "objectID": "handson_ex/HE1/HE1.html#geospatial-data",
    "href": "handson_ex/HE1/HE1.html#geospatial-data",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "2 Geospatial Data",
    "text": "2 Geospatial Data\n\n2.1 Importing Geospatial Data\nThere are 3 geospatial data-sets to import: MP14_SUBZONE_WEB_PL, CyclingPath and PreSchool respectively:\n\n2.1.1 MP14_SUBZONE_WEB_PL: Importing Polygon (MULTIPOLYGON) Feature Data Frame\n\ndsn: define data path\nlayer: shapefile name (accepts all extensions - .shp, .dbf, .prj, .shx)\n\n\nmpsz = st_read(\n  dsn = \"data/geospatial/mpsz\",\n  layer = \"MP14_SUBZONE_WEB_PL\"\n)\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE1\\data\\geospatial\\mpsz' using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\n\n2.1.2 CyclingPath: Importing Polyline (MULTILINESTRING) Feature Data\n\ncyclingpath = st_read(\n  dsn = \"data/geospatial/cyclingpath\",\n  layer = \"CyclingPathGazette\"\n)\n\nReading layer `CyclingPathGazette' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE1\\data\\geospatial\\CyclingPath' \n  using driver `ESRI Shapefile'\nSimple feature collection with 2248 features and 2 fields\nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 11854.32 ymin: 28347.98 xmax: 42626.09 ymax: 48948.15\nProjected CRS: SVY21\n\n\n\n\n2.1.3 PreSchool: Importing KML Files\n\npreschool = st_read(\"data/geospatial/preschools-location.kml\")\n\nReading layer `PRESCHOOLS_LOCATION' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE1\\data\\geospatial\\preschools-location.kml' \n  using driver `KML'\nSimple feature collection with 1925 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\n\n\n\n2.2 Understanding sf Data Frame\n\n2.2.1 st_geometry(sf)\nDisplays number of features, geometry type, projected CRS (coordinate system) and the first 5 geometries.\n\nst_geometry(mpsz)\n\nGeometry set for 323 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 5 geometries:\n\n\n\n\n2.2.2 glimpse(sf)\nDisplays an overview of all the columns.\n\nglimpse(mpsz)\n\nRows: 323\nColumns: 16\n$ OBJECTID   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ SUBZONE_NO <int> 1, 1, 3, 8, 3, 7, 9, 2, 13, 7, 12, 6, 1, 5, 1, 1, 3, 2, 2, …\n$ SUBZONE_N  <chr> \"MARINA SOUTH\", \"PEARL'S HILL\", \"BOAT QUAY\", \"HENDERSON HIL…\n$ SUBZONE_C  <chr> \"MSSZ01\", \"OTSZ01\", \"SRSZ03\", \"BMSZ08\", \"BMSZ03\", \"BMSZ07\",…\n$ CA_IND     <chr> \"Y\", \"Y\", \"Y\", \"N\", \"N\", \"N\", \"N\", \"Y\", \"N\", \"N\", \"N\", \"N\",…\n$ PLN_AREA_N <chr> \"MARINA SOUTH\", \"OUTRAM\", \"SINGAPORE RIVER\", \"BUKIT MERAH\",…\n$ PLN_AREA_C <chr> \"MS\", \"OT\", \"SR\", \"BM\", \"BM\", \"BM\", \"BM\", \"SR\", \"QT\", \"QT\",…\n$ REGION_N   <chr> \"CENTRAL REGION\", \"CENTRAL REGION\", \"CENTRAL REGION\", \"CENT…\n$ REGION_C   <chr> \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\",…\n$ INC_CRC    <chr> \"5ED7EB253F99252E\", \"8C7149B9EB32EEFC\", \"C35FEFF02B13E0E5\",…\n$ FMEL_UPD_D <date> 2014-12-05, 2014-12-05, 2014-12-05, 2014-12-05, 2014-12-05…\n$ X_ADDR     <dbl> 31595.84, 28679.06, 29654.96, 26782.83, 26201.96, 25358.82,…\n$ Y_ADDR     <dbl> 29220.19, 29782.05, 29974.66, 29933.77, 30005.70, 29991.38,…\n$ SHAPE_Leng <dbl> 5267.381, 3506.107, 1740.926, 3313.625, 2825.594, 4428.913,…\n$ SHAPE_Area <dbl> 1630379.27, 559816.25, 160807.50, 595428.89, 387429.44, 103…\n$ geometry   <MULTIPOLYGON [m]> MULTIPOLYGON (((31495.56 30..., MULTIPOLYGON (…\n\n\n\n\n2.2.3 head(sf, n=y)\nDisplays all information of the first n features of the data frame.\n\nhead(mpsz, n=5)\n\nSimple feature collection with 5 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 25867.68 ymin: 28369.47 xmax: 32362.39 ymax: 30435.54\nProjected CRS: SVY21\n  OBJECTID SUBZONE_NO      SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1        1          1   MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2        2          1   PEARL'S HILL    OTSZ01      Y          OUTRAM\n3        3          3      BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4        4          8 HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5        5          3        REDHILL    BMSZ03      N     BUKIT MERAH\n  PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1         MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2         OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3         SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4         BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5         BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n    Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1 29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2 29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3 29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4 29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5 30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30..."
  },
  {
    "objectID": "handson_ex/HE1/HE1.html#aspatial-data",
    "href": "handson_ex/HE1/HE1.html#aspatial-data",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "5 Aspatial Data",
    "text": "5 Aspatial Data\n\n5.1 Importing Data\n\nlistings <- read_csv(\"data/aspatial/listings.csv\")\n\n\n\n5.2 Understanding the Data\nlist() instead of glimpse()\n\nlist(listings)\n\n[[1]]\n# A tibble: 3,037 × 18\n       id name     host_id host_…¹ neigh…² neigh…³ latit…⁴ longi…⁵ room_…⁶ price\n    <dbl> <chr>      <dbl> <chr>   <chr>   <chr>     <dbl>   <dbl> <chr>   <dbl>\n 1  71609 Ensuite…  367042 Belinda East R… Tampin…    1.35    104. Privat… 46437\n 2  71896 B&B  Ro…  367042 Belinda East R… Tampin…    1.35    104. Privat…    81\n 3  71903 Room 2-…  367042 Belinda East R… Tampin…    1.35    104. Privat…    81\n 4 275343 Amazing… 1439258 Kay     Centra… Bukit …    1.29    104. Privat…    52\n 5 275344 15 mins… 1439258 Kay     Centra… Bukit …    1.29    104. Privat…    49\n 6 289234 Booking…  367042 Belinda East R… Tampin…    1.34    104. Privat…   175\n 7 294281 5 mins … 1521514 Elizab… Centra… Newton     1.31    104. Privat…    79\n 8 324945 Cozy Bl… 1439258 Kay     Centra… Bukit …    1.29    104. Privat…    49\n 9 330089 Cozy Bl… 1439258 Kay     Centra… Bukit …    1.29    104. Privat…    55\n10 330095 10 mins… 1439258 Kay     Centra… Bukit …    1.29    104. Privat…    55\n# … with 3,027 more rows, 8 more variables: minimum_nights <dbl>,\n#   number_of_reviews <dbl>, last_review <date>, reviews_per_month <dbl>,\n#   calculated_host_listings_count <dbl>, availability_365 <dbl>,\n#   number_of_reviews_ltm <dbl>, license <chr>, and abbreviated variable names\n#   ¹​host_name, ²​neighbourhood_group, ³​neighbourhood, ⁴​latitude, ⁵​longitude,\n#   ⁶​room_type\n\n\n\n\n5.3 Creating sf Data Frame\n\nlistings_sf <- st_as_sf(\n  listings,\n  coords = c(\"longitude\", \"latitude\"),\n  crs = 4326\n) %>%\n  st_transform(crs = 3414)\n\n\nglimpse(listings_sf)\n\nRows: 3,037\nColumns: 17\n$ id                             <dbl> 71609, 71896, 71903, 275343, 275344, 28…\n$ name                           <chr> \"Ensuite Room (Room 1 & 2) near EXPO\", …\n$ host_id                        <dbl> 367042, 367042, 367042, 1439258, 143925…\n$ host_name                      <chr> \"Belinda\", \"Belinda\", \"Belinda\", \"Kay\",…\n$ neighbourhood_group            <chr> \"East Region\", \"East Region\", \"East Reg…\n$ neighbourhood                  <chr> \"Tampines\", \"Tampines\", \"Tampines\", \"Bu…\n$ room_type                      <chr> \"Private room\", \"Private room\", \"Privat…\n$ price                          <dbl> 46437, 81, 81, 52, 49, 175, 79, 49, 55,…\n$ minimum_nights                 <dbl> 92, 92, 92, 60, 60, 92, 92, 60, 60, 60,…\n$ number_of_reviews              <dbl> 20, 24, 47, 22, 14, 12, 133, 17, 12, 4,…\n$ last_review                    <date> 2020-01-17, 2019-10-13, 2020-01-09, 20…\n$ reviews_per_month              <dbl> 0.15, 0.17, 0.33, 0.19, 0.11, 0.09, 1.0…\n$ calculated_host_listings_count <dbl> 6, 6, 6, 46, 46, 6, 7, 46, 46, 46, 6, 7…\n$ availability_365               <dbl> 242, 242, 305, 273, 281, 242, 365, 274,…\n$ number_of_reviews_ltm          <dbl> 0, 0, 0, 2, 1, 0, 0, 3, 2, 1, 1, 0, 0, …\n$ license                        <chr> NA, NA, NA, \"S0399\", \"S0399\", NA, NA, \"…\n$ geometry                       <POINT [m]> POINT (41972.5 36390.05), POINT (…"
  },
  {
    "objectID": "handson_ex/HE1/HE1.html#geoprocessing",
    "href": "handson_ex/HE1/HE1.html#geoprocessing",
    "title": "Hands-on Exercise 1: Geospatial Wrangling with R",
    "section": "6 Geoprocessing",
    "text": "6 Geoprocessing\n\nScenario: The authority is planning to upgrade the exiting cycling path. To do so, they need to acquire 5 metres of reserved land on the both sides of the current cycling path. You are tasked to determine the extend of the land need to be acquired and their total area.\n\n\nCompute 5-meter buffers around cycling paths\nCalculate the are of buffers\nCalculate the sum of total land involved\n\n\nbuffer_cycling <- st_buffer(cyclingpath, dist = 5, nQuadSegs = 30)\n\nnQuadSegs: number of line segments used to approximate a quarter circle\n\nbuffer_cycling$AREA <- st_area(buffer_cycling)\n\n\nsum(buffer_cycling$AREA)\n\n1556978 [m^2]\n\n\nAnswer: 1556978 [m^2]\n\n\nScenario:\nA pre-school service group want to find out the numbers of pre-schools in each Planning Subzone.\n\n\nIdentify pre-schools located inside each Planning Subzone\nCalculate number of pre-schools in each Planning Subzone\nList the Planning Subzone with most number of pre-school\n\n\nmpsz3414$`PreSch Count` <- lengths(st_intersects(mpsz3414, preschool3414))\n\n\nsummary(mpsz3414$`PreSch Count`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00    0.00    3.00    5.96    9.00   58.00 \n\n\n\ntop_n(mpsz3414, 1, `PreSch Count`)\n\nSimple feature collection with 1 feature and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 39655.33 ymin: 35966 xmax: 42940.57 ymax: 38622.37\nProjected CRS: SVY21 / Singapore TM\n  OBJECTID SUBZONE_NO     SUBZONE_N SUBZONE_C CA_IND PLN_AREA_N PLN_AREA_C\n1      189          2 TAMPINES EAST    TMSZ02      N   TAMPINES         TM\n     REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR   Y_ADDR SHAPE_Leng\n1 EAST REGION       ER 21658EAAF84F4D8D 2014-12-05 41122.55 37392.39   10180.62\n  SHAPE_Area                       geometry PreSch Count\n1    4339824 MULTIPOLYGON (((42196.76 38...           58\n\n\n\ntop_n(x, n, wt):\n\nn: top n rows\nwt: ordering by variable (optional)\n\n\n\nScenario:\nCalculate density of pre-school by planning subzone.\n\n\nCalculate area of each planning subzone\nCompute density\n\n\nmpsz3414$Area <- mpsz3414 %>%\n  st_area()\n\n\nmpsz3414 <- mpsz3414 %>%\n  mutate(`PreSch Density` = `PreSch Count`/Area * 1000000)\n\n\nhist(mpsz3414$`PreSch Density`)\n\n\n\n\nTo make it look prettier:\n\nggplot(\n  data = mpsz3414,\n  aes(x=as.numeric(`PreSch Density`))\n) +\n  geom_histogram(\n    bins = 20,\n    color = \"black\",\n    fill = \"light blue\"\n  ) +\n  labs(\n    title = \"Are pre-schools even distributed in Singapore?\",\n    subtitle = \"There are many planning sub-zones with a single pre-school, on the other hand, \\nthere are two planning sub-zones with at least 20 pre-schools\",\n    x = \"Pre-school Density (per km sq)\",\n    y = \"Frequency\"\n  )\n\n\n\n\n\nRelationship between Pre-school Density and Pre-school Count\n\n\nggplot(data=mpsz3414, \n       aes(y = `PreSch Count`, \n           x= as.numeric(`PreSch Density`)))+\n  geom_point(color=\"black\", \n             fill=\"light blue\") +\n  xlim(0, 40) +\n  ylim(0, 40) +\n  labs(title = \"\",\n      x = \"Pre-school density (per km sq)\",\n      y = \"Pre-school count\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "IS415",
    "section": "",
    "text": "Github Link"
  },
  {
    "objectID": "handson_ex/HE4/HE4.html#nd-order-spatial-point-pattern-analysis-methods",
    "href": "handson_ex/HE4/HE4.html#nd-order-spatial-point-pattern-analysis-methods",
    "title": "Hands-on Exercise 4 & 5: 1st & 2nd Order Spatial Point Patterns Analysis Methods",
    "section": "7 2nd Order Spatial Point Pattern Analysis Methods",
    "text": "7 2nd Order Spatial Point Pattern Analysis Methods\n\n7.1 G-Function\nMeasures distribution of distances from an arbitrary event to its nearest event.\n\n7.1.1 Choa Chu Kang Planning Area\n\nGest(x): Estimates the nearest neighbour distance distribution function from a point pattern in a window of arbitrary shape\n\n\nG_CK = Gest(childcare_ck_ppp, correction = \"border\")\nplot(G_CK, xlim = c(0, 500))\n\n\n\n\n\nenvelope(x)\n\nif p-value < alpha-value (0.001) = null hypothesis is rejected\n\n\n\nG_CK.csr <- envelope(childcare_ck_ppp, Gest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(G_CK.csr)\n\n\n\n\n\n\n7.1.2 Tampines Planning Area\n\nG_tm = Gest(childcare_tm_ppp, correction = \"best\")\nplot(G_tm)\n\n\n\n\n\nG_tm.csr <- envelope(childcare_tm_ppp, Gest, correction = \"all\", nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(G_tm.csr)\n\n\n\n\n\n\n\n7.2 F-Function\nEstimates empty space function F(r) or its hazard rate h(r) from a point pattern in a window of arbitrary shape.\n\n7.2.1 Choa Chu Kang Planning Area\n\nF_CK = Fest(childcare_ck_ppp)\nplot(F_CK)\n\n\n\n\nComplete Spatial Randomness Test\n\nF_CK.csr <- envelope(childcare_ck_ppp, Fest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(F_CK.csr)\n\n\n\n\n\n\n7.2.2 Tampines\n\nF_tm = Fest(childcare_tm_ppp, correction = \"best\")\nplot(F_tm)\n\n\n\n\n\nF_tm.csr <- envelope(childcare_tm_ppp, Fest, correction = \"all\", nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(F_tm.csr)\n\n\n\n\n\n\n\n7.3 K-Function\nMeasures the number of events found up to a given distance of any particular event.\n\n7.3.1 Choa Chu Kang\n\nK_ck = Kest(childcare_ck_ppp, correction = \"Ripley\")\nplot(K_ck, . -r ~ r, ylab= \"K(d)-r\", xlab = \"d(m)\")\n\n\n\n\n\nK_ck.csr <- envelope(childcare_ck_ppp, Kest, nsim = 99, rank = 1, glocal=TRUE)\n\nGenerating 99 simulations of CSR  ...\n1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,  99.\n\nDone.\n\n\n\nplot(K_ck.csr, . - r ~ r, xlab=\"d\", ylab=\"K(d)-r\")\n\n\n\n\n\n\n7.3.2 Tampines Planning Area\n\nK_tm = Kest(childcare_tm_ppp, correction = \"Ripley\")\nplot(K_tm, . -r ~ r, \n     ylab= \"K(d)-r\", xlab = \"d(m)\", \n     xlim=c(0,1000))\n\n\n\n\n\nK_tm.csr <- envelope(childcare_tm_ppp, Kest, nsim = 99, rank = 1, glocal=TRUE)\n\nGenerating 99 simulations of CSR  ...\n1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,  99.\n\nDone.\n\n\n\nplot(K_tm.csr, . - r ~ r, \n     xlab=\"d\", ylab=\"K(d)-r\", xlim=c(0,500))\n\n\n\n\n\n\n\n7.4 L-Function\n\n7.4.1 Choa Chu Kang Planning Area\n\nL_ck = Lest(childcare_ck_ppp, correction = \"Ripley\")\nplot(L_ck, . -r ~ r, \n     ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n\n\n\n\nL_ck.csr <- envelope(childcare_ck_ppp, Lest, nsim = 99, rank = 1, glocal=TRUE)\n\nGenerating 99 simulations of CSR  ...\n1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,  99.\n\nDone.\n\n\n\nplot(L_ck.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\")\n\n\n\n\n\n\n7.4.2 Tampines Planning Area\n\nL_tm = Lest(childcare_tm_ppp, correction = \"Ripley\")\nplot(L_tm, . -r ~ r, \n     ylab= \"L(d)-r\", xlab = \"d(m)\", \n     xlim=c(0,1000))\n\n\n\n\n\nL_tm.csr <- envelope(childcare_tm_ppp, Lest, nsim = 99, rank = 1, glocal=TRUE)\n\nGenerating 99 simulations of CSR  ...\n1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80,\n81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98,  99.\n\nDone.\n\n\n\nplot(L_tm.csr, . - r ~ r, \n     xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html",
    "href": "take_home_ex/THE1/THE1.html",
    "title": "Take Home Exercise 1",
    "section": "",
    "text": "Understanding the geographical distribution of functional and non-functional water points across Osun state in Nigeria.\n\n\n\n\n\n\nData\nFormat (Type)\nDescription\nSource\n\n\n\n\nWPdx+\nCSV (Aspatial)\nWater Points with details on how clean it is.\nWater Point Data Exchange (2020)\n\n\nNigeria Administrative Boundaries Level 2\nShapefile (Spatial)\nNigeria political administrative boundaries\nOCHA Service (2016)\n\n\nNigeria Geoboundaries\nShapefile (Spatial)\nNigeria political administrative boundaries\ngeoBoundaries (2020)"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#installing-and-loading-packages",
    "href": "take_home_ex/THE1/THE1.html#installing-and-loading-packages",
    "title": "Take Home Exercise 1",
    "section": "2.1 Installing and Loading Packages",
    "text": "2.1 Installing and Loading Packages\n\npacman::p_load(sf, tidyverse, funModeling, tmap, sfdep, spatstat, maptools, raster, tidyr, dplyr, sp)"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#importing-data",
    "href": "take_home_ex/THE1/THE1.html#importing-data",
    "title": "Take Home Exercise 1",
    "section": "2.2 Importing Data",
    "text": "2.2 Importing Data\n\n2.2.1 WPdx+\n\nImporting DataCreating Feature Data Frame\n\n\nFrom the aspatial data folder, import the WPdx csv file. Using the filter() function, get the Osun State data.\n\nwp_nga_osun <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#adm1` == \"Osun\")\n\n\nhead(wp_nga_osun, n = 5)\n\n# A tibble: 5 × 74\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n# … with 64 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\n\n\nConvert wp_nga_osun into sf data.frame using st_as_sfc()\n\n\nwp_nga_osun$Geometry = st_as_sfc(wp_nga_osun$`New Georeferenced Column`)\nhead(wp_nga_osun)\n\n# A tibble: 6 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n6 235508 Federa…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\nConvert tibble data.frame into sf object using st_sf(), including the correct Nigeria coordinate system, 26392.\n\n\nwp_sf <- st_sf(wp_nga_osun, crs = 4326) %>%\n  st_transform(crs = 26392)\nhead(wp_sf, n=5)\n\nSimple feature collection with 5 features and 74 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 202548.3 ymin: 381774.4 xmax: 254470 ymax: 435793.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 5 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#importing-data-and-data-wrangling",
    "href": "take_home_ex/THE1/THE1.html#importing-data-and-data-wrangling",
    "title": "Take Home Exercise 1",
    "section": "2.2 Importing Data and Data Wrangling",
    "text": "2.2 Importing Data and Data Wrangling\n\n2.2.1 WPdx+\n\nImporting DataCleaning DataCreating Feature Data Frame and ProjectionFinal sf Dataframe\n\n\nFrom the aspatial data folder, import the WPdx csv file. Using the filter() function, get the Osun State data.\n\nwp_nga_osun <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#adm1` == \"Osun\")\n\n\nhead(wp_nga_osun, n = 5)\n\n# A tibble: 5 × 74\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n# … with 64 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\n\n\nwp_nga_osun[rowSums(is.na(wp_nga_osun))!=0,]\n\n# A tibble: 5,059 × 74\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 225950 Federal Minis…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P…\n 2 225524 Federal Minis…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P…\n 3 197014 Federal Minis…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan…\n 4 225173 Federal Minis…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P…\n 5 225843 Federal Minis…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P…\n 6 235508 Federal Minis…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P…\n 7 197708 Federal Minis…    7.87    4.72 05/13/… Yes     Boreho… Well    Mechan…\n 8 195041 Federal Minis…    7.73    4.45 06/17/… Yes     Protec… Spring  <NA>   \n 9 225222 Federal Minis…    7.81    4.15 05/14/… Yes     Protec… Spring  Mechan…\n10 196907 Federal Minis…    7.96    4.57 05/12/… No      Boreho… Well    Mechan…\n# … with 5,049 more rows, 65 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\n\nAll 5059 observations have a NULL value for variables such as “#adm3”, “#adm4”, “install_year” etc. However none of the NULL values have a impact on the analysis to be done so the NULL values will be ignored.\n\n\n\nConvert wp_nga_osun into sf data.frame using st_as_sfc()\n\n\nwp_nga_osun$Geometry = st_as_sfc(wp_nga_osun$`New Georeferenced Column`)\nhead(wp_nga_osun)\n\n# A tibble: 6 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n6 235508 Federa…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\nConvert tibble data.frame into sf object using st_sf(), including the correct Nigeria coordinate system, 26392.\n\n\nwp_sf <- st_sf(wp_nga_osun, crs = 4326) %>%\n  st_transform(crs = 26392)\nhead(wp_sf, n=5)\n\nSimple feature collection with 5 features and 74 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 202548.3 ymin: 381774.4 xmax: 254470 ymax: 435793.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 5 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\n\n\nCheck for the CRS and EPSG\n\n\nst_crs(wp_sf)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\n\nSummary of wp_sf\n\n\nst_geometry(wp_sf)\n\nGeometry set for 5059 features \nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 182486.3 ymin: 340054.1 xmax: 291546.1 ymax: 452045.5\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:\n\n\n\n\n\n\n\n2.2.2 Nigeria Administrative Boundaries Level 2\n\nImport DataProjectionFinal sf Dataframe\n\n\n\nNGA = st_read(\n  \"data/geospatial\",\n  layer = \"nga_polnda_adm2_1m_salb\"\n)\n\nReading layer `nga_polnda_adm2_1m_salb' from data source \n  `D:\\bellekwang\\IS415\\take_home_ex\\THE1\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 773 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668432 ymin: 4.277144 xmax: 14.67808 ymax: 13.90103\nGeodetic CRS:  WGS 84\n\n\nThe NGA sf dataframe is imported as a MULTIPOLYGON sf dataframe. The CRS is “WGS 84” which is incorrect.\n\n\n\nTransform NGA CRS to 26392\n\n\nNGA <- st_transform(NGA, crs = 26392)\n\n\nCheck the EPSG\n\n\nst_crs(NGA)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\n\n\n\nst_geometry(NGA)\n\nGeometry set for 773 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 26650.44 ymin: 30984.34 xmax: 1344058 ymax: 1096748\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:\n\n\n\n\n\n\n\n2.2.3 geoBoundaries\n\nImport DataProjectionFinal sf Dataframe\n\n\nImport the geoBoundaries using st_read to create a geoBoundaries sf dataframe.\n\ngeoNGA <- st_read(\n  \"data/geospatial\",\n  layer = \"geoBoundaries-NGA-ADM2\"\n)\n\nReading layer `geoBoundaries-NGA-ADM2' from data source \n  `D:\\bellekwang\\IS415\\take_home_ex\\THE1\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\nThe geoBoundaries sf dataframe is imported as a MULTIPOLYGON sf dataframe. The CRS is “WGS 84” which is incorrect.\n\n\n\nTransform geoNGA CRS to 26932\n\n\ngeoNGA <- st_transform(\n  geoNGA, crs = 26932\n)\n\n\nCheck the EPSG\n\n\nst_crs(geoNGA)\n\nCoordinate Reference System:\n  User input: EPSG:26932 \n  wkt:\nPROJCRS[\"NAD83 / Alaska zone 2\",\n    BASEGEOGCRS[\"NAD83\",\n        DATUM[\"North American Datum 1983\",\n            ELLIPSOID[\"GRS 1980\",6378137,298.257222101,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4269]],\n    CONVERSION[\"SPCS83 Alaska zone 2 (meters)\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",54,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",-142,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9999,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"easting (X)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"northing (Y)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"United States (USA) - Alaska - between 144°W and 141°W, onshore.\"],\n        BBOX[59.72,-144.01,70.16,-140.98]],\n    ID[\"EPSG\",26932]]\n\n\nThe EPSG is now correct at 26932.\n\n\n\nst_geometry(geoNGA)\n\nGeometry set for 774 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 3104634 ymin: 12206480 xmax: 4671986 ymax: 13459860\nProjected CRS: NAD83 / Alaska zone 2\nFirst 5 geometries:"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#cleaning-and-tidying-data",
    "href": "take_home_ex/THE1/THE1.html#cleaning-and-tidying-data",
    "title": "Take Home Exercise 1",
    "section": "2.3 Cleaning and Tidying Data",
    "text": "2.3 Cleaning and Tidying Data\ncheck for duplicate\nthen use jitter\n\n2.3.1 WPdx+\n\nfreq(data = wp_sf,\n     input = '#status_clean')\n\n\n\n\n              #status_clean frequency percentage cumulative_perc\n1                Functional      2461      48.65           48.65\n2            Non-Functional      2084      41.19           89.84\n3  Functional, needs repair       266       5.26           95.10\n4       Non-Functional, dry       162       3.20           98.30\n5    Functional, not in use        62       1.23           99.53\n6  Abandoned/Decommissioned        16       0.32           99.85\n7 Functional but not in use         8       0.16          100.00"
  },
  {
    "objectID": "inclass_ex/ICE5/ICE5.html",
    "href": "inclass_ex/ICE5/ICE5.html",
    "title": "In-class Exercise 5",
    "section": "",
    "text": "Colocated: A is surrounded by several point events B within specified distance.\nIsolated: A is surrounded by several point events A within specified distance (more A>B)\n\n\n\n\n\nBase formula\nWeighted average\nKernel function\n\nbi-square kernel will be 0 if value is negative\n\n\n\n\n\nAlgorithm calculates the p-value during permutations.\n\n\n\n\nquotient score for each input of interest\n\n>1: more like to have category B (colocated)\n<1: less likely to have category B (isolated)\n=1: proportion of categories within neighbourhood is a good representation of the entire area (but rare)\ncannot go less than 0\n\np-value: significance(?)"
  },
  {
    "objectID": "inclass_ex/ICE5/ICE5.html#setting-up",
    "href": "inclass_ex/ICE5/ICE5.html#setting-up",
    "title": "In-class Exercise 5",
    "section": "1.1 Setting Up",
    "text": "1.1 Setting Up\n\n1.1.1 Installing and Loading Packages\n\npacman::p_load(sf, tidyverse, tmap, sfdep)\n\n\n\n1.1.2 Importing Data\n\nTaiwan CRS: 3829\n\n\nstudyArea <- st_read(\n  dsn = \"data\",\n  layer = \"study_area\"\n) %>%\n  st_transform(crs = 3829)\n\nReading layer `study_area' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE5\\data' using driver `ESRI Shapefile'\nSimple feature collection with 7 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 121.4836 ymin: 25.00776 xmax: 121.592 ymax: 25.09288\nGeodetic CRS:  TWD97\n\n\n\nstores <- st_read(\n  dsn = \"data\",\n  layer = \"stores\"\n) %>%\n  st_transform(crs = 3829)\n\nReading layer `stores' from data source `D:\\bellekwang\\IS415\\inclass_ex\\ICE5\\data' using driver `ESRI Shapefile'\nSimple feature collection with 1409 features and 4 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 121.4902 ymin: 25.01257 xmax: 121.5874 ymax: 25.08557\nGeodetic CRS:  TWD97\n\n\n\nstudyArea is a POLYGON sf dataframe with 7 features\nstores is a POINT sf dataframe with 1409 features"
  },
  {
    "objectID": "inclass_ex/ICE5/ICE5.html#data-visualisation",
    "href": "inclass_ex/ICE5/ICE5.html#data-visualisation",
    "title": "In-class Exercise 5",
    "section": "1.2 Data Visualisation",
    "text": "1.2 Data Visualisation\n\ntmap_mode(\"view\")\ntm_shape(studyArea) + #plot polygon before point/line\n  tm_polygons() +\ntm_shape(stores) +\n  tm_dots(\n    col = \"Name\",\n    size = 0.01,\n    border.col = \"black\",\n    border.lwd = 0.5\n  ) +\n  tm_view(set.zoom.limits = c(12,16))"
  },
  {
    "objectID": "inclass_ex/ICE5/ICE5.html#local-colocation-quotient-lclq",
    "href": "inclass_ex/ICE5/ICE5.html#local-colocation-quotient-lclq",
    "title": "In-class Exercise 5",
    "section": "1.3 Local Colocation Quotient (LCLQ)",
    "text": "1.3 Local Colocation Quotient (LCLQ)\nlocal_colocation(A, B, nb, wt, nsim)\n\nnb: neighbour list\nwt: kernel to use\nnsim: number of simulations run\n\n\n1.3.1 Calculate Neighbour List\nSearch for the 6 nearest neightbour\n\nincludes self: total of 7 points, will not get a LCLQ of 1\n\n\nnb <- include_self(st_knn(st_geometry(stores), 6))\n\n\nglimpse(nb)\n\nList of 1409\n $ : int [1:7] 1 260 273 395 468 693 735\n $ : int [1:7] 2 28 344 389 392 626 742\n $ : int [1:7] 3 496 714 722 873 1148 1372\n $ : int [1:7] 4 362 391 678 951 1184 1330\n $ : int [1:7] 5 30 136 351 726 761 915\n $ : int [1:7] 6 40 285 316 431 708 1255\n $ : int [1:7] 7 284 376 695 842 850 1062\n $ : int [1:7] 8 13 533 574 597 647 1169\n $ : int [1:7] 9 503 544 818 1152 1214 1322\n $ : int [1:7] 10 357 499 533 598 716 1336\n $ : int [1:7] 11 35 48 259 419 569 1228\n $ : int [1:7] 12 38 412 602 620 622 1164\n $ : int [1:7] 13 464 482 574 597 647 894\n $ : int [1:7] 14 502 655 727 905 1143 1245\n $ : int [1:7] 15 33 78 387 399 414 1361\n $ : int [1:7] 16 166 511 674 1157 1237 1346\n $ : int [1:7] 17 240 456 667 878 960 1137\n $ : int [1:7] 18 157 237 316 1192 1312 1320\n $ : int [1:7] 19 195 338 508 530 740 1059\n $ : int [1:7] 20 58 153 560 578 756 1127\n $ : int [1:7] 21 97 673 833 883 1032 1249\n $ : int [1:7] 22 621 709 865 978 1060 1313\n $ : int [1:7] 23 59 902 931 1136 1166 1176\n $ : int [1:7] 24 210 501 624 631 1135 1161\n $ : int [1:7] 25 186 584 676 734 987 1285\n $ : int [1:7] 26 130 192 768 817 838 1151\n $ : int [1:7] 27 256 387 694 882 1050 1389\n $ : int [1:7] 2 28 344 389 626 742 919\n $ : int [1:7] 29 63 235 771 834 1025 1370\n $ : int [1:7] 5 30 136 351 726 761 915\n $ : int [1:7] 31 61 93 177 386 484 864\n $ : int [1:7] 32 406 448 486 772 938 1409\n $ : int [1:7] 15 33 78 387 399 414 1361\n $ : int [1:7] 34 115 330 546 586 1054 1357\n $ : int [1:7] 11 35 48 253 994 1228 1256\n $ : int [1:7] 36 333 837 1240 1304 1306 1342\n $ : int [1:7] 37 230 253 424 940 994 1095\n $ : int [1:7] 38 602 620 622 906 1164 1353\n $ : int [1:7] 39 384 857 888 1037 1155 1404\n $ : int [1:7] 6 40 285 316 431 708 1255\n $ : int [1:7] 41 279 377 618 701 1337 1374\n $ : int [1:7] 42 198 526 566 1007 1121 1238\n $ : int [1:7] 43 67 234 759 819 829 1035\n $ : int [1:7] 44 264 529 858 930 1084 1253\n $ : int [1:7] 16 45 145 166 327 511 1346\n $ : int [1:7] 30 46 915 1105 1106 1349 1380\n $ : int [1:7] 47 55 324 641 738 861 1124\n $ : int [1:7] 11 48 259 419 569 806 1228\n $ : int [1:7] 49 168 249 341 427 579 975\n $ : int [1:7] 50 205 435 527 570 866 1201\n $ : int [1:7] 51 181 185 394 826 985 1328\n $ : int [1:7] 52 81 633 781 800 830 928\n $ : int [1:7] 53 214 368 383 398 791 1123\n $ : int [1:7] 9 54 137 271 688 818 1214\n $ : int [1:7] 47 55 326 641 645 738 861\n $ : int [1:7] 56 228 318 361 839 1020 1025\n $ : int [1:7] 57 124 766 1027 1078 1296 1382\n $ : int [1:7] 20 58 96 560 578 756 1127\n $ : int [1:7] 23 59 605 902 931 1120 1136\n $ : int [1:7] 60 339 446 467 643 966 1047\n $ : int [1:7] 31 61 363 386 689 969 1251\n $ : int [1:7] 62 487 608 786 794 908 1235\n $ : int [1:7] 29 63 228 771 834 1025 1370\n $ : int [1:7] 38 64 602 906 976 1268 1353\n $ : int [1:7] 65 215 401 412 1220 1239 1375\n $ : int [1:7] 66 277 313 391 678 907 951\n $ : int [1:7] 67 234 335 741 819 829 1035\n $ : int [1:7] 68 256 456 872 882 933 964\n $ : int [1:7] 69 509 697 703 1031 1242 1335\n $ : int [1:7] 70 87 204 382 514 1338 1396\n $ : int [1:7] 71 140 328 947 988 1079 1339\n $ : int [1:7] 72 198 434 505 564 860 1007\n $ : int [1:7] 59 73 607 931 1023 1212 1308\n $ : int [1:7] 74 381 472 555 610 670 1222\n $ : int [1:7] 42 75 404 566 777 1071 1238\n $ : int [1:7] 76 225 264 390 858 1084 1253\n $ : int [1:7] 77 98 245 378 1065 1261 1262\n $ : int [1:7] 15 33 78 1110 1113 1361 1389\n $ : int [1:7] 79 214 295 383 657 1003 1343\n $ : int [1:7] 80 324 364 417 738 1124 1333\n $ : int [1:7] 81 174 438 800 830 928 1300\n $ : int [1:7] 82 336 459 733 974 1160 1273\n $ : int [1:7] 83 450 624 680 823 1070 1340\n $ : int [1:7] 84 173 265 601 923 1061 1089\n $ : int [1:7] 85 724 780 796 878 1117 1350\n $ : int [1:7] 86 104 467 654 655 904 1143\n $ : int [1:7] 70 87 299 382 514 705 1049\n $ : int [1:7] 88 105 411 478 576 732 895\n $ : int [1:7] 89 190 397 642 752 793 868\n $ : int [1:7] 90 215 401 441 630 879 925\n $ : int [1:7] 91 108 300 402 603 936 1234\n $ : int [1:7] 92 531 675 993 1078 1282 1354\n $ : int [1:7] 93 167 177 202 864 1055 1264\n $ : int [1:7] 94 269 553 619 828 885 1100\n $ : int [1:7] 95 176 224 803 1001 1388 1399\n $ : int [1:7] 20 58 96 560 578 756 1127\n $ : int [1:7] 21 97 455 673 833 1032 1249\n $ : int [1:7] 77 98 245 378 1065 1261 1262\n $ : int [1:7] 99 196 221 736 1098 1291 1292\n  [list output truncated]\n - attr(*, \"region.id\")= chr [1:1409] \"1\" \"2\" \"3\" \"4\" ...\n - attr(*, \"call\")= language spdep::knearneigh(x = pnts, k = k)\n - attr(*, \"sym\")= logi FALSE\n - attr(*, \"type\")= chr \"knn\"\n - attr(*, \"knn-k\")= num 6\n - attr(*, \"class\")= chr [1:2] \"nb\" \"list\"\n - attr(*, \"self.included\")= logi TRUE\n\n\n\nnb: list of 1409 x 7 points (1 self point + 6 neighbour points)\n\n\n\n1.3.2 Calculate Weight Matrix\n\nwt <- st_kernel_weights(\n  nb,\n  stores,\n  \"gaussian\",\n  adaptive = TRUE\n)\n\n\nConvert all nb into a weight matrix: list of 1409 x distance weight\nNearer the target, higher the weight\n\n\n\n1.3.3 Assigning A and B\n\nFamilyMart <- stores %>%\n  filter(Name == \"Family Mart\")\nA <- FamilyMart$Name\n\nSevenEleven <- stores %>%\n  filter(Name == \"7-Eleven\")\nB <- SevenEleven$Name\n\n\n\n1.3.4 Calculate LCLQ\n\nLCLQ <- local_colocation(A, B, nb, wt, 49)\n\n\nA: target, B: neighbour\n\n\n\n1.3.5 Visualising LCLQ\nCombine the LCLQ back to the geometry.\n\ncannot do relational joint because LCLQ has no unique identifier (left/right join)\ncbind only works if you don’t sort LCLQ: sequence needs to remain the same\nLHS: needs to be the geometry (inherit LHS)\n\n\nLCLQ_stores <- cbind(stores, LCLQ)\n\nPlot out LCLQ\n\ntmap_mode(\"view\")\ntm_shape(studyArea) + #plot polygon before point/line\n  tm_polygons() +\ntm_shape(LCLQ_stores) +\n  tm_dots(\n    col = \"X7.Eleven\",\n    size = 0.01,\n    border.col = \"black\",\n    border.lwd = 0.5\n  ) +\n  tm_view(set.zoom.limits = c(12,16))\n\n\n\n\n\n\n\ncan see which points are colocated/isolated\np-values = 0.999, colocated but not significant"
  },
  {
    "objectID": "inclass_ex/ICE5/data/stores.html",
    "href": "inclass_ex/ICE5/data/stores.html",
    "title": "IS415",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     \n\n\n        0 0     false"
  },
  {
    "objectID": "inclass_ex/ICE5/data/study_area.html",
    "href": "inclass_ex/ICE5/data/study_area.html",
    "title": "IS415",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#wpdx-dataset",
    "href": "take_home_ex/THE1/THE1.html#wpdx-dataset",
    "title": "Take Home Exercise 1",
    "section": "2.2 WPdx+ Dataset",
    "text": "2.2 WPdx+ Dataset\n\n2.2.1 Import Data\nFrom the aspatial data folder, import the WPdx csv file. Using the filter() function, get the Osun State data.\n\nwp_nga_osun <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#adm1` == \"Osun\")\n\n\nhead(wp_nga_osun, n = 5)\n\n# A tibble: 5 × 74\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n# … with 64 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\n\n2.2.2 Creating sf Dataframe and Projection\n\nConvert wp_nga_osun into sf data.frame using st_as_sfc()\n\n\nwp_nga_osun$Geometry = st_as_sfc(wp_nga_osun$`New Georeferenced Column`)\nhead(wp_nga_osun)\n\n# A tibble: 6 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n6 235508 Federa…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\nConvert tibble data.frame into sf object using st_sf(), including the correct Nigeria coordinate system, 26392.\n\n\nwp_sf <- st_sf(wp_nga_osun, crs = 4326) %>%\n  st_transform(crs = 26392)\nhead(wp_sf)\n\nSimple feature collection with 6 features and 74 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 202548.3 ymin: 350391.9 xmax: 254470 ymax: 435793.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 6 × 75\n  row_id #sour…¹ #lat_…² #lon_…³ #repo…⁴ #stat…⁵ #wate…⁶ #wate…⁷ #wate…⁸ #wate…⁹\n   <dbl> <chr>     <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>  \n1 225950 Federa…    7.43    4.26 05/05/… Yes     Boreho… Well    Hand P… Hand P…\n2 225524 Federa…    7.78    4.56 04/22/… Yes     Protec… Well    Hand P… Hand P…\n3 197014 Federa…    7.49    4.53 04/30/… Yes     Boreho… Well    Mechan… Mechan…\n4 225173 Federa…    7.93    4.73 05/02/… Yes     Boreho… Well    Hand P… Hand P…\n5 225843 Federa…    7.74    4.44 05/08/… Yes     Boreho… Well    Hand P… Hand P…\n6 235508 Federa…    7.15    4.64 04/27/… Yes     Protec… Well    Hand P… Hand P…\n# … with 65 more variables: `#facility_type` <chr>,\n#   `#clean_country_name` <chr>, `#clean_adm1` <chr>, `#clean_adm2` <chr>,\n#   `#clean_adm3` <chr>, `#clean_adm4` <chr>, `#install_year` <dbl>,\n#   `#installer` <chr>, `#rehab_year` <lgl>, `#rehabilitator` <lgl>,\n#   `#management_clean` <chr>, `#status_clean` <chr>, `#pay` <chr>,\n#   `#fecal_coliform_presence` <chr>, `#fecal_coliform_value` <dbl>,\n#   `#subjective_quality` <chr>, `#activity_id` <chr>, `#scheme_id` <chr>, …\n\n\n\nCheck that the EPSG is correct\n\n\nst_crs(wp_sf)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\n\nUse st_geometry() to understand the sf dataframe\n\n\nst_geometry(wp_sf)\n\nGeometry set for 5059 features \nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 182486.3 ymin: 340054.1 xmax: 291546.1 ymax: 452045.5\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:\n\n\n\nwp_sf contains 5059 points"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#nigeria-administrative-boundaries-level-2",
    "href": "take_home_ex/THE1/THE1.html#nigeria-administrative-boundaries-level-2",
    "title": "Take Home Exercise 1",
    "section": "2.3 Nigeria Administrative Boundaries Level 2",
    "text": "2.3 Nigeria Administrative Boundaries Level 2\n\n2.3.1 Import Data\nTo import a shapefile, use st_read() where dsn is the targeted directory and layer is the name of the files.\n\nnga <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"nga_polnda_adm2_1m_salb\"\n)\n\nReading layer `nga_polnda_adm2_1m_salb' from data source \n  `D:\\bellekwang\\IS415\\take_home_ex\\THE1\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 773 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668432 ymin: 4.277144 xmax: 14.67808 ymax: 13.90103\nGeodetic CRS:  WGS 84\n\n\n\nnga is a MULTIPOLYGON sf dataframe with 1685 features is imported.\n\n\n\n2.3.2 Projection\nThe geodetic CRS is wrong. Using st_transform(), change the CRS from WGS84 to Minna / Nigeria Mid Belt (26392)\n\nnga <- st_transform(nga, crs = 26392)\nst_crs(nga)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\nTo better understand the data, use st_geometry() on the sf dataframe:\n\nst_geometry(nga)\n\nGeometry set for 773 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 26650.44 ymin: 30984.34 xmax: 1344058 ymax: 1096748\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#geoboundaries",
    "href": "take_home_ex/THE1/THE1.html#geoboundaries",
    "title": "Take Home Exercise 1",
    "section": "2.4 geoBoundaries",
    "text": "2.4 geoBoundaries\n\n2.4.1 Import Data\nSimilarly to the previous dataset, this dataset is in the form of a shapefile. geoNga is a MULTIPOLYGON sf data frame with 774 features.\n\ngeoNga <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"geoBoundaries-NGA-ADM2\"\n)\n\nReading layer `geoBoundaries-NGA-ADM2' from data source \n  `D:\\bellekwang\\IS415\\take_home_ex\\THE1\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 5 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\n\n2.4.2 Projection\nSimilarly, use st_transform() to change to the correct CRS.\n\ngeoNga <- st_transform(geoNga, crs = 26392)\nst_crs(geoNga)\n\nCoordinate Reference System:\n  User input: EPSG:26392 \n  wkt:\nPROJCRS[\"Minna / Nigeria Mid Belt\",\n    BASEGEOGCRS[\"Minna\",\n        DATUM[\"Minna\",\n            ELLIPSOID[\"Clarke 1880 (RGS)\",6378249.145,293.465,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4263]],\n    CONVERSION[\"Nigeria Mid Belt\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",4,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",8.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.99975,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",670553.98,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",0,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Engineering survey, topographic mapping.\"],\n        AREA[\"Nigeria between 6°30'E and 10°30'E, onshore and offshore shelf.\"],\n        BBOX[3.57,6.5,13.53,10.51]],\n    ID[\"EPSG\",26392]]\n\n\nTo understand this dataset better:\n\nst_geometry(geoNga)\n\nGeometry set for 774 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 26662.71 ymin: 30523.38 xmax: 1344157 ymax: 1096029\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#geonga",
    "href": "take_home_ex/THE1/THE1.html#geonga",
    "title": "Take Home Exercise 1",
    "section": "3.1 geoNga",
    "text": "3.1 geoNga\nThere are 30 LGAs in Osun state:\nAiyedaade, Aiyedire, Atakunmosa East, Atakunmosa West, Boluwaduro, Boripe, Ede North, Ede South, Egbedore, Ejigbo, Ife Central, Ife East, Ife North, Ife South, Ifedayo, Ifelodun, Ila, Ilesa East, Ilesa West, Irepodun, Irewole, Isokan, Iwo, Obokun, Odo Otin, Ola Oluwa, Olorunda, Oriade, Orolu, Osogbo\n(source: Local Government Areas in Osun State - Nigeria Postcode)\n\ngeoNga_osun <- geoNga %>%\n  filter(\n    `shapeName` %in%\n      c(\n        \"Aiyedaade\", \"Aiyedire\", \"Atakunmosa East\", \"Atakunmosa West\", \"Boluwaduro\", \"Boripe\", \"Ede North\", \"Ede South\", \"Egbedore\", \"Ejigbo\", \"Ife Central\", \"Ife East\", \"Ife North\", \"Ife South\", \"Ifedayo\", \"Ifelodun\", \"Ila\", \"Ilesa East\", \"Ilesa West\", \"Irepodun\", \"Irewole\", \"Isokan\", \"Iwo\", \"Obokun\", \"Odo Otin\", \"Ola Oluwa\", \"Olorunda\", \"Oriade\", \"Orolu\", \"Osogbo\"\n      )\n  )\n\n\nst_geometry(geoNga_osun)\n\nGeometry set for 25 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 176503.2 ymin: 331434.7 xmax: 334326.1 ymax: 561081.8\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:\n\n\nThere are only 25 features in geoNga_osun data frame, there are 5 missing areas not accounted for."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#nga",
    "href": "take_home_ex/THE1/THE1.html#nga",
    "title": "Take Home Exercise 1",
    "section": "3.2 nga",
    "text": "3.2 nga\nFor the nga data frame, Osun state areas can easily be filtered out through the column “ADM1_NAME”.\n\nnga_osun <- nga %>%\n  filter(`ADM1_NAME` == \"Osun\")\n\n\nst_geometry(nga_osun)\n\nGeometry set for 30 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 179634.5 ymin: 331434.7 xmax: 291043.8 ymax: 454520.1\nProjected CRS: Minna / Nigeria Mid Belt\nFirst 5 geometries:\n\n\nnga_osun has all the 30 LGAs thus I will be using this data frame instead of the one from geoBoundaries."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#wp_sf",
    "href": "take_home_ex/THE1/THE1.html#wp_sf",
    "title": "Take Home Exercise 1",
    "section": "3.3 wp_sf",
    "text": "3.3 wp_sf\n\n3.3.1 Understanding the Water Point Categories\nFirst, use unique() to understand the categories under the “#status_clean” column.\n\nunique(wp_sf$`#status_clean`)\n\n[1] \"Functional\"                \"Functional, needs repair\" \n[3] \"Abandoned/Decommissioned\"  \"Functional, not in use\"   \n[5] \"Functional but not in use\" \"Non-Functional\"           \n[7] \"Non-Functional, dry\"      \n\n\nCheck for any NA values in the “#status_clean” column\n\nsum(is.na(wp_sf$`#status_clean`))\n\n[1] 0\n\n\n\n\n3.3.2 Formatting the Water Point Categories\nSimplify the categories into 2 main categories: Functional and Non-functional:\n\nFunctional: “Functional”, “Functional, needs repair”, “Functional, not in use”, “Functional but not in use”\nNon-functional: “Non-Functional”, “Non-Functional, dry”, “Abandoned/Decommisioned”\n\nUse the filter() function to extract functional and non-functional water points.\n\nwp_functional <- wp_sf %>%\n  filter(\n    `#status_clean` %in%\n      c(\n        \"Functional\",\n        \"Functional, needs repair\",\n        \"Functional, not in use\",\n        \"Functional but not in use\"\n      )\n  )\n\n\nwp_nonfunctional <- wp_sf %>%\n  filter(\n    `#status_clean` %in%\n      c(\n        \"Non-Functional\",\n        \"Non-Functional, dry\",\n        \"Abandoned/Decommissioned\"\n      )\n  )"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#conversion-to-spatial-pointpolygon-data-frames",
    "href": "take_home_ex/THE1/THE1.html#conversion-to-spatial-pointpolygon-data-frames",
    "title": "Take Home Exercise 1",
    "section": "3.4 Conversion to Spatial Point/Polygon Data Frames",
    "text": "3.4 Conversion to Spatial Point/Polygon Data Frames\nTo do the analysis in further sections, we need to first convert our data frames to the right form.\nFirst, convert the simple feature data frames into spatial points and polygon data frames.\n\nnga_osun_temp <- as_Spatial(nga_osun)\nwp_functional_temp <- as_Spatial(wp_functional)\nwp_nonfunctional_temp <- as_Spatial(wp_nonfunctional)\n\n\nnga_osun_temp\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 30 \nextent      : 179634.5, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 12\nnames       : CNTRY_NAME, CNTRY_CODE, ADM1_NAME, ADM1_CODE, ADM2_NAME, ADM2_CODE,   HRname,  HRpcode, HRparent,     Shape_Leng,      Shape_Area, ADM2_New \nmin values  :    Nigeria,        NGA,      Osun,    NGA030,  Aiyedade, NGA030001, Aiyedade, NG030001,    NG030, 0.312900819551, 0.0038013876587, Aiyedade \nmax values  :    Nigeria,        NGA,      Osun,    NGA030,    Osogbo, NGA030030,   Osogbo, NG030030,    NG030,  2.12133368798, 0.0907164277969,   Osogbo \n\n\n\nwp_functional_temp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 2797 \nextent      : 182486.3, 291495.7, 342491.7, 452045.5  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 74\nnames       : row_id,                                     X.source, X.lat_deg, X.lon_deg,          X.report_date, X.status_id,    X.water_source_clean, X.water_source_category,      X.water_tech_clean, X.water_tech_category, X.facility_type, X.clean_country_name, X.clean_adm1, X.clean_adm2, X.clean_adm3, ... \nmin values  : 184164, Federal Ministry of Water Resources, Nigeria, 7.0791641, 4.0771867, 01/01/2010 12:00:00 AM,     Unknown,                Borehole,                  Spring,               Hand Pump,             Hand Pump,        Improved,              Nigeria,        Ekiti,     Aiyedade,           NA, ... \nmax values  : 683844,                                        GRID3,   8.07116, 5.0617267, 08/29/2018 12:00:00 AM,         Yes, Undefined Hand Dug Well,                    Well, Mechanized Pump - Solar,       Mechanized Pump,        Improved,              Nigeria,          Oyo,     Surulere,           NA, ... \n\n\n\nwp_nonfunctional_temp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 2262 \nextent      : 182502.4, 291546.1, 340054.1, 451013.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 74\nnames       : row_id,                                     X.source, X.lat_deg, X.lon_deg,          X.report_date, X.status_id,    X.water_source_clean, X.water_source_category,      X.water_tech_clean, X.water_tech_category, X.facility_type, X.clean_country_name, X.clean_adm1, X.clean_adm2, X.clean_adm3, ... \nmin values  : 183489, Federal Ministry of Water Resources, Nigeria,  7.060309, 4.0773333, 04/22/2015 12:00:00 AM,          No,                Borehole,                  Spring,               Hand Pump,             Hand Pump,        Improved,              Nigeria,        Kwara,     Aiyedade,           NA, ... \nmax values  : 475147,                                        GRID3, 8.0618417, 5.0621867, 08/29/2018 12:00:00 AM,     Unknown, Undefined Hand Dug Well,                    Well, Mechanized Pump - Solar,       Mechanized Pump,        Improved,              Nigeria,          Oyo,     Surulere,           NA, ..."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#conversion-from-spatial-classes-to-objects",
    "href": "take_home_ex/THE1/THE1.html#conversion-from-spatial-classes-to-objects",
    "title": "Take Home Exercise 1",
    "section": "3.5 Conversion from Spatial Classes to Objects",
    "text": "3.5 Conversion from Spatial Classes to Objects\nNext, we convert the data frames from spatial classes to objects using the as() function.\n\nnga_osun_sp <- as(nga_osun_temp, \"SpatialPolygons\")\nwp_functional_sp <- as(wp_functional_temp, \"SpatialPoints\")\nwp_nonfunctional_sp <- as(wp_nonfunctional_temp, \"SpatialPoints\")\n\n\nnga_osun_sp\n\nclass       : SpatialPolygons \nfeatures    : 30 \nextent      : 179634.5, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \n\n\n\nwp_functional_sp\n\nclass       : SpatialPoints \nfeatures    : 2797 \nextent      : 182486.3, 291495.7, 342491.7, 452045.5  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \n\n\n\nwp_nonfunctional_sp\n\nclass       : SpatialPoints \nfeatures    : 2262 \nextent      : 182502.4, 291546.1, 340054.1, 451013.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#conversion-from-spatial-object-to-ppp-format",
    "href": "take_home_ex/THE1/THE1.html#conversion-from-spatial-object-to-ppp-format",
    "title": "Take Home Exercise 1",
    "section": "3.6 Conversion from Spatial Object to ppp Format",
    "text": "3.6 Conversion from Spatial Object to ppp Format\nUsing the spatstat package, convert both functional and non-functional water points to the ppp format.\n\nwp_functional_ppp <- as(wp_functional_sp, \"ppp\")\nwp_nonfunctional_ppp <- as(wp_nonfunctional_sp, \"ppp\")\n\n\nsummary(wp_functional_ppp)\n\nPlanar point pattern:  2797 points\nAverage intensity 2.342078e-07 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: rectangle = [182486.3, 291495.68] x [342491.7, 452045.5] units\n                    (109000 x 109600 units)\nWindow area = 11942400000 square units\n\n\n\nsummary(wp_nonfunctional_ppp)\n\nPlanar point pattern:  2262 points\nAverage intensity 1.869518e-07 points per square unit\n\nCoordinates are given to 2 decimal places\ni.e. rounded to the nearest multiple of 0.01 units\n\nWindow: rectangle = [182502.44, 291546.08] x [340054.1, 451013.1] units\n                    (109000 x 111000 units)\nWindow area = 12099400000 square units"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#jittering-any-duplicate-points",
    "href": "take_home_ex/THE1/THE1.html#jittering-any-duplicate-points",
    "title": "Take Home Exercise 1",
    "section": "3.7 Jittering Any Duplicate Points",
    "text": "3.7 Jittering Any Duplicate Points\n\nany(duplicated(wp_functional_ppp))\n\n[1] FALSE\n\n\n\nany(duplicated(wp_nonfunctional_ppp))\n\n[1] FALSE\n\n\nSince there are no duplicate points, there is no need for jittering."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#creating-owin-object",
    "href": "take_home_ex/THE1/THE1.html#creating-owin-object",
    "title": "Take Home Exercise 1",
    "section": "3.8 Creating owin Object",
    "text": "3.8 Creating owin Object\nUsing the nga_osun_sp, create an owin object with the as() function.\n\nnga_osun_owin <- as(nga_osun_sp, \"owin\")\n\n\nplot(nga_osun_owin)"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#combining-point-events-object-and-owin-object",
    "href": "take_home_ex/THE1/THE1.html#combining-point-events-object-and-owin-object",
    "title": "Take Home Exercise 1",
    "section": "3.9 Combining Point Events Object and owin Object",
    "text": "3.9 Combining Point Events Object and owin Object\nFirst, combine the functional water points with the owin object.\n\nwp_functional_nga_osun_ppp = wp_functional_ppp[nga_osun_owin]\n\n\nplot(wp_functional_nga_osun_ppp)\n\n\n\n\nNext, combine the non-functional water points with the owin object.\n\nwp_nonfunctional_nga_osun_ppp = wp_nonfunctional_ppp[nga_osun_owin]\n\n\nplot(wp_nonfunctional_nga_osun_ppp)\n\n\n\n\nNow that all the data has been prepared, we can move on to the analysis."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#kernel-density-maps-of-functional-and-non-functional-water-points",
    "href": "take_home_ex/THE1/THE1.html#kernel-density-maps-of-functional-and-non-functional-water-points",
    "title": "Take Home Exercise 1",
    "section": "4.1 Kernel Density Maps of Functional and Non-functional Water Points",
    "text": "4.1 Kernel Density Maps of Functional and Non-functional Water Points\nI will first re-scale all the KDE values from meter to kilometer using the rescale() function.\n\nwp_functional_nga_osun_ppp.km <- rescale(wp_functional_nga_osun_ppp, 1000, \"km\")\nwp_nonfunctional_nga_osun_ppp.km <- rescale(wp_nonfunctional_nga_osun_ppp, 1000, \"km\")\n\n\n4.1.1 Comparing Algorithms\nI will then try out various algorithms to see which has the best output.\n\npar(mfrow = c(1,2))\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.diggle,\n    edge = TRUE,\n    kernel = \"gaussian\"\n  ), main = \"Diggle, Gaussian\")\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.diggle,\n    edge = TRUE,\n    kernel = \"epanechnikov\"\n  ), main = \"Diggle, Epanechnikov\")\n\n\n\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.diggle,\n    edge = TRUE,\n    kernel = \"quartic\"\n  ), main = \"Diggle, Quartic\")\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.diggle,\n    edge = TRUE,\n    kernel = \"disc\"\n  ), main = \"Diggle, disc\")\n\n\n\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.ppl,\n    edge = TRUE,\n    kernel = \"gaussian\"\n  ), main = \"ppl, Gaussian\")\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.ppl,\n    edge = TRUE,\n    kernel = \"epanechnikov\"\n  ), main = \"ppl, Epanechnikov\")\n\n\n\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.ppl,\n    edge = TRUE,\n    kernel = \"quartic\"\n  ), main = \"ppl, Quartic\")\nplot(density(\n    wp_functional_nga_osun_ppp.km,\n    sigma = bw.ppl,\n    edge = TRUE,\n    kernel = \"disc\"\n  ), main = \"ppl, disc\")\n\n\n\n\nAs seen from the maps above, using the bw.ppl sigma works significantly better than bw.diggle.\n\nbw.ppl(wp_functional_nga_osun_ppp.km)\n\n    sigma \n0.6040003 \n\n\nI will use a fixed sigma of 0.6 from here onward.\n\nkde_wp_functional_nga_osun_bw <- density(\n  wp_functional_nga_osun_ppp.km,\n  sigma = 0.6,\n  edge = TRUE,\n  kernel = \"quartic\"\n)\nkde_wp_nonfunctional_nga_osun_bw <- density(\n  wp_nonfunctional_nga_osun_ppp.km,\n  sigma = 0.6,\n  edge = TRUE,\n  kernel = \"quartic\"\n)\n\n\n\n4.1.2 Functional Water Points KDE Map\n\ngridded_kde_wp_functional_nga_osun_bw <- as.SpatialGridDataFrame.im(kde_wp_functional_nga_osun_bw)\nspplot(gridded_kde_wp_functional_nga_osun_bw)\n\n\n\n\n\n\n4.1.3 Non-functional Water Points KDE Map\n\ngridded_kde_wp_nonfunctional_nga_osun_bw <- as.SpatialGridDataFrame.im(kde_wp_nonfunctional_nga_osun_bw)\nspplot(gridded_kde_wp_nonfunctional_nga_osun_bw)"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#kde-map-on-openstreetmap",
    "href": "take_home_ex/THE1/THE1.html#kde-map-on-openstreetmap",
    "title": "Take Home Exercise 1",
    "section": "4.2 KDE Map on Openstreetmap",
    "text": "4.2 KDE Map on Openstreetmap\nFirst, the grid output needs to be converted into a raster layer for visualisation, using the raster() function.\n\nkde_wp_functional_nga_osun_bw_raster <- raster(kde_wp_functional_nga_osun_bw)\nkde_wp_nonfunctional_nga_osun_bw_raster <- raster(kde_wp_nonfunctional_nga_osun_bw)\n\nCheck if there is missing CRS\n\nkde_wp_functional_nga_osun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8703851, 0.9616047  (x, y)\nextent     : 179.6345, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : layer \nvalues     : -2.340835e-15, 15.21075  (min, max)\n\n\n\nkde_wp_nonfunctional_nga_osun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8703851, 0.9616047  (x, y)\nextent     : 179.6345, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : layer \nvalues     : -2.297349e-15, 13.38929  (min, max)\n\n\nAssign the projection systems into the raster layers using the CRS() function.\n\nprojection(kde_wp_functional_nga_osun_bw_raster) <- CRS(\"+init=EPSG:26392\")\nkde_wp_functional_nga_osun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8703851, 0.9616047  (x, y)\nextent     : 179.6345, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +init=EPSG:26392 \nsource     : memory\nnames      : layer \nvalues     : -2.340835e-15, 15.21075  (min, max)\n\n\n\nprojection(kde_wp_nonfunctional_nga_osun_bw_raster) <- CRS(\"+init=EPSG:26392\")\nkde_wp_nonfunctional_nga_osun_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8703851, 0.9616047  (x, y)\nextent     : 179.6345, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +init=EPSG:26392 \nsource     : memory\nnames      : layer \nvalues     : -2.297349e-15, 13.38929  (min, max)\n\n\n\n4.2.1 Functional Water Points\n\ntmap_mode(\"view\")\ntm_shape(kde_wp_functional_nga_osun_bw_raster) +\n  tm_raster() +\n  tm_view(set.zoom.limits = c(18,20))\n\n\n\n\n\n\n\n4.2.2 Non-functional Water Points\n\ntmap_mode(\"view\")\ntm_shape(kde_wp_nonfunctional_nga_osun_bw_raster) +\n  tm_raster() +\n  tm_view(set.zoom.limits = c(18,20))"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#conclusion",
    "href": "take_home_ex/THE1/THE1.html#conclusion",
    "title": "Take Home Exercise 1",
    "section": "4.3 Conclusion",
    "text": "4.3 Conclusion\n\n4.3.1 Spatial Patterns\nBoth functional and non-functional water points are generally evenly spread out all over the Osun state.\nBased on the maps above, there are more dense spots for non-functional water points as compared to functional water points.\nMost of the denser spots for both functional and non-functional water points are located on the upper half of the Osun state.\n\n\n4.3.2 Advantage of Kernel Density Map\nWhen plotting a point map, multiple points may overlap over each other especially when the map is zoomed out. If there are too many points all over the map, it will be difficult to tell which area has more points as compared to other areas.\nWhereas the Kernel Density map shows the density by colour and will not clutter up the map with points. It makes analysis of density significantly easier to identify."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#test-hypothesis-1",
    "href": "take_home_ex/THE1/THE1.html#test-hypothesis-1",
    "title": "Take Home Exercise 1",
    "section": "5.1 Test Hypothesis 1",
    "text": "5.1 Test Hypothesis 1\nH0 = The distribution of functional water points are randomly distributed.\nH1 = The distribution of functional water points are not randomly distributed.\nConfidence Interval = 95%\n\n5.1.1 Rationale for Tests\nI will be using 3 tests: Clark-Evans Test, G-function and L-function.\n\nClark-Evans Test\nG-function: Understand how spaced apart the events are in a point pattern\nL-function: Adjusted version of K-function, easier to distinguish the level of significance\n\nNOTE: was not able to run L-function test, R studio hangs everytime I try to run it.\n\n\n\n\n5.1.2 Nearest Neighbour Index (Clark-Evans Test)\n\nclarkevans.test(wp_functional_nga_osun_ppp,\n                correction=\"none\",\n                clipregion=\"nga_osun_owin\",\n                alternative=c(\"clustered\"),\n                nsim=99)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 99 simulations of CSR with fixed n\n\ndata:  wp_functional_nga_osun_ppp\nR = 0.42804, p-value = 0.01\nalternative hypothesis: clustered (R < 1)\n\n\n\nSince p-value is 0.01 which is smaller than 0.05, the null hypothesis is rejected.\nSince the R-value is 0.428 (3 d.p.) < 1, the pattern exhibits clustering\n\nConclusion: Based on the Clark-Evans test, the distribution of functional water points are not randomly distributed.\n\n\n5.1.3 G-Function\n\nGest(x): Estimates the nearest neighbour distance distribution function from a point pattern in a window of arbitrary shape\n\n\nG_F = Gest(wp_functional_nga_osun_ppp, correction = \"border\")\nplot(G_F, xlim = c(0, 500))\n\n\n\n\n\nenvelope(x): if p-value < alpha-value (0.001), then null hypothesis is rejected\n\n\nG_F.csr <- envelope(wp_functional_nga_osun_ppp, Gest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10 [etd 2:05] .........20 [etd 1:44] .........\n30 [etd 1:33] .........40 [etd 1:29] .........50 [etd 1:23] ........\n.60 [etd 1:21] .........70 [etd 1:20] .........80 [etd 1:20] .......\n..90 [etd 1:19] .........100 [etd 1:17] .........110 [etd 1:16] ......\n...120 [etd 1:15] .........130 [etd 1:14] .........140 [etd 1:13] .....\n....150 [etd 1:12] .........160 [etd 1:11] .........170 [etd 1:10] ....\n.....180 [etd 1:09] .........190 [etd 1:08] .........200 [etd 1:07] ...\n......210 [etd 1:06] .........220 [etd 1:05] .........230 [etd 1:04] ..\n.......240 [etd 1:03] .........250 [etd 1:02] .........260 [etd 1:01] .\n........270 [etd 1:00] .........280 [etd 59 sec] .........290\n [etd 58 sec] .........300 [etd 58 sec] .........310 [etd 57 sec] .........\n320 [etd 56 sec] .........330 [etd 56 sec] .........340 [etd 55 sec] ........\n.350 [etd 54 sec] .........360 [etd 53 sec] .........370 [etd 52 sec] .......\n..380 [etd 52 sec] .........390 [etd 51 sec] .........400 [etd 50 sec] ......\n...410 [etd 49 sec] .........420 [etd 48 sec] .........430 [etd 47 sec] .....\n....440 [etd 46 sec] .........450 [etd 45 sec] .........460 [etd 45 sec] ....\n.....470 [etd 44 sec] .........480 [etd 43 sec] .........490 [etd 42 sec] ...\n......500 [etd 41 sec] .........510 [etd 40 sec] .........520 [etd 40 sec] ..\n.......530 [etd 39 sec] .........540 [etd 38 sec] .........550 [etd 37 sec] .\n........560 [etd 36 sec] .........570 [etd 35 sec] .........580\n [etd 34 sec] .........590 [etd 34 sec] .........600 [etd 33 sec] .........\n610 [etd 32 sec] .........620 [etd 31 sec] .........630 [etd 30 sec] ........\n.640 [etd 29 sec] .........650 [etd 29 sec] .........660 [etd 28 sec] .......\n..670 [etd 27 sec] .........680 [etd 26 sec] .........690 [etd 25 sec] ......\n...700 [etd 24 sec] .........710 [etd 23 sec] .........720 [etd 23 sec] .....\n....730 [etd 22 sec] .........740 [etd 21 sec] .........750 [etd 20 sec] ....\n.....760 [etd 19 sec] .........770 [etd 19 sec] .........780 [etd 18 sec] ...\n......790 [etd 17 sec] .........800 [etd 16 sec] .........810 [etd 15 sec] ..\n.......820 [etd 15 sec] .........830 [etd 14 sec] .........840 [etd 13 sec] .\n........850 [etd 12 sec] .........860 [etd 11 sec] .........870\n [etd 10 sec] .........880 [etd 10 sec] .........890 [etd 9 sec] .........\n900 [etd 8 sec] .........910 [etd 7 sec] .........920 [etd 6 sec] ........\n.930 [etd 6 sec] .........940 [etd 5 sec] .........950 [etd 4 sec] .......\n..960 [etd 3 sec] .........970 [etd 2 sec] .........980 [etd 2 sec] ......\n...990 [etd 1 sec] ........ 999.\n\nDone.\n\n\n\nplot(G_F.csr)\n\n\n\n\n\nThe observed line is above the envelopes, suggesting a clustered pattern.\n\nConclusion: Based on the G function, there is clustering and the null hypothesis is rejected. The distribution of functional water points are not randomly distributed."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#test-hypothesis-2",
    "href": "take_home_ex/THE1/THE1.html#test-hypothesis-2",
    "title": "Take Home Exercise 1",
    "section": "5.2 Test Hypothesis 2",
    "text": "5.2 Test Hypothesis 2\nH0 = The distribution of non-functional water points are randomly distributed.\nH1 = The distribution of non-functional water points are not randomly distributed.\nConfidence Interval = 95%\n\n5.2.1 Nearest Neighbour Index (Clark-Evans Test)\n\nclarkevans.test(wp_nonfunctional_nga_osun_ppp,\n                correction=\"none\",\n                clipregion=\"nga_osun_owin\",\n                alternative=c(\"clustered\"),\n                nsim=99)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 99 simulations of CSR with fixed n\n\ndata:  wp_nonfunctional_nga_osun_ppp\nR = 0.42087, p-value = 0.01\nalternative hypothesis: clustered (R < 1)\n\n\n\nSince p-value is 0.01 which is smaller than 0.05, the null hypothesis is rejected.\nSince the R-value is 0.421 (3 d.p.) < 1, the pattern exhibits clustering\n\nConclusion: Based on the Clark-Evans test, the distribution of non-functional water points are not randomly distributed.\n\n\n5.2.2 G-Function\n\nG_NF = Gest(wp_nonfunctional_nga_osun_ppp, correction = \"border\")\nplot(G_NF, xlim = c(0, 500))\n\n\n\n\n\nG_NF.csr <- envelope(wp_nonfunctional_nga_osun_ppp, Gest, nsim = 999)\n\nGenerating 999 simulations of CSR  ...\n1, 2, 3, ......10.........20.........30.........40.........50.........60........\n.70.........80.........90.........100.........110.........120.........130......\n...140.........150.........160.........170.........180.........190.........200....\n.....210.........220.........230.........240.........250.........260.........270..\n.......280.........290.........300.........310.........320.........330.........340\n.........350.........360.........370.........380.........390.........400........\n.410.........420.........430.........440.........450.........460.........470......\n...480.........490.........500.........510.........520.........530.........540....\n.....550.........560.........570.........580.........590.........600.........610..\n.......620.........630.........640.........650.........660.........670.........680\n.........690.........700.........710.........720.........730.........740........\n.750.........760.........770.........780.........790.........800.........810......\n...820.........830.........840.........850.........860.........870.........880....\n.....890.........900.........910.........920.........930.........940.........950..\n.......960.........970.........980.........990........ 999.\n\nDone.\n\n\n\nplot(G_NF.csr)\n\n\n\n\n\nThe observed line is above the envelopes, suggesting a clustered pattern.\n\nConclusion: Based on the G function, there is clustering and the null hypothesis is rejected. The distribution of functional water points are not randomly distributed."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#overall-conclusion",
    "href": "take_home_ex/THE1/THE1.html#overall-conclusion",
    "title": "Take Home Exercise 1",
    "section": "5.3 Overall Conclusion",
    "text": "5.3 Overall Conclusion\nFor both functional and non-functional water points, they exhibit patterns of clustering and are not randomly distributed."
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#test-hypothesis",
    "href": "take_home_ex/THE1/THE1.html#test-hypothesis",
    "title": "Take Home Exercise 1",
    "section": "6.1 Test Hypothesis",
    "text": "6.1 Test Hypothesis\nH0 = Spatial distribution of functional and non-functional water points are independent from each other.\nH1 = Spatial distribution of functional and non-functional water points are not independent from each other.\nConfidence Interval: 95%"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#local-colocation-quotient",
    "href": "take_home_ex/THE1/THE1.html#local-colocation-quotient",
    "title": "Take Home Exercise 1",
    "section": "6.2 Local Colocation Quotient",
    "text": "6.2 Local Colocation Quotient\n\n6.2.1 Calculate Neighbour List\nSearch for the 6 nearest neighbour whilst including self, such that each list has 7 neighbours generated.\n\nnb <- include_self(st_knn(st_geometry(wp_sf), 6))\n\n\nhead(nb, n = 5)\n\n[[1]]\n[1]    1  124  314  387 2823 3174 3872\n\n[[2]]\n[1]    2  154  982 1300 1873 2392 3782\n\n[[3]]\n[1]    3 1978 2099 2175 2907 3352 3668\n\n[[4]]\n[1]    4 1121 1710 1828 1893 4032 4699\n\n[[5]]\n[1]    5  509 1266 1804 2007 2424 3801\n\n\n\n\n6.2.2 Calculate Weight Matrix\nUsing the st_kernel_weights() function, convert all nb into a weight matrix.\n\nwt <- st_kernel_weights(\n  nb, wp_sf, \"gaussian\", adaptive = TRUE\n)\n\n\n\n6.2.3 Calculate LCLQ\n\nLCLQ <- local_colocation(\n  wp_functional$`#status_clean`,\n  wp_nonfunctional$`#status_clean`,\n  nb, wt, 49\n)"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#visualising-lclq",
    "href": "take_home_ex/THE1/THE1.html#visualising-lclq",
    "title": "Take Home Exercise 1",
    "section": "6.3 Visualising LCLQ",
    "text": "6.3 Visualising LCLQ\n\nLCLQ_wp <- cbind(wp_sf, LCLQ)\n\n\ntmap_mode(\"view\")\ntm_shape(nga_osun) +\n  tm_polygons() +\ntm_shape(LCLQ_wp) +\n  tm_dots(\n    col = \"Non.Functional\",\n    size = 0.01,\n    border.col = \"black\",\n    border.lwd = 0.5\n  )"
  },
  {
    "objectID": "take_home_ex/THE1/THE1.html#conclusion-1",
    "href": "take_home_ex/THE1/THE1.html#conclusion-1",
    "title": "Take Home Exercise 1",
    "section": "6.4 Conclusion",
    "text": "6.4 Conclusion\nThe majority of the non-functional water points have missing LCLQ values (assumed to be 0), representing that the majority of functional water points are unlikely to have non-functional water points within the neighbourhood.\nThere are a few non-functional water points with LCLQ values of 0.6 to 0.9, indicating that there are a few functional water points that has a chance of having non-functional water points within the neighbourhood.\nThere are multiple non-functional water points with LCLQ values of 1 to 1.1, indicating that:\n\nthere are multiple areas with a good representation of functional and non-functional water points throughout the neighbourhood.\nthere are multiple functional water points that are more likely to have non-functional water points within the neighbourhood."
  },
  {
    "objectID": "inclass_ex/ICE6/ICE6.html",
    "href": "inclass_ex/ICE6/ICE6.html",
    "title": "In-class Exercise 6:",
    "section": "",
    "text": "Help to identify who is the spatial neighbour of target polygon.\n2 methods:\n\nadjacency: based on shared boundary (if there is shared boundary = neighbour)\n\na polygon with a larger boundary may have more neighbours\nouter islands will not be considered: no shared boundaries\n\ndistance (more complicated): find centroid of each polygon and measure the distance\n\nspatial biasness: distance to neighbour highly varies depending on the size of polygon\n\n\nThus there is a need to study the map before deciding which matrix to use.\n\n\n\nQueen’s Case: All sides and edges are considered neighbours\nRook’s Case: Must explicity share a boundary (side)\n\n\n\nFor each row in the matrix, divide each number by the total number in the row to standardise the weights.\n\n\n\n\nsfdep: newer package, does not require conversion to sp"
  },
  {
    "objectID": "inclass_ex/ICE6/ICE6.html#installing-and-loading-packages",
    "href": "inclass_ex/ICE6/ICE6.html#installing-and-loading-packages",
    "title": "In-class Exercise 6:",
    "section": "2.1 Installing and Loading Packages",
    "text": "2.1 Installing and Loading Packages\n\npacman::p_load(sf, tmap, sfdep, tidyverse)"
  },
  {
    "objectID": "inclass_ex/ICE6/ICE6.html#importing-data",
    "href": "inclass_ex/ICE6/ICE6.html#importing-data",
    "title": "In-class Exercise 6:",
    "section": "2.2 Importing Data",
    "text": "2.2 Importing Data\n\n2.2.1 Hunan Geoboundary\n\nhunan <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"Hunan\"\n)\n\nReading layer `Hunan' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE6\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\n\nhunan is a sf data frame with 88 polygons\n\n\n\n2.2.2 Hunan 2012 GDP\n\nhunan2012 <- read_csv(\"data/aspatial/Hunan_2012.csv\")\nhead(hunan2012)\n\n# A tibble: 6 × 29\n  County   City  avg_w…¹ depos…²   FAI Gov_Rev Gov_Exp    GDP GDPPC    GIO  Loan\n  <chr>    <chr>   <dbl>   <dbl> <dbl>   <dbl>   <dbl>  <dbl> <dbl>  <dbl> <dbl>\n1 Anhua    Yiya…   30544  10967  6832.    457.   2703  13225  14567  9277. 3955.\n2 Anren    Chen…   28058   4599. 6386.    221.   1455.  4941. 12761  4189. 2555.\n3 Anxiang  Chan…   31935   5517. 3541     244.   1780. 12482  23667  5109. 2807.\n4 Baojing  Huna…   30843   2250  1005.    193.   1379.  4088. 14563  3624. 1254.\n5 Chaling  Zhuz…   31251   8241. 6508.    620.   1947  11585  20078  9158. 4287.\n6 Changni… Heng…   28518  10860  7920     770.   2632. 19886  24418 37392  4243.\n# … with 18 more variables: NIPCR <dbl>, Bed <dbl>, Emp <dbl>, EmpR <dbl>,\n#   EmpRT <dbl>, Pri_Stu <dbl>, Sec_Stu <dbl>, Household <dbl>,\n#   Household_R <dbl>, NOIP <dbl>, Pop_R <dbl>, RSCG <dbl>, Pop_T <dbl>,\n#   Agri <dbl>, Service <dbl>, Disp_Inc <dbl>, RORP <dbl>, ROREmp <dbl>, and\n#   abbreviated variable names ¹​avg_wage, ²​deposite\n\n\n\n\n2.2.3 Combining Both Data Frames\nCombine the data frames using left_join() function, ensuring that the geospatial data frame is on the LHS.\n\nhunan <- left_join(hunan, hunan2012) %>%\n  select(1:4, 7, 15)"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html",
    "href": "handson_ex/HE6/HE6.html",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "",
    "text": "pacman::p_load(sf, spdep, tmap, tidyverse, knitr)\n\n\n\n\n\n\n\nhunan <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"Hunan\"\n)\n\nReading layer `Hunan' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE6\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\n\nhunan is a POLYGON sf data frame with 88 features\nHunan is located in Central China which uses a CRS of WGS 84 (?)\n\n\n\n\n\nhunan2012 <- read_csv(\"data/aspatial/Hunan_2012.csv\")\n\n\n\n\n\nUsing the left_join() function of dplyr package, combine hunan2012 to hunan sf data frame.\nUsing the select() function, pick out columns:\n\nhunan <- left_join(hunan, hunan2012) %>%\n  select(1:4, 7, 15)"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#computing-queen-contiguity-based-neighbours",
    "href": "handson_ex/HE6/HE6.html#computing-queen-contiguity-based-neighbours",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "3.1 Computing Queen contiguity based neighbours",
    "text": "3.1 Computing Queen contiguity based neighbours\n\nwm_q <- poly2nb(hunan, queen = TRUE)\nsummary(wm_q)\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 448 \nPercentage nonzero weights: 5.785124 \nAverage number of links: 5.090909 \nLink number distribution:\n\n 1  2  3  4  5  6  7  8  9 11 \n 2  2 12 16 24 14 11  4  2  1 \n2 least connected regions:\n30 65 with 1 link\n1 most connected region:\n85 with 11 links\n\n\n\nThe most connected area unit has 11 neighbours\nThere are 2 area units with only one neighbour\n\nTo check the neighbours of one area unit:\n\nwm_q[[1]]\n\n[1]  2  3  4 57 85\n\n\n\nPolygon 1 has 5 neighbours\n\nTo check the country name of area unit 1:\n\nhunan$County[1]\n\n[1] \"Anxiang\"\n\n\nTo check the country names of the 5 neighbours:\n\nhunan$NAME_3[c(2, 3, 4, 57, 85)]\n\n[1] \"Hanshou\" \"Jinshi\"  \"Li\"      \"Nan\"     \"Taoyuan\"\n\n\nTo retrieve the GDPPC of the 5 neighbour countries:\n\nnb1 <- wm_q[[1]]\nnb1 <- hunan$GDPPC[nb1]\nnb1\n\n[1] 20981 34592 24473 21311 22879"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#creating-rook-contiguity-based-neighbours",
    "href": "handson_ex/HE6/HE6.html#creating-rook-contiguity-based-neighbours",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "3.2 Creating Rook Contiguity Based Neighbours",
    "text": "3.2 Creating Rook Contiguity Based Neighbours\nUsing poly2nb() function, when queen = FALSE, rook’s case will be used.\n\nwm_r <- poly2nb(hunan, queen = FALSE)\nsummary(wm_r)\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 440 \nPercentage nonzero weights: 5.681818 \nAverage number of links: 5 \nLink number distribution:\n\n 1  2  3  4  5  6  7  8  9 10 \n 2  2 12 20 21 14 11  3  2  1 \n2 least connected regions:\n30 65 with 1 link\n1 most connected region:\n85 with 10 links\n\n\n\nmost connected area unit has 10 neighbours, 1 less than that of queen’s case\n2 area unit has only one neighbour, same as that of queen’s case"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#visualising-contiguity-weights",
    "href": "handson_ex/HE6/HE6.html#visualising-contiguity-weights",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "3.3 Visualising Contiguity Weights",
    "text": "3.3 Visualising Contiguity Weights\nConnectivity graph: takes a point and displays a line to each neighbouring point\n\nfor polygons: need to get points before creating the graph (use centroids: latitude and longitude)\n\n\n3.3.1 Calculating Centroids\nTo get the longitude:\n\nlongitude <- map_dbl(hunan$geometry, ~st_centroid(.x)[[1]])\n\nTo get the latitude:\n\nlatitude <- map_dbl(hunan$geometry, ~st_centroid(.x)[[2]])\n\nCombing the latitude and longitude into one object:\n\ncoords <- cbind(longitude, latitude)\n\n\nhead(coords)\n\n     longitude latitude\n[1,]  112.1531 29.44362\n[2,]  112.0372 28.86489\n[3,]  111.8917 29.47107\n[4,]  111.7031 29.74499\n[5,]  111.6138 29.49258\n[6,]  111.0341 29.79863\n\n\n\n\n3.3.2 Plotting Queen Contiguity Based Neighbours Map\nPlot the geometry boundary before the points and lines.\n\nplot(hunan$geometry, border = \"lightgrey\")\nplot(wm_q, coords, pch = 19, cex = 0.6, add = TRUE, col = \"red\")\n\n\n\n\n\nadd = TRUE: Add to a previous plot\npch: option to specify symbols for plotting points\ncex: amount by which plotting text and symbols should be scaled relative to the default\n\n\n\n3.3.3 Plotting Rook Contiguity Based Neighbours Map\n\nplot(hunan$geometry, border = \"lightgrey\")\nplot(wm_r, coords, pch = 19, cex = 0.6, add = TRUE, col = \"red\")\n\n\n\n\n\n\n3.3.4 Plotting Both Maps\n\npar(mfrow=c(1,2))\nplot(hunan$geometry, border=\"lightgrey\")\nplot(wm_q, coords, pch = 19, cex = 0.6, add = TRUE, col= \"red\", main=\"Queen Contiguity\")\nplot(hunan$geometry, border=\"lightgrey\")\nplot(wm_r, coords, pch = 19, cex = 0.6, add = TRUE, col = \"red\", main=\"Rook Contiguity\")"
  },
  {
    "objectID": "inclass_ex/ICE6/ICE6.html#identify-contiguity-neighbours",
    "href": "inclass_ex/ICE6/ICE6.html#identify-contiguity-neighbours",
    "title": "In-class Exercise 6:",
    "section": "4.1 Identify Contiguity Neighbours",
    "text": "4.1 Identify Contiguity Neighbours\n\n4.1.1 Contiguity Neighbours Method\nQueen’s Method\n\ncn_queen <- hunan %>%\n  mutate(nb = st_contiguity(geometry),\n         .before = 1)\n\n\ncreates a new field nb that stores the neighbours into cn_queen\n.before = 1: places nb into the first column\n\nRook’s Method\n\ncn_rook <- hunan %>%\n  mutate(nb = st_contiguity(geometry),\n         queen = FALSE,\n         .before = 1)\n\n\nqueen = FALSE: rook’s method"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#calculating-cut-off-distance",
    "href": "handson_ex/HE6/HE6.html#calculating-cut-off-distance",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "4.1 Calculating Cut-off Distance",
    "text": "4.1 Calculating Cut-off Distance\nCut-off distance: upper limit for distance band\nFirst, using knearneigh() of spdep, calculate a matrix of indices of points of the k nearest neighbours.\nAt the same time, using knn2nb(), convert the knn object into a nb list (vectors containing neighbour ids).\n\nk1 <- knn2nb(knearneigh(coords))\n\nNext, calculate the length of neighbour relationship edges using nbdists() and remove the list structure using unlist().\n\nk1dists <- unlist(nbdists(k1, coords, longlat = TRUE))\nsummary(k1dists)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  24.79   32.57   38.01   39.07   44.52   61.79 \n\n\n\nLargest first nearest neighbour distance = 61.79km\nUpper threshold = 61.79km, anything below this distance will guarantee at least 1 neighbour"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#calculating-fixed-distance-weight-matrix",
    "href": "handson_ex/HE6/HE6.html#calculating-fixed-distance-weight-matrix",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "4.2 Calculating Fixed Distance Weight Matrix",
    "text": "4.2 Calculating Fixed Distance Weight Matrix\nUsing dnearneigh() function, calculate the weight matrix with an upper limit of 62km.\n\nwm_d62 <- dnearneigh(coords, 0, 62, longlat = TRUE)\nwm_d62\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 324 \nPercentage nonzero weights: 4.183884 \nAverage number of links: 3.681818 \n\n\n\nEach polygon has an average of 3.68 links.\n\nTo display the matrix, use the table() and card() functions from spdep.\n\ntable(hunan$County, card(wm_d62))\n\n               \n                1 2 3 4 5 6\n  Anhua         1 0 0 0 0 0\n  Anren         0 0 0 1 0 0\n  Anxiang       0 0 0 0 1 0\n  Baojing       0 0 0 0 1 0\n  Chaling       0 0 1 0 0 0\n  Changning     0 0 1 0 0 0\n  Changsha      0 0 0 1 0 0\n  Chengbu       0 1 0 0 0 0\n  Chenxi        0 0 0 1 0 0\n  Cili          0 1 0 0 0 0\n  Dao           0 0 0 1 0 0\n  Dongan        0 0 1 0 0 0\n  Dongkou       0 0 0 1 0 0\n  Fenghuang     0 0 0 1 0 0\n  Guidong       0 0 1 0 0 0\n  Guiyang       0 0 0 1 0 0\n  Guzhang       0 0 0 0 0 1\n  Hanshou       0 0 0 1 0 0\n  Hengdong      0 0 0 0 1 0\n  Hengnan       0 0 0 0 1 0\n  Hengshan      0 0 0 0 0 1\n  Hengyang      0 0 0 0 0 1\n  Hongjiang     0 0 0 0 1 0\n  Huarong       0 0 0 1 0 0\n  Huayuan       0 0 0 1 0 0\n  Huitong       0 0 0 1 0 0\n  Jiahe         0 0 0 0 1 0\n  Jianghua      0 0 1 0 0 0\n  Jiangyong     0 1 0 0 0 0\n  Jingzhou      0 1 0 0 0 0\n  Jinshi        0 0 0 1 0 0\n  Jishou        0 0 0 0 0 1\n  Lanshan       0 0 0 1 0 0\n  Leiyang       0 0 0 1 0 0\n  Lengshuijiang 0 0 1 0 0 0\n  Li            0 0 1 0 0 0\n  Lianyuan      0 0 0 0 1 0\n  Liling        0 1 0 0 0 0\n  Linli         0 0 0 1 0 0\n  Linwu         0 0 0 1 0 0\n  Linxiang      1 0 0 0 0 0\n  Liuyang       0 1 0 0 0 0\n  Longhui       0 0 1 0 0 0\n  Longshan      0 1 0 0 0 0\n  Luxi          0 0 0 0 1 0\n  Mayang        0 0 0 0 0 1\n  Miluo         0 0 0 0 1 0\n  Nan           0 0 0 0 1 0\n  Ningxiang     0 0 0 1 0 0\n  Ningyuan      0 0 0 0 1 0\n  Pingjiang     0 1 0 0 0 0\n  Qidong        0 0 1 0 0 0\n  Qiyang        0 0 1 0 0 0\n  Rucheng       0 1 0 0 0 0\n  Sangzhi       0 1 0 0 0 0\n  Shaodong      0 0 0 0 1 0\n  Shaoshan      0 0 0 0 1 0\n  Shaoyang      0 0 0 1 0 0\n  Shimen        1 0 0 0 0 0\n  Shuangfeng    0 0 0 0 0 1\n  Shuangpai     0 0 0 1 0 0\n  Suining       0 0 0 0 1 0\n  Taojiang      0 1 0 0 0 0\n  Taoyuan       0 1 0 0 0 0\n  Tongdao       0 1 0 0 0 0\n  Wangcheng     0 0 0 1 0 0\n  Wugang        0 0 1 0 0 0\n  Xiangtan      0 0 0 1 0 0\n  Xiangxiang    0 0 0 0 1 0\n  Xiangyin      0 0 0 1 0 0\n  Xinhua        0 0 0 0 1 0\n  Xinhuang      1 0 0 0 0 0\n  Xinning       0 1 0 0 0 0\n  Xinshao       0 0 0 0 0 1\n  Xintian       0 0 0 0 1 0\n  Xupu          0 1 0 0 0 0\n  Yanling       0 0 1 0 0 0\n  Yizhang       1 0 0 0 0 0\n  Yongshun      0 0 0 1 0 0\n  Yongxing      0 0 0 1 0 0\n  You           0 0 0 1 0 0\n  Yuanjiang     0 0 0 0 1 0\n  Yuanling      1 0 0 0 0 0\n  Yueyang       0 0 1 0 0 0\n  Zhijiang      0 0 0 0 1 0\n  Zhongfang     0 0 0 1 0 0\n  Zhuzhou       0 0 0 0 1 0\n  Zixing        0 0 1 0 0 0"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#plotting-fixed-distance-weight-matrix",
    "href": "handson_ex/HE6/HE6.html#plotting-fixed-distance-weight-matrix",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "4.3 Plotting Fixed Distance Weight Matrix",
    "text": "4.3 Plotting Fixed Distance Weight Matrix\n\nplot(hunan$geometry, border = \"lightgrey\")\nplot(wm_d62, coords, add = TRUE)\nplot(k1, coords, add = TRUE, col = \"red\", length = 0.08)\n\n\n\n\n\npar(mfrow=c(1,2))\nplot(hunan$geometry, border=\"lightgrey\")\nplot(k1, coords, add=TRUE, col=\"red\", length=0.08, main=\"1st nearest neighbours\")\nplot(hunan$geometry, border=\"lightgrey\")\nplot(wm_d62, coords, add=TRUE, pch = 19, cex = 0.6, main=\"Distance link\")"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#calculating-adaptive-distance-weight-matrix",
    "href": "handson_ex/HE6/HE6.html#calculating-adaptive-distance-weight-matrix",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "4.4 Calculating Adaptive Distance Weight Matrix",
    "text": "4.4 Calculating Adaptive Distance Weight Matrix\nInstead of controlling the distance, can choose the number of nearest neighbours.\n\nknn6 <- knn2nb(knearneigh(coords, k = 6))\nknn6\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 528 \nPercentage nonzero weights: 6.818182 \nAverage number of links: 6 \nNon-symmetric neighbours list"
  },
  {
    "objectID": "handson_ex/HE6/HE6.html#plotting-adaptive-distance-based-matrix",
    "href": "handson_ex/HE6/HE6.html#plotting-adaptive-distance-based-matrix",
    "title": "Hands-on Exercise 6: Spatial Weights and Application",
    "section": "4.5 Plotting Adaptive Distance Based Matrix",
    "text": "4.5 Plotting Adaptive Distance Based Matrix\n\nplot(hunan$geometry, border = \"lightgrey\")\nplot(knn6, coords, pch = 19, cex = 0.6, add = TRUE, col = \"red\")"
  },
  {
    "objectID": "handson_ex/HE7/HE7.html",
    "href": "handson_ex/HE7/HE7.html",
    "title": "Hands-on Exercise 7: Global and Local Measures of Spatial Autocorrelation",
    "section": "",
    "text": "pacman::p_load(sf, spdep, tmap, tidyverse)\n\n\nsf: importing and handling geospatial data\ntidyverse: wrangling attribute data\nspdep: compute spatial weights, global and local spatial autocorrelation statistics\ntmap: prepare cartographic quality chropleth map\n\n\n\n\n\nhunan <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"Hunan\"\n)\n\nReading layer `Hunan' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE7\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\n\nhunan2012 <- read_csv(\"data/aspatial/Hunan_2012.csv\")\n\n\n\n\n\nhunan <- left_join(hunan, hunan2012) %>%\n  select(1:4, 7, 15)\n\n\n\n\nTo compare equal interval and equal quantile classification:\n\nequal <- tm_shape(hunan) +\n  tm_fill(\n    \"GDPPC\", n = 5, style = \"equal\"\n  ) +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Equal Interval Classification\")\n\nquantile <- tm_shape(hunan) +\n  tm_fill(\n    \"GDPPC\", n = 5, style = \"quantile\"\n  ) +\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Equal Quantile Classification\")\n\ntmap_arrange(equal, quantile, asp = 1, ncol = 2)\n\n\n\n\n\nfor tm_fill, n = 5 is the preferred number of classes\nfor tm_arrange, asp = 1 is the aspect ratio\n\n\n\n\n\n\n\nFirst, construct spatial weights of the study area.\n\nspatial weights: defines neighbourhood relationships between geographical units in the study area\n\n\nwm_q <- poly2nb(hunan, queen = TRUE)\nsummary(wm_q)\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 448 \nPercentage nonzero weights: 5.785124 \nAverage number of links: 5.090909 \nLink number distribution:\n\n 1  2  3  4  5  6  7  8  9 11 \n 2  2 12 16 24 14 11  4  2  1 \n2 least connected regions:\n30 65 with 1 link\n1 most connected region:\n85 with 11 links\n\n\n\nthere are 88 area units in Hunan\nmost connected area unit has 11 neighbours\nthere are 2 areas units with only 1 neighbour\n\n\n\n\nNext, assign equal weights (style = \"W\") to each neighbouring polygon.\n\nrswm_q <- nb2listw(wm_q, style = \"W\", zero.policy = TRUE)\nrswm_q\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 448 \nPercentage nonzero weights: 5.785124 \nAverage number of links: 5.090909 \n\nWeights style: W \nWeights constants summary:\n   n   nn S0       S1       S2\nW 88 7744 88 37.86334 365.9147\n\n\n\nstyle:\n\nB: basic binary coding\nW: row standardised (sums over all links to n)\nC: globally standardised (sums over all links to n)\nU: C divided by the number of neighbours (sums over all links to unity)\nS: variance-stabilising coding (sums over all links to n)\n\nzero policy=TRUE: weight vectors of 0 length are inserted for regions without neighbours in the neighbours list.\n\n\n\n\n\nmoran.test(\n  hunan$GDPPC,\n  listw = rswm_q,\n  zero.policy = TRUE,\n  na.action = na.omit\n)\n\n\n    Moran I test under randomisation\n\ndata:  hunan$GDPPC  \nweights: rswm_q    \n\nMoran I statistic standard deviate = 4.7351, p-value = 1.095e-06\nalternative hypothesis: greater\nsample estimates:\nMoran I statistic       Expectation          Variance \n      0.300749970      -0.011494253       0.004348351 \n\n\n\n\n\n\nset.seed(1234)\nbperm = moran.mc(\n  hunan$GDPPC,\n  listw = rswm_q,\n  nsim = 999,\n  zero.policy = TRUE,\n  na.action = na.omit\n)\nbperm\n\n\n    Monte-Carlo simulation of Moran I\n\ndata:  hunan$GDPPC \nweights: rswm_q  \nnumber of simulations + 1: 1000 \n\nstatistic = 0.30075, observed rank = 1000, p-value = 0.001\nalternative hypothesis: greater\n\n\n\n\nEDA:\n\nmean(bperm$res[1:999])\n\n[1] -0.01504572\n\n\n\nvar(bperm$res[1:999])\n\n[1] 0.004371574\n\n\n\nsummary(bperm$res[1:999])\n\n    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. \n-0.18339 -0.06168 -0.02125 -0.01505  0.02611  0.27593 \n\n\nHistogram:\n\nhist(\n  bperm$res,\n  freq = TRUE,\n  breaks = 20,\n  xlab = \"Simulated Moran's I\"\n)\nabline(v = 0, col = \"red\")\n\n\n\n\n\n\n\n\n\ngeary.test(hunan$GDPPC, listw = rswm_q)\n\n\n    Geary C test under randomisation\n\ndata:  hunan$GDPPC \nweights: rswm_q \n\nGeary C statistic standard deviate = 3.6108, p-value = 0.0001526\nalternative hypothesis: Expectation greater than statistic\nsample estimates:\nGeary C statistic       Expectation          Variance \n        0.6907223         1.0000000         0.0073364 \n\n\n\n\n\n\nset.seed(1234)\nbperm = geary.mc(\n  hunan$GDPPC,\n  listw = rswm_q,\n  nsim = 999\n)\nbperm\n\n\n    Monte-Carlo simulation of Geary C\n\ndata:  hunan$GDPPC \nweights: rswm_q \nnumber of simulations + 1: 1000 \n\nstatistic = 0.69072, observed rank = 1, p-value = 0.001\nalternative hypothesis: greater\n\n\n\n\nEDA:\n\nmean(bperm$res[1:999])\n\n[1] 1.004402\n\n\n\nvar(bperm$res[1:999])\n\n[1] 0.007436493\n\n\n\nsummary(bperm$res[1:999])\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n 0.7142  0.9502  1.0052  1.0044  1.0595  1.2722 \n\n\nHistogram:\n\nhist(bperm$res, freq = TRUE, breaks = 20, xlab = \"Simulated Geary C\")\nabline(v = 1, col = \"red\")\n\n\n\n\n\n\n\n\n\nExamines patterns of spatial autocorrelation in data/model residuals.\n\nshows how correlated pairs of spatial observations are when increasing the distance (lag) between them\nplots index of correlation (Moran’s I/Geary’s c) against distance\n\n\n\nUse sp.correlogram() from spdep package\n\norder=6: 6-lag spatial correlogram\n\n\nMI_corr <- sp.correlogram(\n  wm_q,\n  hunan$GDPPC,\n  order = 6,\n  method = \"I\",\n  style = \"W\"\n)\nplot(MI_corr)\n\n\n\n\nTo better understand the output, examine the full analysis report.\n\nprint(MI_corr)\n\nSpatial correlogram for hunan$GDPPC \nmethod: Moran's I\n         estimate expectation   variance standard deviate Pr(I) two sided    \n1 (88)  0.3007500  -0.0114943  0.0043484           4.7351       2.189e-06 ***\n2 (88)  0.2060084  -0.0114943  0.0020962           4.7505       2.029e-06 ***\n3 (88)  0.0668273  -0.0114943  0.0014602           2.0496        0.040400 *  \n4 (88)  0.0299470  -0.0114943  0.0011717           1.2107        0.226015    \n5 (88) -0.1530471  -0.0114943  0.0012440          -4.0134       5.984e-05 ***\n6 (88) -0.1187070  -0.0114943  0.0016791          -2.6164        0.008886 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\n\nSimilarly, compute the correlation for Geary’s C and change the method to “C”.\n\nGC_corr <- sp.correlogram(\n  wm_q,\n  hunan$GDPPC,\n  order = 6,\n  method = \"C\",\n  style = \"W\"\n)\nplot(GC_corr)\n\n\n\n\n\nprint(GC_corr)\n\nSpatial correlogram for hunan$GDPPC \nmethod: Geary's C\n        estimate expectation  variance standard deviate Pr(I) two sided    \n1 (88) 0.6907223   1.0000000 0.0073364          -3.6108       0.0003052 ***\n2 (88) 0.7630197   1.0000000 0.0049126          -3.3811       0.0007220 ***\n3 (88) 0.9397299   1.0000000 0.0049005          -0.8610       0.3892612    \n4 (88) 1.0098462   1.0000000 0.0039631           0.1564       0.8757128    \n5 (88) 1.2008204   1.0000000 0.0035568           3.3673       0.0007592 ***\n6 (88) 1.0773386   1.0000000 0.0058042           1.0151       0.3100407    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1"
  },
  {
    "objectID": "handson_ex/HE7/HE7.html#cluster-and-outlier-analysis",
    "href": "handson_ex/HE7/HE7.html#cluster-and-outlier-analysis",
    "title": "Hands-on Exercise 7: Global and Local Measures of Spatial Autocorrelation",
    "section": "2.1 Cluster and Outlier Analysis",
    "text": "2.1 Cluster and Outlier Analysis\n\n2.1.1 Computing Local Moran’s I\nUsing localmoran() function from spdep package, compute the Ii values with a set of zi values and a listw object (neighbour weighting information).\n\nfips <- order(hunan$County)\nlocalMI <- localmoran(hunan$GDPPC, rswm_q)\nhead(localMI)\n\n            Ii          E.Ii       Var.Ii        Z.Ii Pr(z != E(Ii))\n1 -0.001468468 -2.815006e-05 4.723841e-04 -0.06626904      0.9471636\n2  0.025878173 -6.061953e-04 1.016664e-02  0.26266425      0.7928094\n3 -0.011987646 -5.366648e-03 1.133362e-01 -0.01966705      0.9843090\n4  0.001022468 -2.404783e-07 5.105969e-06  0.45259801      0.6508382\n5  0.014814881 -6.829362e-05 1.449949e-03  0.39085814      0.6959021\n6 -0.038793829 -3.860263e-04 6.475559e-03 -0.47728835      0.6331568\n\n\nResult Matrix:\n\nIi: local Moran’s I statistics\nE.Ii: expectation of local Moran statistic under the randomisation hypothesis\nVar.Ii: variance of local Moran statistic under the randomisation hypothesis\nZ.Ii: standard deviate of local Moran statistic\nPr(): p-value of local Moran statistic\n\nList the content of local Moran Matrix derived using printCoefmat().\n\nprintCoefmat(\n  data.frame(\n    localMI[fips,],\n    row.names = hunan$County[fips]\n  ),\n  check.names = FALSE\n)\n\n                       Ii        E.Ii      Var.Ii        Z.Ii Pr.z....E.Ii..\nAnhua         -2.2493e-02 -5.0048e-03  5.8235e-02 -7.2467e-02         0.9422\nAnren         -3.9932e-01 -7.0111e-03  7.0348e-02 -1.4791e+00         0.1391\nAnxiang       -1.4685e-03 -2.8150e-05  4.7238e-04 -6.6269e-02         0.9472\nBaojing        3.4737e-01 -5.0089e-03  8.3636e-02  1.2185e+00         0.2230\nChaling        2.0559e-02 -9.6812e-04  2.7711e-02  1.2932e-01         0.8971\nChangning     -2.9868e-05 -9.0010e-09  1.5105e-07 -7.6828e-02         0.9388\nChangsha       4.9022e+00 -2.1348e-01  2.3194e+00  3.3590e+00         0.0008\nChengbu        7.3725e-01 -1.0534e-02  2.2132e-01  1.5895e+00         0.1119\nChenxi         1.4544e-01 -2.8156e-03  4.7116e-02  6.8299e-01         0.4946\nCili           7.3176e-02 -1.6747e-03  4.7902e-02  3.4200e-01         0.7324\nDao            2.1420e-01 -2.0824e-03  4.4123e-02  1.0297e+00         0.3032\nDongan         1.5210e-01 -6.3485e-04  1.3471e-02  1.3159e+00         0.1882\nDongkou        5.2918e-01 -6.4461e-03  1.0748e-01  1.6338e+00         0.1023\nFenghuang      1.8013e-01 -6.2832e-03  1.3257e-01  5.1198e-01         0.6087\nGuidong       -5.9160e-01 -1.3086e-02  3.7003e-01 -9.5104e-01         0.3416\nGuiyang        1.8240e-01 -3.6908e-03  3.2610e-02  1.0305e+00         0.3028\nGuzhang        2.8466e-01 -8.5054e-03  1.4152e-01  7.7931e-01         0.4358\nHanshou        2.5878e-02 -6.0620e-04  1.0167e-02  2.6266e-01         0.7928\nHengdong       9.9964e-03 -4.9063e-04  6.7742e-03  1.2742e-01         0.8986\nHengnan        2.8064e-02 -3.2160e-04  3.7597e-03  4.6294e-01         0.6434\nHengshan      -5.8201e-03 -3.0437e-05  5.1076e-04 -2.5618e-01         0.7978\nHengyang       6.2997e-02 -1.3046e-03  2.1865e-02  4.3486e-01         0.6637\nHongjiang      1.8790e-01 -2.3019e-03  3.1725e-02  1.0678e+00         0.2856\nHuarong       -1.5389e-02 -1.8667e-03  8.1030e-02 -4.7503e-02         0.9621\nHuayuan        8.3772e-02 -8.5569e-04  2.4495e-02  5.4072e-01         0.5887\nHuitong        2.5997e-01 -5.2447e-03  1.1077e-01  7.9685e-01         0.4255\nJiahe         -1.2431e-01 -3.0550e-03  5.1111e-02 -5.3633e-01         0.5917\nJianghua       2.8651e-01 -3.8280e-03  8.0968e-02  1.0204e+00         0.3076\nJiangyong      2.4337e-01 -2.7082e-03  1.1746e-01  7.1800e-01         0.4728\nJingzhou       1.8270e-01 -8.5106e-04  2.4363e-02  1.1759e+00         0.2396\nJinshi        -1.1988e-02 -5.3666e-03  1.1334e-01 -1.9667e-02         0.9843\nJishou        -2.8680e-01 -2.6305e-03  4.4028e-02 -1.3543e+00         0.1756\nLanshan        6.3334e-02 -9.6365e-04  2.0441e-02  4.4972e-01         0.6529\nLeiyang        1.1581e-02 -1.4948e-04  2.5082e-03  2.3422e-01         0.8148\nLengshuijiang -1.7903e+00 -8.2129e-02  2.1598e+00 -1.1623e+00         0.2451\nLi             1.0225e-03 -2.4048e-07  5.1060e-06  4.5260e-01         0.6508\nLianyuan      -1.4672e-01 -1.8983e-03  1.9145e-02 -1.0467e+00         0.2952\nLiling         1.3774e+00 -1.5097e-02  4.2601e-01  2.1335e+00         0.0329\nLinli          1.4815e-02 -6.8294e-05  1.4499e-03  3.9086e-01         0.6959\nLinwu         -2.4621e-03 -9.0703e-06  1.9258e-04 -1.7676e-01         0.8597\nLinxiang       6.5904e-02 -2.9028e-03  2.5470e-01  1.3634e-01         0.8916\nLiuyang        3.3688e+00 -7.7502e-02  1.5180e+00  2.7972e+00         0.0052\nLonghui        8.0801e-01 -1.1377e-02  1.5538e-01  2.0787e+00         0.0376\nLongshan       7.5663e-01 -1.1100e-02  3.1449e-01  1.3690e+00         0.1710\nLuxi           1.8177e-01 -2.4855e-03  3.4249e-02  9.9561e-01         0.3194\nMayang         2.1852e-01 -5.8773e-03  9.8049e-02  7.1663e-01         0.4736\nMiluo          1.8704e+00 -1.6927e-02  2.7925e-01  3.5715e+00         0.0004\nNan           -9.5789e-03 -4.9497e-04  6.8341e-03 -1.0988e-01         0.9125\nNingxiang      1.5607e+00 -7.3878e-02  8.0012e-01  1.8274e+00         0.0676\nNingyuan       2.0910e-01 -7.0884e-03  8.2306e-02  7.5356e-01         0.4511\nPingjiang     -9.8964e-01 -2.6457e-03  5.6027e-02 -4.1698e+00         0.0000\nQidong         1.1806e-01 -2.1207e-03  2.4747e-02  7.6396e-01         0.4449\nQiyang         6.1966e-02 -7.3374e-04  8.5743e-03  6.7712e-01         0.4983\nRucheng       -3.6992e-01 -8.8999e-03  2.5272e-01 -7.1814e-01         0.4727\nSangzhi        2.5053e-01 -4.9470e-03  6.8000e-02  9.7972e-01         0.3272\nShaodong      -3.2659e-02 -3.6592e-05  5.0546e-04 -1.4510e+00         0.1468\nShaoshan       2.1223e+00 -5.0227e-02  1.3668e+00  1.8583e+00         0.0631\nShaoyang       5.9499e-01 -1.1253e-02  1.3012e-01  1.6807e+00         0.0928\nShimen        -3.8794e-02 -3.8603e-04  6.4756e-03 -4.7729e-01         0.6332\nShuangfeng     9.2835e-03 -2.2867e-03  3.1516e-02  6.5174e-02         0.9480\nShuangpai      8.0591e-02 -3.1366e-04  8.9838e-03  8.5358e-01         0.3933\nSuining        3.7585e-01 -3.5933e-03  4.1870e-02  1.8544e+00         0.0637\nTaojiang      -2.5394e-01 -1.2395e-03  1.4477e-02 -2.1002e+00         0.0357\nTaoyuan        1.4729e-02 -1.2039e-04  8.5103e-04  5.0903e-01         0.6107\nTongdao        4.6482e-01 -6.9870e-03  1.9879e-01  1.0582e+00         0.2900\nWangcheng      4.4220e+00 -1.1067e-01  1.3596e+00  3.8873e+00         0.0001\nWugang         7.1003e-01 -7.8144e-03  1.0710e-01  2.1935e+00         0.0283\nXiangtan       2.4530e-01 -3.6457e-04  3.2319e-03  4.3213e+00         0.0000\nXiangxiang     2.6271e-01 -1.2703e-03  2.1290e-02  1.8092e+00         0.0704\nXiangyin       5.4525e-01 -4.7442e-03  7.9236e-02  1.9539e+00         0.0507\nXinhua         1.1810e-01 -6.2649e-03  8.6001e-02  4.2409e-01         0.6715\nXinhuang       1.5725e-01 -4.1820e-03  3.6648e-01  2.6667e-01         0.7897\nXinning        6.8928e-01 -9.6674e-03  2.0328e-01  1.5502e+00         0.1211\nXinshao        5.7578e-02 -8.5932e-03  1.1769e-01  1.9289e-01         0.8470\nXintian       -7.4050e-03 -5.1493e-03  1.0877e-01 -6.8395e-03         0.9945\nXupu           3.2406e-01 -5.7468e-03  5.7735e-02  1.3726e+00         0.1699\nYanling       -6.9021e-02 -5.9211e-04  9.9306e-03 -6.8667e-01         0.4923\nYizhang       -2.6844e-01 -2.2463e-03  4.7588e-02 -1.2202e+00         0.2224\nYongshun       6.3064e-01 -1.1350e-02  1.8830e-01  1.4795e+00         0.1390\nYongxing       4.3411e-01 -9.0735e-03  1.5088e-01  1.1409e+00         0.2539\nYou            7.8750e-02 -7.2728e-03  1.2116e-01  2.4714e-01         0.8048\nYuanjiang      2.0004e-04 -1.7760e-04  2.9798e-03  6.9181e-03         0.9945\nYuanling       8.7298e-03 -2.2981e-06  2.3221e-05  1.8121e+00         0.0700\nYueyang        4.1189e-02 -1.9768e-04  2.3113e-03  8.6085e-01         0.3893\nZhijiang       1.0476e-01 -7.8123e-04  1.3100e-02  9.2214e-01         0.3565\nZhongfang     -2.2685e-01 -2.1455e-03  3.5927e-02 -1.1855e+00         0.2358\nZhuzhou        3.2864e-01 -5.2432e-04  7.2391e-03  3.8688e+00         0.0001\nZixing        -7.6849e-01 -8.8210e-02  9.4057e-01 -7.0144e-01         0.4830\n\n\n\n\n2.1.2 Mapping Local Moran’s I and Values\nAppend local Moran’s I dataframe (localMI) into hunan sp dataframe.\n\nhunan.localMI <- cbind(hunan,localMI) %>%\n  rename(Pr.Ii = Pr.z....E.Ii..)\n\nPlot the Moran’s I values on a choropleth map.\n\ntm_shape(hunan.localMI) +\n  tm_fill(\n    col = \"Ii\",\n    style = \"pretty\",\n    palette = \"RdBu\",\n    title = \"Local Moran Statistics\"\n  ) +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\nthere are both positive and negalive Ii values\n\n\n\n2.1.3 Mapping Local Moran’s I p-values\n\ntm_shape(hunan.localMI) +\n  tm_fill(col = \"Pr.Ii\", \n          breaks=c(-Inf, 0.001, 0.01, 0.05, 0.1, Inf),\n          palette=\"-Blues\", \n          title = \"Local Moran's I p-values\") +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\n\n2.1.4 Comparing Both Maps\n\nlocalMI.map <- tm_shape(hunan.localMI) +\n  tm_fill(col = \"Ii\", \n          style = \"pretty\", \n          title = \"Local Moran Statistics\") +\n  tm_borders(alpha = 0.5)\n\npvalue.map <- tm_shape(hunan.localMI) +\n  tm_fill(col = \"Pr.Ii\", \n          breaks=c(-Inf, 0.001, 0.01, 0.05, 0.1, Inf),\n          palette=\"-Blues\", \n          title = \"Local Moran's I p-values\") +\n  tm_borders(alpha = 0.5)\n\ntmap_arrange(localMI.map, pvalue.map, asp=1, ncol=2)"
  },
  {
    "objectID": "handson_ex/HE7/HE7.html#lisa-cluster-map",
    "href": "handson_ex/HE7/HE7.html#lisa-cluster-map",
    "title": "Hands-on Exercise 7: Global and Local Measures of Spatial Autocorrelation",
    "section": "2.2 LISA Cluster Map",
    "text": "2.2 LISA Cluster Map\nShows the significant locations colour-coded by type of spatial autocorrelation.\n\n2.2.1 Plotting Moran Scatterplot\n\nnci <- moran.plot(\n  hunan$GDPPC, rswm_q,\n  labels=as.character(hunan$County), \n  xlab=\"GDPPC 2012\", \n  ylab=\"Spatially Lag GDPPC 2012\"\n)\n\n\n\n\n\nthere are 4 quadrants:\n\ntop right: areas with high GDPPC, are surrounded by other areas that have average levels of GDPPC\n\n\n\n\n2.2.2 Plotting Moran Scatterplot (with Standardised Variable)\nUse scale() function to center and scale the variables\n\ncentering: subtracts the mean\nscaling: divided the variable by standard deviation\n\n\nhunan$Z.GDPPC <- scale(hunan$GDPPC) %>% \n  as.vector \n\nDoing similarly as above, plot the Moran scatterplot.\n\nnci2 <- moran.plot(\n  hunan$Z.GDPPC, rswm_q,\n  labels = as.character(hunan$County),\n  xlab = \"z-GDPPC 2012\",\n  ylab = \"Spatially Lag z-GDPPC 2012\"\n)\n\n\n\n\n\n\n2.2.3 Prepare LISA Map Classes\n\nquadrant <- vector(mode=\"numeric\",length=nrow(localMI))\n\nDerive the spatially lagged variable of interest (i.e. GDPPC) and center the spatially lagged variable around its mean:\n\nhunan$lag_GDPPC <- lag.listw(rswm_q, hunan$GDPPC)\nDV <- hunan$lag_GDPPC - mean(hunan$lag_GDPPC)     \n\nNext, center the local Moran’s I around the mean:\n\nLM_I <- localMI[,1] - mean(localMI[,1])    \n\nSet the statistical significance level for the local Moran:\n\nsignif <- 0.05       \n\nDefine the 4 categories: low-low, low-high, high-low, and high-high:\n\nquadrant[DV <0 & LM_I>0] <- 1\nquadrant[DV >0 & LM_I<0] <- 2\nquadrant[DV <0 & LM_I<0] <- 3  \nquadrant[DV >0 & LM_I>0] <- 4      \n\nPlace non-significant Moran in category 0:\n\nquadrant[localMI[,5]>signif] <- 0\n\nCombined Code:\n\nquadrant <- vector(mode=\"numeric\",length=nrow(localMI))\nhunan$lag_GDPPC <- lag.listw(rswm_q, hunan$GDPPC)\nDV <- hunan$lag_GDPPC - mean(hunan$lag_GDPPC)     \nLM_I <- localMI[,1]   \nsignif <- 0.05       \nquadrant[DV <0 & LM_I>0] <- 1\nquadrant[DV >0 & LM_I<0] <- 2\nquadrant[DV <0 & LM_I<0] <- 3  \nquadrant[DV >0 & LM_I>0] <- 4    \nquadrant[localMI[,5]>signif] <- 0\n\n\n\n2.2.4 Plotting LISA Map\n\nhunan.localMI$quadrant <- quadrant\ncolors <- c(\"#ffffff\", \"#2c7bb6\", \"#abd9e9\", \"#fdae61\", \"#d7191c\")\nclusters <- c(\"insignificant\", \"low-low\", \"low-high\", \"high-low\", \"high-high\")\n\ntm_shape(hunan.localMI) +\n  tm_fill(col = \"quadrant\", \n          style = \"cat\", \n          palette = colors[c(sort(unique(quadrant)))+1], \n          labels = clusters[c(sort(unique(quadrant)))+1],\n          popup.vars = c(\"\")) +\n  tm_view(set.zoom.limits = c(11,17)) +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\n2.2.4.1 Comparing Local Moran’s I Values Map and Corresponding p-values Map\n\ngdppc <- qtm(hunan, \"GDPPC\")\n\nhunan.localMI$quadrant <- quadrant\ncolors <- c(\"#ffffff\", \"#2c7bb6\", \"#abd9e9\", \"#fdae61\", \"#d7191c\")\nclusters <- c(\"insignificant\", \"low-low\", \"low-high\", \"high-low\", \"high-high\")\n\nLISAmap <- tm_shape(hunan.localMI) +\n  tm_fill(col = \"quadrant\", \n          style = \"cat\", \n          palette = colors[c(sort(unique(quadrant)))+1], \n          labels = clusters[c(sort(unique(quadrant)))+1],\n          popup.vars = c(\"\")) +\n  tm_view(set.zoom.limits = c(11,17)) +\n  tm_borders(alpha=0.5)\n\ntmap_arrange(gdppc, LISAmap, \n             asp=1, ncol=2)"
  },
  {
    "objectID": "handson_ex/HE7/HE7.html#hot-spot-and-cold-spot-area-analysis",
    "href": "handson_ex/HE7/HE7.html#hot-spot-and-cold-spot-area-analysis",
    "title": "Hands-on Exercise 7: Global and Local Measures of Spatial Autocorrelation",
    "section": "2.3 Hot Spot and Cold Spot Area Analysis",
    "text": "2.3 Hot Spot and Cold Spot Area Analysis\nHot spot: a region/value that is higher relative to its surroundings.\n\n2.3.1 Getis and Ord’s G-Statistis\nDetects spatial anomalies by looking at neighbours within a defined proxiity to identify where high or low values cluster spatially.\n\nstatistically significant hot-spots: areas of high values where other areas within a neighbourhood range also share high values\n\n3 Steps:\n\nDerive spatial weight matrix\nCompute Gi statistics\nMap Gi statistics\n\n\n\n2.3.2 Step 1: Derive Distance-based Weight Matrix\n\n2.3.2.1 Derive the Centroid\n\nlongitude <- map_dbl(hunan$geometry, ~st_centroid(.x)[[1]])\nlatitude <- map_dbl(hunan$geometry, ~st_centroid(.x)[[2]])\ncoords <- cbind(longitude, latitude)\n\n\n\n2.3.2.2 Determine Cut-off Distance\n\nk1 <- knn2nb(knearneigh(coords))\nk1dists <- unlist(nbdists(k1, coords, longlat = TRUE))\nsummary(k1dists)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  24.79   32.57   38.01   39.07   44.52   61.79 \n\n\n\nlargest first nearest neighbour distance: 61.79km\n\nuse as upper threshold such that all unit areas will have at least 1 neighbour\n\n\n\n\n2.3.2.3 Compute Fixed Distance Weight Matrix\n\nwm_d62 <- dnearneigh(coords, 0, 62, longlat = TRUE)\nwm_d62\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 324 \nPercentage nonzero weights: 4.183884 \nAverage number of links: 3.681818 \n\n\nConvert the nb object into spatial weights object.\n\nwm62_lw <- nb2listw(wm_d62, style = 'B')\nsummary(wm62_lw)\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 324 \nPercentage nonzero weights: 4.183884 \nAverage number of links: 3.681818 \nLink number distribution:\n\n 1  2  3  4  5  6 \n 6 15 14 26 20  7 \n6 least connected regions:\n6 15 30 32 56 65 with 1 link\n7 most connected regions:\n21 28 35 45 50 52 82 with 6 links\n\nWeights style: B \nWeights constants summary:\n   n   nn  S0  S1   S2\nB 88 7744 324 648 5440\n\n\n\n\n2.3.2.4 Compute Adaptive Distance Weight Matrix\n\nknn <- knn2nb(knearneigh(coords, k=8))\nknn\n\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 704 \nPercentage nonzero weights: 9.090909 \nAverage number of links: 8 \nNon-symmetric neighbours list\n\n\n\nknn_lw <- nb2listw(knn, style = 'B')\nsummary(knn_lw)\n\nCharacteristics of weights list object:\nNeighbour list object:\nNumber of regions: 88 \nNumber of nonzero links: 704 \nPercentage nonzero weights: 9.090909 \nAverage number of links: 8 \nNon-symmetric neighbours list\nLink number distribution:\n\n 8 \n88 \n88 least connected regions:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 with 8 links\n88 most connected regions:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 with 8 links\n\nWeights style: B \nWeights constants summary:\n   n   nn  S0   S1    S2\nB 88 7744 704 1300 23014\n\n\n\n\n\n2.3.3 Steps 2 & 3: Computing and Mapping Gi Statistics\n\n2.3.3.1 Gi Statistics (using Fixed Distance)\n\nfips <- order(hunan$County)\ngi.fixed <- localG(hunan$GDPPC, wm62_lw)\ngi.fixed\n\n [1]  0.436075843 -0.265505650 -0.073033665  0.413017033  0.273070579\n [6] -0.377510776  2.863898821  2.794350420  5.216125401  0.228236603\n[11]  0.951035346 -0.536334231  0.176761556  1.195564020 -0.033020610\n[16]  1.378081093 -0.585756761 -0.419680565  0.258805141  0.012056111\n[21] -0.145716531 -0.027158687 -0.318615290 -0.748946051 -0.961700582\n[26] -0.796851342 -1.033949773 -0.460979158 -0.885240161 -0.266671512\n[31] -0.886168613 -0.855476971 -0.922143185 -1.162328599  0.735582222\n[36] -0.003358489 -0.967459309 -1.259299080 -1.452256513 -1.540671121\n[41] -1.395011407 -1.681505286 -1.314110709 -0.767944457 -0.192889342\n[46]  2.720804542  1.809191360 -1.218469473 -0.511984469 -0.834546363\n[51] -0.908179070 -1.541081516 -1.192199867 -1.075080164 -1.631075961\n[56] -0.743472246  0.418842387  0.832943753 -0.710289083 -0.449718820\n[61] -0.493238743 -1.083386776  0.042979051  0.008596093  0.136337469\n[66]  2.203411744  2.690329952  4.453703219 -0.340842743 -0.129318589\n[71]  0.737806634 -1.246912658  0.666667559  1.088613505 -0.985792573\n[76]  1.233609606 -0.487196415  1.626174042 -1.060416797  0.425361422\n[81] -0.837897118 -0.314565243  0.371456331  4.424392623 -0.109566928\n[86]  1.364597995 -1.029658605 -0.718000620\nattr(,\"cluster\")\n [1] Low  Low  High High High High High High High Low  Low  High Low  Low  Low \n[16] High High High High Low  High High Low  Low  High Low  Low  Low  Low  Low \n[31] Low  Low  Low  High Low  Low  Low  Low  Low  Low  High Low  Low  Low  Low \n[46] High High Low  Low  Low  Low  High Low  Low  Low  Low  Low  High Low  Low \n[61] Low  Low  Low  High High High Low  High Low  Low  High Low  High High Low \n[76] High Low  Low  Low  Low  Low  Low  High High Low  High Low  Low \nLevels: Low High\nattr(,\"gstari\")\n[1] FALSE\nattr(,\"call\")\nlocalG(x = hunan$GDPPC, listw = wm62_lw)\nattr(,\"class\")\n[1] \"localG\"\n\n\n\nrepresented as Z-score\n\nhigher value: greater intensity of clustering\ndirection (positive/negative): indicates high or low clusters\n\n\nJoin the Gi values to their corresponding hunan sf data frame:\n\nhunan.gi <- cbind(hunan, as.matrix(gi.fixed)) %>%\n  rename(gstat_fixed = as.matrix.gi.fixed.)\n\n\n\n2.3.3.2 Mapping (Fixed Distance Weights)\n\ngdppc <- qtm(hunan, \"GDPPC\")\n\nGimap <-tm_shape(hunan.gi) +\n  tm_fill(col = \"gstat_fixed\", \n          style = \"pretty\",\n          palette=\"-RdBu\",\n          title = \"local Gi\") +\n  tm_borders(alpha = 0.5)\n\ntmap_arrange(gdppc, Gimap, asp=1, ncol=2)\n\n\n\n\n\n\n2.3.3.3 Gi Statistics (using Adaptive Distance)\n\nfips <- order(hunan$County)\ngi.adaptive <- localG(hunan$GDPPC, knn_lw)\nhunan.gi <- cbind(hunan, as.matrix(gi.adaptive)) %>%\n  rename(gstat_adaptive = as.matrix.gi.adaptive.)\n\n\n\n2.3.3.4 Mapping (Adaptive Distance Weights)\n\ngdppc<- qtm(hunan, \"GDPPC\")\n\nGimap <- tm_shape(hunan.gi) + \n  tm_fill(col = \"gstat_adaptive\", \n          style = \"pretty\", \n          palette=\"-RdBu\", \n          title = \"local Gi\") + \n  tm_borders(alpha = 0.5)\n\ntmap_arrange(\n  gdppc, Gimap, asp = 1, ncol = 2\n)"
  },
  {
    "objectID": "inclass_ex/ICE7/ICE7.html",
    "href": "inclass_ex/ICE7/ICE7.html",
    "title": "In Class Exercise 7: Global and Local Measures of Spatial Autocorrelation (sfdep Methods)",
    "section": "",
    "text": "Describes the presence of systematic spatial variation in a variable.\n\ntry to reject null hypothesis: phenomenon does not depend on space\n\nValues:\n\nclose to 1: positive spatial autocorrelation\n0: no correlation\nclose to -1: negative spatial autocorrelation\n\n\n\n\nClustering\nNeighbours are similar\nCompatible with diffusion\n\n\n\n\nSpatial relationship of variable values, existence of statistical dependence in a collection of random variables (each associated with a different geographical location)\n\n\n\n\n\nDescribes how features differ from the values in the study area as a whole (requires weight matrix).\n\nResults (Z-value):\n\npositive (>0): Clustered, observations tend to be similar\nnegative (<0): Dispersed, observations tend to be dissimilar\napprox. 0: observations are arranged randomly over space\n\n\n\n\n\nDescribes how features differ from their immediate neighbours\n\nResults (Z-value):\n\nLarge c value (>1): dispersed, observations tend to be dissimilar\nSmall c value (<1): clustered, observations tend to be similar\n=1: observations arranged randomly over space\n\n\n\n\n\n\nuse two-tailed test\nnsim = 99 (100 simulations)\nconfident interval: alpha = 0.05\n\n\n\n\nComputes overall concentrations/lack of concentration in all pairs that are neighbours given the definition of neighbouring areas\n\ndifferences (2): not finding differences but combined values, depends on distance weight instead of proximity weight\n\n\n\nonly accepts positive values for variables\n\n\n\n\n\n\nDecompose from global measures.\n\ndetect clusters/outliers\nidentify hot/cold spot areas\nassess assumptions of stationary\nidentify distances beyond which no discernible association obtains(???)\n\n\n\nIndication of extent of significant spatial clustering of similar values around the observation\n\nsum of LISAs for all observations: proportional to global indicator of spatial association\nlocal Moran’s I\ndetect clusters AND outliers\n\n\n\n\nOutlier: significant and negative if location is associated with relatively low values in surrounding locations\nCluster: significant and positive if location is associated with relatively high values of surrounding locations\n\np-value for feature must be small enough for cluster/outlier to be considered statistically significant\n\n\nPositive Autocorrelation (Cluster):\n\nHigh-high: is high and neighbours are high\nLow-low: is low and neighbours are low\n\nNegative Autocorrelation (Outlier):\n\nLow-high: is low outlier among high neighbours\nHigh-low: is high outlier among low neighbours\n\n\n\n\n\nDecompose local G-stats, based on distance. Only detects clusters, but differentiate high-high (hot) or low-low clusters (cold).\n\nUse Getis-Ord Gi and Gi\n2 calibrations: one takes into consideration of it’s distance (??)\n\n\n\nhot spot area: significant and positive, location is associated with relatively high values of the surrounding locations\ncold spot area: significant and negative, location is associated with relatively low values in surrounding locations\n\n\n\n\nFor time series. because data can evolve overtime."
  },
  {
    "objectID": "inclass_ex/ICE7/ICE7.html#setting-up",
    "href": "inclass_ex/ICE7/ICE7.html#setting-up",
    "title": "In Class Exercise 7: Global and Local Measures of Spatial Autocorrelation (sfdep Methods)",
    "section": "2.1 Setting Up",
    "text": "2.1 Setting Up\n\n2.1.1 Installing and Loading Packages\n\npacman::p_load(sf, sfdep, tmap, tidyverse, zoo)\n\n\n\n2.1.2 Importing Data\n\n2.1.2.1 Geospatial Data: Hunan\n\nhunan <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"Hunan\"\n)\n\nReading layer `Hunan' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE7\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\n\n\n2.1.2.2 Aspatial Data: Hunan 2012\n\nhunan2012 <- read.csv(\"data/aspatial/Hunan_2012.csv\")\n\n\n\n2.1.2.3 Combining Datasets\n\nhunan <- left_join(hunan, hunan2012) %>%\n  select(1:4, 7, 15)"
  },
  {
    "objectID": "inclass_ex/ICE7/ICE7.html#global-local-measure-of-spatial-autocorrelation",
    "href": "inclass_ex/ICE7/ICE7.html#global-local-measure-of-spatial-autocorrelation",
    "title": "In Class Exercise 7: Global and Local Measures of Spatial Autocorrelation (sfdep Methods)",
    "section": "2.2 Global & Local Measure of Spatial Autocorrelation",
    "text": "2.2 Global & Local Measure of Spatial Autocorrelation\n\n2.2.1 Computing Contiguity Weights (Queen’s Method)\n\nwm_q <- hunan %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wt = st_weights(nb, style = \"W\"),\n    .before = 1\n  )\n\n\nnb: neighbour list\nwt: weight matrix, “W”: row standardised\n\n\n\n2.2.2 Global Moran’s I\n(Optional) Computing Moran’s I with global_moran(variable, nb, wt):\n\nmoranI <- global_moran(\n  wm_q$GDPPC, wm_q$nb, wm_q$wt\n)\n\n\nmoranI: list of 2 values\n\nI: 0.301\nK: 7.64\n\n\nPerforming Global Moran’s I test with global_moran_test(variable, nb, wt):\n\nglobal_moran_test(\n  wm_q$GDPPC, wm_q$nb, wm_q$wt\n)\n\n\n    Moran I test under randomisation\n\ndata:  x  \nweights: listw    \n\nMoran I statistic standard deviate = 4.7351, p-value = 1.095e-06\nalternative hypothesis: greater\nsample estimates:\nMoran I statistic       Expectation          Variance \n      0.300749970      -0.011494253       0.004348351 \n\n\n\np-value: whether it is significant enough to reject null value\n\n1.095e-06 << 0.05 (alpha-value): have enough statistical evidence to reject the null hypothesis\n\nalternative hypothesis: greater because I statistics/Variance(??) is positive.\n\n\n2.2.2.1 Permutation Test (Simulation)\n\nset.seed(1234)\n\n\nensure simulation results are reproducible, globally\n\n\nglobal_moran_perm(\n  wm_q$GDPPC, wm_q$nb, wm_q$wt, nsim = 99\n)\n\n\n    Monte-Carlo simulation of Moran I\n\ndata:  x \nweights: listw  \nnumber of simulations + 1: 100 \n\nstatistic = 0.30075, observed rank = 100, p-value < 2.2e-16\nalternative hypothesis: two.sided\n\n\n\np-value < 0.05: significant enough to reject null hypothesis\n\n\n\n\n2.2.3 Local Moran’s I\n\nlisa <- wm_q %>%\n  mutate(\n    local_moran = local_moran(\n      GDPPC, nb, wt, nsim = 99\n    ),\n    .before = 1\n  ) %>%\n  unnest(local_moran)\nlisa\n\nSimple feature collection with 88 features and 20 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n# A tibble: 88 × 21\n         ii        eii   var_ii    z_ii    p_ii p_ii_…¹ p_fol…² skewn…³ kurtosis\n      <dbl>      <dbl>    <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>    <dbl>\n 1 -0.00147  0.00177    4.18e-4 -0.158  0.874      0.82    0.41  -0.812  0.652  \n 2  0.0259   0.00641    1.05e-2  0.190  0.849      0.96    0.48  -1.09   1.89   \n 3 -0.0120  -0.0374     1.02e-1  0.0796 0.937      0.76    0.38   0.824  0.0461 \n 4  0.00102 -0.0000349  4.37e-6  0.506  0.613      0.64    0.32   1.04   1.61   \n 5  0.0148  -0.00340    1.65e-3  0.449  0.654      0.5     0.25   1.64   3.96   \n 6 -0.0388  -0.00339    5.45e-3 -0.480  0.631      0.82    0.41   0.614 -0.264  \n 7  3.37    -0.198      1.41e+0  3.00   0.00266    0.08    0.04   1.46   2.74   \n 8  1.56    -0.265      8.04e-1  2.04   0.0417     0.08    0.04   0.459 -0.519  \n 9  4.42     0.0450     1.79e+0  3.27   0.00108    0.02    0.01   0.746 -0.00582\n10 -0.399   -0.0505     8.59e-2 -1.19   0.234      0.28    0.14  -0.685  0.134  \n# … with 78 more rows, 12 more variables: mean <fct>, median <fct>,\n#   pysal <fct>, nb <nb>, wt <list>, NAME_2 <chr>, ID_3 <int>, NAME_3 <chr>,\n#   ENGTYPE_3 <chr>, County <chr>, GDPPC <int>, geometry <POLYGON [°]>, and\n#   abbreviated variable names ¹​p_ii_sim, ²​p_folded_sim, ³​skewness\n\n\n\nunnest(): convert list to value for future plotting\noutput: lisa table with new variables (Ii: Moran stats., z_ii: standardised, p_ii: p-value)\n\nmean, median and pysal: 4 quadrants labelled\n\nmean and pysal usually the same, usually use mean\n\n\n\n\n\n2.2.4 Plotting Local Moran I\n\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_fill(\"ii\") +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\n2.2.4.1 p-value (p_ii)\n* Better to plot simulated results (e.g. p_ii_sim) > p_ii (raw value): ensure results are more stable\n\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_fill(\"p_ii_sim\") +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\n\n2.2.4.2 Combining the 2 plots\n\nlisa_sig <- lisa %>%\n  filter(p_ii < 0.05)\n\ntmap_mode(\"plot\")\ntm_shape(lisa) +\n  tm_polygons() +\n  tm_borders(alpha = 0.5) +\ntm_shape(lisa_sig) +\n  tm_fill(\"mean\") +\n  tm_borders(alpha = 0.5)\n\n\n\n\n*Should have one more category called not significant. (follow hands on exercise example!!)*\n\n\n\n2.2.5 Hot and Cold Spot Area Analysis\nGenerally use G* local_gstar_perm():\n\nHCSA <- wm_q %>%\n  mutate(\n    local_Gi = local_gstar_perm(\n      GDPPC, nb, wt, nsim = 99\n    ),\n    .before = 1\n  ) %>%\n  unnest(local_Gi)\nHCSA\n\nSimple feature collection with 88 features and 16 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n# A tibble: 88 × 17\n    gi_star   e_gi     var_gi  p_value p_sim p_fol…¹ skewn…² kurto…³ nb    wt   \n      <dbl>  <dbl>      <dbl>    <dbl> <dbl>   <dbl>   <dbl>   <dbl> <nb>  <lis>\n 1 -0.00567 0.0115 0.00000812  9.95e-1  0.82    0.41   1.03    1.23  <int> <dbl>\n 2 -0.235   0.0110 0.00000581  8.14e-1  1       0.5    0.912   1.05  <int> <dbl>\n 3  0.298   0.0114 0.00000776  7.65e-1  0.7     0.35   0.455  -0.732 <int> <dbl>\n 4  0.145   0.0121 0.0000111   8.84e-1  0.64    0.32   0.900   0.726 <int> <dbl>\n 5  0.356   0.0113 0.0000119   7.21e-1  0.64    0.32   1.08    1.31  <int> <dbl>\n 6 -0.480   0.0116 0.00000706  6.31e-1  0.82    0.41   0.364  -0.676 <int> <dbl>\n 7  3.66    0.0116 0.00000825  2.47e-4  0.02    0.01   0.909   0.664 <int> <dbl>\n 8  2.14    0.0116 0.00000714  3.26e-2  0.16    0.08   1.13    1.48  <int> <dbl>\n 9  4.55    0.0113 0.00000656  5.28e-6  0.02    0.01   1.36    4.14  <int> <dbl>\n10  1.61    0.0109 0.00000341  1.08e-1  0.18    0.09   0.269  -0.396 <int> <dbl>\n# … with 78 more rows, 7 more variables: NAME_2 <chr>, ID_3 <int>,\n#   NAME_3 <chr>, ENGTYPE_3 <chr>, County <chr>, GDPPC <int>,\n#   geometry <POLYGON [°]>, and abbreviated variable names ¹​p_folded_sim,\n#   ²​skewness, ³​kurtosis\n\n\n\n2.2.5.1 Plot\n\ntmap_mode(\"plot\")\ntm_shape(HCSA) +\n  tm_fill(\"gi_star\") +\n  tm_borders(alpha = 0.5) +\n  tm_view(set.zoom.limits = c(6,8))\n\n\n\n\n\ntmap_mode(\"plot\")\ntm_shape(HCSA) +\n  tm_fill(\"p_sim\") +\n  tm_borders(alpha = 0.5)\n\n\n\n\n\ninterested in values smaller than 0.05, majority are more than 0.05\n\nshould change the categories to sth smaller!!"
  },
  {
    "objectID": "inclass_ex/ICE7/ICE7.html#create-a-space-time-cube",
    "href": "inclass_ex/ICE7/ICE7.html#create-a-space-time-cube",
    "title": "In Class Exercise 7: Global and Local Measures of Spatial Autocorrelation (sfdep Methods)",
    "section": "3.1 Create a Space Time Cube",
    "text": "3.1 Create a Space Time Cube\n\nGDPPC <- read.csv(\"data/aspatial/Hunan_GDPPC.csv\")\n\n\nGDPPC_st <- spacetime(\n  GDPPC, hunan,\n  .loc_col = \"County\",\n  .time_col = \"Year\"\n)\n\n\nspatial and aspatial data are nested"
  },
  {
    "objectID": "inclass_ex/ICE7/ICE7.html#spatial-autocorrelation-1",
    "href": "inclass_ex/ICE7/ICE7.html#spatial-autocorrelation-1",
    "title": "In Class Exercise 7: Global and Local Measures of Spatial Autocorrelation (sfdep Methods)",
    "section": "3.2 Spatial Autocorrelation",
    "text": "3.2 Spatial Autocorrelation\n\n3.2.1 Computing nb and wt\n\nGDPPC_nb <- GDPPC_st %>%\n  activate(\"geometry\") %>%\n  mutate(\n    nb = include_self(st_contiguity(geometry)),\n    wt = st_weights(nb)\n  ) %>%\n  set_nbs(\"nb\") %>%\n  set_wts(\"wt\")\n\n\n\n3.2.2 Computing G*\n\n#gi_stars <- GDPPC_nb %>%\n  #group_by(Year) %>%\n  #mutate(gi_star = local_gstar_perm(\n    #GDPPC, nb, wt, nsim = 99\n  #)) %>%\n  #unnest(gi_star)\n#gi_stars\n\n\n\n3.2.3 Mann-Kendall Test\n\n#cbg <- gi_stars %>%\n  #ungroup() %>%\n  #filter(County == \"Changsa\") %>%"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html",
    "href": "take_home_ex/THE2/THE2.html",
    "title": "Take-home Exercise 2",
    "section": "",
    "text": "Understanding how Covid-19 vaccination rate is distributed around DKI Jakarta and how it changes over time.\n\n\n\n\n\n\nData\nFormat (Type)\nDescription\nSource\n\n\n\n\nRiwayat File Vaksinasi DKI Jakarta\nExcel (Aspatial)\nDetails the daily number of vaccinations in Jakarta by person type and sub-district (Only the first day of each month is used)\nRiwatat File Vaksinasi DKI Jakarta (2022)\n\n\nDKI Jakarta Adminstration Boundary 2019\nShapefile (Geospatial)\nDKI Jakarta administrative boundaries\nIndonesia Geospasial (2019)\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nFor the Vaksinasi DKI Jakarta data for March 2022, there was no available link to 1 March 2022 data. Thus for March 2022, the first day available, 2 March 2022, will be used instead."
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#installing-and-loading-packages",
    "href": "take_home_ex/THE2/THE2.html#installing-and-loading-packages",
    "title": "Take-home Exercise 2",
    "section": "2.1 Installing and Loading Packages",
    "text": "2.1 Installing and Loading Packages\n\npacman::p_load(sf, tmap, sfdep, tidyverse, zoo, readxl, plotly, Kendall, ggplot2, dplyr)\n\n\nsf: importing and handling geospatial data\ntidyverse: wrangling attribute data\nsfdep: newer package of spdep (does not require conversion to sp)\ntmap: prepare cartographic quality chropleth maps\nzoo: for regular and irregular time series\nreadxl: read excel (xlsx) format\nplotly: interactive web graphics from ggplot2 graphs\nKendall: to perform Mann-Kendall test\nggplot2: plot temporal trend\ndplyr: join_by() function"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#dki-jakarta-administrative-boundary-2019",
    "href": "take_home_ex/THE2/THE2.html#dki-jakarta-administrative-boundary-2019",
    "title": "Take-home Exercise 2",
    "section": "2.2 DKI Jakarta Administrative Boundary 2019",
    "text": "2.2 DKI Jakarta Administrative Boundary 2019\n\n2.2.1 Importing Data\nTo import a shapefile, use st_read() where dsn is the targeted directory and layer is the name of the files.\n\njkt <- st_read(\n  dsn = \"data/geospatial\",\n  layer = \"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA\"\n)\n\nReading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source \n  `D:\\bellekwang\\IS415\\take_home_ex\\THE2\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 269 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322\nGeodetic CRS:  WGS 84\n\n\n\njkt is a multipolygon sf dataframe with 269 features\n\n\n\n2.2.2 Projection\nThe current geodetic CRS is WGS 84 which is wrong. Using st_transform(), change the CRS from WGS 84 to DGN95 (EPSG:23845), the national projected coordinates systems of Indonesia TM-3 zone 54.1.\n\njkt <- st_transform(jkt, crs = 23845)\nst_crs(jkt)\n\nCoordinate Reference System:\n  User input: EPSG:23845 \n  wkt:\nPROJCRS[\"DGN95 / Indonesia TM-3 zone 54.1\",\n    BASEGEOGCRS[\"DGN95\",\n        DATUM[\"Datum Geodesi Nasional 1995\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4755]],\n    CONVERSION[\"Indonesia TM-3 zone 54.1\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",139.5,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",0.9999,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",200000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",1500000,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"easting (X)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"northing (Y)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre.\"],\n        AREA[\"Indonesia - onshore east of 138°E.\"],\n        BBOX[-9.19,138,-1.49,141.01]],\n    ID[\"EPSG\",23845]]\n\n\n\n\n2.2.3 Data Cleaning\n\n2.2.3.1 Outer Island\nFirst, using tmap functions tm_shape() and tm_polygons(), plot out jkt to understand the area covered. I will also be adding the “DESA” label to identify which are the areas to exclude.\n\ntmap_mode(\"view\")\ntm_shape(jkt) +\n  tm_polygons() +\n  tm_text(\"DESA\") +\ntm_view(set.zoom.limits = c(9,12))\n\n\n\n\n\n\nThere are many outer islands shown on the plot above. As seen from the plot, the areas to be excluded are: Pulau Harapan, Pulau Kelapa, Pulau Panggang, Pulau Tidung, Pulau Pari and Pulau Untung Jawa.\n\nouter_islands <- c(\"PULAU HARAPAN\", \"PULAU KELAPA\", \"PULAU PANGGANG\", \"PULAU TIDUNG\", \"PULAU PARI\", \"PULAU UNTUNG JAWA\")\n\nUse the filter() function to remove the outer islands.\n\njkt <- jkt %>%\n  filter(!DESA %in% outer_islands)\n\nNow using the plot mode, plot out jkt and ensure all outer islands are excluded.\n\ntmap_mode(\"plot\")\ntm_shape(jkt) +\n  tm_polygons()\n\n\n\n\nAs you can see from the plot, all the outer islands are excluded.\n\n\n2.2.3.2 Unnecessary Fields\nOnly the first nine columns of the sf dataframe is relevant. Using the select() function, pick out the first nine columns.\n\njkt <- select(jkt, 1:9)\n\n\n\n\n2.2.4 Final jkt Data Frame\n\nst_geometry(jkt)\n\nGeometry set for 263 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -3644275 ymin: 663887.8 xmax: -3606237 ymax: 701380.1\nProjected CRS: DGN95 / Indonesia TM-3 zone 54.1\nFirst 5 geometries:"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#riwayat-file-vaksinasi-dki-jakarta",
    "href": "take_home_ex/THE2/THE2.html#riwayat-file-vaksinasi-dki-jakarta",
    "title": "Take-home Exercise 2",
    "section": "2.3 Riwayat File Vaksinasi DKI Jakarta",
    "text": "2.3 Riwayat File Vaksinasi DKI Jakarta\nThere are 12 excel files from July 2021 to June 2022 to be imported. Using read_excel() function, import the “Data Kelurahan” sheet.\n\njuly_2021 = read_excel(\"data/aspatial/july_2021.xlsx\", sheet = 1)\naug_2021 = read_excel(\"data/aspatial/aug_2021.xlsx\", sheet = \"Data Kelurahan\")\nsept_2021 = read_excel(\"data/aspatial/sept_2021.xlsx\", sheet = \"Data Kelurahan\")\noct_2021 = read_excel(\"data/aspatial/oct_2021.xlsx\", sheet = \"Data Kelurahan\")\nnov_2021 = read_excel(\"data/aspatial/nov_2021.xlsx\", sheet = \"Data Kelurahan\")\ndec_2021 = read_excel(\"data/aspatial/dec_2021.xlsx\", sheet = \"Data Kelurahan\")\njan_2022 = read_excel(\"data/aspatial/jan_2022.xlsx\", sheet = \"Data Kelurahan\")\nfeb_2022 = read_excel(\"data/aspatial/feb_2022.xlsx\", sheet = \"Data Kelurahan\")\nmar_2022 = read_excel(\"data/aspatial/mar_2022.xlsx\", sheet = \"Data Kelurahan\")\napr_2022 = read_excel(\"data/aspatial/apr_2022.xlsx\", sheet = \"Data Kelurahan\")\nmay_2022 = read_excel(\"data/aspatial/may_2022.xlsx\", sheet = \"Data Kelurahan\")\njune_2022 = read_excel(\"data/aspatial/june_2022.xlsx\", sheet = \"Data Kelurahan\")\n\n\n2.3.1 Data Cleaning\nI will exclude all the outer_islands identified earlier.\n\njuly_2021 <- july_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\naug_2021 <- aug_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\nsept_2021 <- sept_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\noct_2021 <- oct_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\nnov_2021 <- nov_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\ndec_2021 <- dec_2021 %>%\n  filter(!KELURAHAN %in% outer_islands)\njan_2022 <- jan_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\nfeb_2022 <- feb_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\nmar_2022 <- mar_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\napr_2022 <- apr_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\nmay_2022 <- may_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\njune_2022 <- june_2022 %>%\n  filter(!KELURAHAN %in% outer_islands)\n\nAll the tables now have 262 observations, 1 less than the jkt multipolygon dataframe.\n\n2.3.1.1 Unnecessary Columns\nOnly the first 6 columns are important to the exercise.\n\njuly_2021 <- select(july_2021, 1:6)\naug_2021 <- select(aug_2021, 1:6)\nsept_2021 <- select(sept_2021, 1:6)\noct_2021 <- select(oct_2021, 1:6)\nnov_2021 <- select(nov_2021, 1:6)\ndec_2021 <- select(dec_2021, 1:6)\njan_2022 <- select(jan_2022, 1:6)\nfeb_2022 <- select(feb_2022, 1:6)\nmar_2022 <- select(mar_2022, 1:6)\napr_2022 <- select(apr_2022, 1:6)\nmay_2022 <- select(may_2022, 1:6)\njune_2022 <- select(june_2022, 1:6)\n\nNow all the datasets only have 6 columns.\n\n\n\n2.3.2 Combining Datasets\nFirst, add a date column to each data frame using the mutate() and as.Date() function.\n\njuly_2021 <- july_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-07-01\"))\naug_2021 <- aug_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-08-01\"))\nsept_2021 <- sept_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-09-01\"))\noct_2021 <- oct_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-10-01\"))\nnov_2021 <- nov_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-11-01\"))\ndec_2021 <- dec_2021 %>%\n  mutate(dateMonth = as.Date(\"2021-12-01\"))\njan_2022 <- jan_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-01-01\"))\nfeb_2022 <- feb_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-02-01\"))\nmar_2022 <- mar_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-03-02\"))\napr_2022 <- apr_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-04-01\"))\nmay_2022 <- may_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-05-01\"))\njune_2022 <- june_2022 %>%\n  mutate(dateMonth = as.Date(\"2022-06-01\"))\n\nNext, I will combine all the 12 datasets into 1 dataset using rbind() function.\n\nvacc_data <- rbind(july_2021, aug_2021, sept_2021, oct_2021, nov_2021, dec_2021, jan_2022, feb_2022, mar_2022, apr_2022, may_2022, june_2022)\n\n\n\n2.3.3 Final Dataset\n\nhead(vacc_data)\n\n# A tibble: 6 × 7\n  `KODE KELURAHAN` `WILAYAH KOTA` KECAMATAN   KELUR…¹ SASARAN BELUM…² dateMonth \n  <chr>            <chr>          <chr>       <chr>     <dbl>   <dbl> <date>    \n1 <NA>             <NA>           <NA>        TOTAL   7739060 5041111 2021-07-01\n2 3172051003       JAKARTA UTARA  PADEMANGAN  ANCOL     20393   13272 2021-07-01\n3 3173041007       JAKARTA BARAT  TAMBORA     ANGKE     25785   16477 2021-07-01\n4 3175041005       JAKARTA TIMUR  KRAMAT JATI BALE K…   25158   18849 2021-07-01\n5 3175031003       JAKARTA TIMUR  JATINEGARA  BALI M…    8683    5743 2021-07-01\n6 3175101006       JAKARTA TIMUR  CIPAYUNG    BAMBU …   22768   15407 2021-07-01\n# … with abbreviated variable names ¹​KELURAHAN, ²​`BELUM VAKSIN`\n\n\nThe final vacc_data dataset has a total of 7 columns:\n\nIdentifiers: Kode Kelurahan / Kelurahan\nTargeted people to be vaccinated: Sasaran\nYet to be vaccinated: Belum Vaksin\nDate identifier: dateMonth"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#monthly-vaccination-rates-at-sub-district-level",
    "href": "take_home_ex/THE2/THE2.html#monthly-vaccination-rates-at-sub-district-level",
    "title": "Take-home Exercise 2",
    "section": "3.1 Monthly Vaccination Rates at Sub-district Level",
    "text": "3.1 Monthly Vaccination Rates at Sub-district Level\n\n3.1.1 Computing Monthly Vaccination Rates\n\nSASARAN (Targeted people to be vaccinated)\nBELUM VAKSIN (Yet to be vaccinated)\n\nUsing the equation below, compute the monthly vaccination rate and add the rate value as a new column ‘monthly_vacc_rate’ using the mutate() function.\n\\[\nMonthly Vaccination Rate = \\frac{(SASARAN - BELUMVAKSIN)}{SUM(SASARAN, BELUMVAKSIN)}\n\\]\n\nvacc_data <- vacc_data %>%\n  mutate(monthly_vacc_rate = (SASARAN - `BELUM VAKSIN`)/(SASARAN + `BELUM VAKSIN`))\n\n\n\n3.1.2 Combining Dataset and Shapefile\nUsing the left_join() function, with identifiers “DESA” and “KELURAHAN”, combine the vacc_data dataset with the jkt shapefile.\n\nvacc_july_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-07-01\")\njkt_july_2021 <- left_join(jkt, vacc_july_2021, by = c(\"DESA\" = \"KELURAHAN\" ))"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#choropleth-mapping",
    "href": "take_home_ex/THE2/THE2.html#choropleth-mapping",
    "title": "Take-home Exercise 2",
    "section": "3.2 Choropleth Mapping",
    "text": "3.2 Choropleth Mapping\nUsing the qtm() function, plot out the choropleth map for July 2021.\n\nqtm(jkt_july_2021, \"monthly_vacc_rate\", title = \"July 2021\", fill.palette=\"Greens\")\n\n\n\n\nAs seen above, there are missing monthly vaccinated rate values for some sub-districts. There is a mismatch and lack of vaccination data for these areas.\nI will leave them as missing values instead of giving a monthly vaccination rate of 0 to avoid confusion with actual areas with recorded 0 rates.\n\n3.2.1 Other Months\nRepeat the above steps for the next 11 months.\n\n\nCode\n#AUGUST 2021\nvacc_aug_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-08-01\")\njkt_aug_2021 <- left_join(jkt, vacc_aug_2021, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#SEPTEMBER 2021\nvacc_sept_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-09-01\")\njkt_sept_2021 <- left_join(jkt, vacc_sept_2021, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#OCTOBER 2021\nvacc_oct_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-10-01\")\njkt_oct_2021 <- left_join(jkt, vacc_oct_2021, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#NOVEMBER 2021\nvacc_nov_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-11-01\")\njkt_nov_2021 <- left_join(jkt, vacc_nov_2021, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#DECEMBER 2021\nvacc_dec_2021 <- vacc_data %>%\n  filter(dateMonth == \"2021-12-01\")\njkt_dec_2021 <- left_join(jkt, vacc_dec_2021, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#JANUARY 2022\nvacc_jan_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-01-01\")\njkt_jan_2022 <- left_join(jkt, vacc_jan_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#FEBRUARY 2022\nvacc_feb_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-02-01\")\njkt_feb_2022 <- left_join(jkt, vacc_feb_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#MARCH 2022\nvacc_mar_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-03-02\")\njkt_mar_2022 <- left_join(jkt, vacc_mar_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#APRIL 2022\nvacc_apr_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-04-01\")\njkt_apr_2022 <- left_join(jkt, vacc_apr_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#MAY 2022\nvacc_may_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-05-01\")\njkt_may_2022 <- left_join(jkt, vacc_may_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n#JUNE 2022\nvacc_june_2022 <- vacc_data %>%\n  filter(dateMonth == \"2022-06-01\")\njkt_june_2022 <- left_join(jkt, vacc_june_2022, by = c(\"DESA\" = \"KELURAHAN\" ))\n\n\n\n\nCode\nqtm(jkt_july_2021, \"monthly_vacc_rate\", title = \"July 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_aug_2021, \"monthly_vacc_rate\", title = \"Aug 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_sept_2021, \"monthly_vacc_rate\", title = \"Sept 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_oct_2021, \"monthly_vacc_rate\", title = \"Oct 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_nov_2021, \"monthly_vacc_rate\", title = \"Nov 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_dec_2021, \"monthly_vacc_rate\", title = \"Dec 2021\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_jan_2022, \"monthly_vacc_rate\", title = \"Jan 2022\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_feb_2022, \"monthly_vacc_rate\", title = \"Feb 2022\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_mar_2022, \"monthly_vacc_rate\", title = \"Mar 2022\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_apr_2022, \"monthly_vacc_rate\", title = \"Apr 2022\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_may_2022, \"monthly_vacc_rate\", title = \"May 2022\", fill.palette=\"Greens\")\n\n\n\n\n\nCode\nqtm(jkt_june_2022, \"monthly_vacc_rate\", title = \"June 2022\", fill.palette=\"Greens\")"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#spatial-patterns",
    "href": "take_home_ex/THE2/THE2.html#spatial-patterns",
    "title": "Take-home Exercise 2",
    "section": "3.3 Spatial Patterns",
    "text": "3.3 Spatial Patterns\nOver the year, the monthly vaccination rate has been on an overall increase as seen in the legend where the minimum rate rises from 0.10 in July 2021 to 0.6 in June 2022.\nSub-district with consistently high monthly vaccination rates (relative to other areas) is Kelapa Gading Timur. Whereas the sub-district with consistently low monthly rates (relative to other areas) includes Kebon Melati and Petamburan.\nMarch 2022 had the highest monthly vaccination rates.\nOverall, excluding the areas with missing values, by October 2021, the monthly vaccination rate across Jakarta has been meeting half of the targeted numbers and has only been increasing since."
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#computing-local-gi-of-monthly-vaccination-rate",
    "href": "take_home_ex/THE2/THE2.html#computing-local-gi-of-monthly-vaccination-rate",
    "title": "Take-home Exercise 2",
    "section": "4.1 Computing Local Gi* of Monthly Vaccination Rate",
    "text": "4.1 Computing Local Gi* of Monthly Vaccination Rate\nTo compute local Gi* statistics, it requires the neighbour list (using st_contiguity()) and the wts (using st_inverse_distance()).\nUsing jkt_july_2021 as an example:\n\njkt_july_2021 = jkt_july_2021 %>% drop_na(monthly_vacc_rate)\njkt_july_2021_idw <- jkt_july_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\n\n\n\n\n\n\nNote\n\n\n\nThere are ‘NA’ values in the monthly_vacc_rate column due to missing Kelurahans of the two datasets. These rows need to be dropped to compute the nb and wts.\n\n\nNext, calculate the local Gi* values using local_gstar_perm() with the nb and wt values computed in the previous step. Add the local Gi* values into a new sf dataset HCSA_july_2021 as a new column with the mutate() function, adding .before = 1 to place the new column as the first column. The unnest() function is used to make each element of the local_Gi list its own row.\n\nHCSA_july_2021 <- jkt_july_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\nHCSA_july_2021\n\nSimple feature collection with 252 features and 26 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -3644275 ymin: 663887.8 xmax: -3606237 ymax: 701380.1\nProjected CRS: DGN95 / Indonesia TM-3 zone 54.1\n# A tibble: 252 × 27\n   gi_star    e_gi     var_gi p_value p_sim p_fol…¹ skewn…² kurtosis nb    wts  \n     <dbl>   <dbl>      <dbl>   <dbl> <dbl>   <dbl>   <dbl>    <dbl> <nb>  <lis>\n 1   1.85  0.00395    1.24e-7 6.49e-2  0.08    0.04  0.302   0.672   <int> <dbl>\n 2   3.36  0.00394    7.20e-8 7.72e-4  0.02    0.01  0.0923 -0.382   <int> <dbl>\n 3  -0.527 0.00398    1.03e-7 5.98e-1  0.58    0.29  0.362   0.821   <int> <dbl>\n 4  -1.04  0.00399    9.92e-8 2.96e-1  0.3     0.15 -0.473   0.00898 <int> <dbl>\n 5   1.83  0.00401    8.77e-8 6.71e-2  0.06    0.03  0.275  -0.729   <int> <dbl>\n 6   1.13  0.00399    9.49e-8 2.60e-1  0.32    0.16  0.602   0.647   <int> <dbl>\n 7   1.10  0.00395    5.69e-8 2.70e-1  0.24    0.12  0.214   0.707   <int> <dbl>\n 8   0.151 0.00391    1.21e-7 8.80e-1  0.76    0.38  0.462  -0.246   <int> <dbl>\n 9   1.03  0.00396    4.91e-8 3.04e-1  0.36    0.18 -0.0247 -0.133   <int> <dbl>\n10  -0.252 0.00396    9.74e-8 8.01e-1  0.88    0.44  0.0987 -0.288   <int> <dbl>\n# … with 242 more rows, 17 more variables: OBJECT_ID <dbl>, KODE_DESA <chr>,\n#   DESA <chr>, KODE <dbl>, PROVINSI <chr>, KAB_KOTA <chr>, KECAMATAN.x <chr>,\n#   DESA_KELUR <chr>, JUMLAH_PEN <dbl>, `KODE KELURAHAN` <chr>,\n#   `WILAYAH KOTA` <chr>, KECAMATAN.y <chr>, SASARAN <dbl>,\n#   `BELUM VAKSIN` <dbl>, dateMonth <date>, monthly_vacc_rate <dbl>,\n#   geometry <MULTIPOLYGON [m]>, and abbreviated variable names ¹​p_folded_sim,\n#   ²​skewness"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#displaying-gi-maps",
    "href": "take_home_ex/THE2/THE2.html#displaying-gi-maps",
    "title": "Take-home Exercise 2",
    "section": "4.2 Displaying Gi* Maps",
    "text": "4.2 Displaying Gi* Maps\nUsing the plot mode, plot out both the Gi* Map and the p-value of Gi* using the HCDA_july_2021 sf dataset containing the newly added Gi* values. I will be using the “-RdBu” palette to better visualise the extreme positive and negative Gi* values which represents the hot and cold spot clusters respectively.\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_july_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of July 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_july_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#other-months-1",
    "href": "take_home_ex/THE2/THE2.html#other-months-1",
    "title": "Take-home Exercise 2",
    "section": "4.3 Other Months",
    "text": "4.3 Other Months\nRepeat the previous steps to the other 11 months.\n\n4.3.1 August 2021\n\n\nCode\njkt_aug_2021 = jkt_aug_2021 %>% drop_na(monthly_vacc_rate)\njkt_aug_2021_idw <- jkt_aug_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_aug_2021 <- jkt_aug_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_aug_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of August 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_aug_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.2 September 2021\n\n\nCode\njkt_sept_2021 = jkt_sept_2021 %>% drop_na(monthly_vacc_rate)\njkt_sept_2021_idw <- jkt_sept_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_sept_2021 <- jkt_sept_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_sept_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of September 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_sept_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.3 October 2021\n\n\nCode\njkt_oct_2021 = jkt_oct_2021 %>% drop_na(monthly_vacc_rate)\njkt_oct_2021_idw <- jkt_oct_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_oct_2021 <- jkt_oct_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_oct_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of October 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_oct_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.4 November 2021\n\n\nCode\njkt_nov_2021 = jkt_nov_2021 %>% drop_na(monthly_vacc_rate)\njkt_nov_2021_idw <- jkt_nov_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_nov_2021 <- jkt_nov_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_nov_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of November 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_nov_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.5 December 2021\n\n\nCode\njkt_dec_2021 = jkt_dec_2021 %>% drop_na(monthly_vacc_rate)\njkt_dec_2021_idw <- jkt_dec_2021 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_dec_2021 <- jkt_dec_2021_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_dec_2021) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of December 2021\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_dec_2021) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.6 January 2022\n\n\nCode\njkt_jan_2022 = jkt_jan_2022 %>% drop_na(monthly_vacc_rate)\njkt_jan_2022_idw <- jkt_jan_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_jan_2022 <- jkt_jan_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_jan_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of January 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_jan_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.7 February 2022\n\n\nCode\njkt_feb_2022 = jkt_feb_2022 %>% drop_na(monthly_vacc_rate)\njkt_feb_2022_idw <- jkt_feb_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_feb_2022 <- jkt_feb_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_feb_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of February 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_feb_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.8 March 2022\n\n\nCode\njkt_mar_2022 = jkt_mar_2022 %>% drop_na(monthly_vacc_rate)\njkt_mar_2022_idw <- jkt_mar_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_mar_2022 <- jkt_mar_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_mar_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of March 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_mar_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.9 April 2022\n\n\nCode\njkt_apr_2022 = jkt_apr_2022 %>% drop_na(monthly_vacc_rate)\njkt_apr_2022_idw <- jkt_apr_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_apr_2022 <- jkt_apr_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_apr_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of April 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_apr_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.10 May 2022\n\n\nCode\njkt_may_2022 = jkt_may_2022 %>% drop_na(monthly_vacc_rate)\njkt_may_2022_idw <- jkt_may_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_may_2022 <- jkt_may_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_may_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of May 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_may_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)\n\n\n\n\n\n\n\n4.3.11 June 2022\n\n\nCode\njkt_june_2022 = jkt_june_2022 %>% drop_na(monthly_vacc_rate)\njkt_june_2022_idw <- jkt_june_2022 %>%\n  mutate(\n    nb = st_contiguity(geometry),\n    wts = st_inverse_distance(\n      nb, geometry, scale = 1, alpha = 1\n    ),\n  .before = 1\n  )\n\nHCSA_june_2022 <- jkt_june_2022_idw %>% \n  mutate(local_Gi = local_gstar_perm(\n    monthly_vacc_rate, nb, wt, nsim = 99),\n         .before = 1) %>%\n  unnest(local_Gi)\n\ntmap_mode(\"plot\")\nmap1 <- tm_shape(HCSA_june_2022) +\n  tm_fill(\"gi_star\", palette = \"-RdBu\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"Gi* of June 2022\",\n            main.title.size = 0.8)\n\nmap2 <- tm_shape(HCSA_june_2022) +\n  tm_fill(\"p_value\",\n          breaks = c(0, 0.001, 0.01, 0.05, 1),\n              labels = c(\"0.001\", \"0.01\", \"0.05\", \"Not sig\"), palette = \"-Greens\") + \n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title = \"p-value of Gi*\",\n            main.title.size = 0.8)\n\ntmap_arrange(map1, map2, ncol = 2)"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#statistical-conclusion",
    "href": "take_home_ex/THE2/THE2.html#statistical-conclusion",
    "title": "Take-home Exercise 2",
    "section": "4.4 Statistical Conclusion",
    "text": "4.4 Statistical Conclusion\nAt the start of the year, the hot and cold spots were spreaded across the sub-districts. But overtime, the Gi* value bottom half of Jakarta has been significantly more positive. More specifically areas such as Jagakarsa, Ciganjur and their neighbours have been a extremely significant positive cluster especially at the later half of the year. This means that these sub-districts contains the highest monthly vaccination rates as a cluster as compared to other sub-district areas.\nKebon Melati has been a significant cold spot consistently throughout the year. Its neighbouring sub-districts are also visualised as cold spots throughout the year but is less significant than Kebon Melati itself. This means that Kebon Melati and its surrounding neighbours contains significantly lower monthly vaccination rates as a cluster as compared to other sub-district areas."
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#mann-kendall-test",
    "href": "take_home_ex/THE2/THE2.html#mann-kendall-test",
    "title": "Take-home Exercise 2",
    "section": "5.1 Mann-Kendall Test",
    "text": "5.1 Mann-Kendall Test\nTo perform the Mann-Kendall test, a time series cube needs to be created first.\n\n5.1.1 Creating Time Series Cube\nSince the spacetime() function only accepts the location column of 2 datasets to be the same, I will update the jkt “KESA” column to “KELURAHAN” for standardisation using the colnames() function.\n\ncolnames(jkt)[3] <- \"KELURAHAN\"\n\nNext, using the spacetime() function, create a spacetime object with “KELURAHAN” as the location column and “dateMonth” as the time column.\n\n#vacc_data = vacc_data %>% drop_na(c(\"KODE KELURAHAN\", \"WILAYAH KOTA\", \"KECAMATAN\"))\n#vacc_data_st <- spacetime(vacc_data, jkt, \".KELURAHAN\", \"dateMonth\")\nvacc_data_st <- spacetime(\n  .data = vacc_data, \n  .geometry = jkt, \n  .loc_col = \"KELURAHAN\", \n  .time_col = \"dateMonth\")\n\nThere are missing values in the spacetime object. It will not be a spacetime cube due to the lack of rows. Using complete_spacetime_cube() function, create a completed spacetime cube vacc_data_st_complete.\n\nvacc_data_st_complete <- complete_spacetime_cube(vacc_data_st)\n\n\nis_spacetime_cube(vacc_data_st_complete)\n\n[1] TRUE\n\n\nNow the spacetime cube is valid.\n\n\n5.1.2 Computing Spatial Weights\nBefore implementing the Mann-Kendall test, we need the nb and wt which will be computed similarly to the method use in the previous sections.\n\nvacc_st_nb <- vacc_data_st_complete %>%\n  activate(\"geometry\") %>%\n  mutate(nb = include_self(st_contiguity(geometry)),\n         wt = st_inverse_distance(nb, geometry,\n                                  scale = 1,\n                                  alpha = 1),\n         .before = 1) %>%\n  set_nbs(\"nb\") %>%\n  set_wts(\"wt\")\n\n\nhead(vacc_st_nb)\n\n# A tibble: 6 × 10\n  KELUR…¹ dateMonth  KODE …² WILAY…³ KECAM…⁴ SASARAN BELUM…⁵ month…⁶ nb    wt   \n  <chr>   <date>     <chr>   <chr>   <chr>     <dbl>   <dbl>   <dbl> <lis> <lis>\n1 KEAGUN… 2021-07-01 317303… JAKART… TAMAN …   15262   10275   0.195 <int> <dbl>\n2 GLODOK  2021-07-01 317303… JAKART… TAMAN …    7192    3561   0.338 <int> <dbl>\n3 HARAPA… 2021-07-01 317103… JAKART… KEMAYO…   19987   13623   0.189 <int> <dbl>\n4 CEMPAK… 2021-07-01 317103… JAKART… KEMAYO…   27330   18417   0.195 <int> <dbl>\n5 PASAR … 2021-07-01 317102… JAKART… SAWAH …   11656    6067   0.315 <int> <dbl>\n6 KARANG… 2021-07-01 317102… JAKART… SAWAH …   23056   15040   0.210 <int> <dbl>\n# … with abbreviated variable names ¹​KELURAHAN, ²​`KODE KELURAHAN`,\n#   ³​`WILAYAH KOTA`, ⁴​KECAMATAN, ⁵​`BELUM VAKSIN`, ⁶​monthly_vacc_rate\n\n\n\n\n5.1.3 Computing Gi*\nNext, I will calculate the Gi* value and add it into a new dataframe called gi_stars. Since there are missing values in the monthly_vacc_rate, I will drop the empty rows before calulating the Gi* values with the same method as the previous section.\n\nvacc_st_nb <- vacc_st_nb %>% drop_na(\"monthly_vacc_rate\")\ngi_stars <- vacc_st_nb %>% \n  mutate(gi_star = local_gstar_perm(\n    monthly_vacc_rate, nb, wt)) %>% \n  unnest(gi_star)\n\n\n\n5.1.4 Mann-Kendall Test\nTo perform the Mann-Kendall test, I will call the MannKendall() function on the newly calculated Gi* values into a list mk. I will then add this computed results into a new dataframe ehsa.\n\nehsa <- gi_stars %>%\n  group_by(KELURAHAN) %>%\n  summarise(mk = list(\n    unclass(MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk)"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#temporal-trends",
    "href": "take_home_ex/THE2/THE2.html#temporal-trends",
    "title": "Take-home Exercise 2",
    "section": "5.2 Temporal Trends",
    "text": "5.2 Temporal Trends\nAs mentioned in Section 3.3 Spatial Patterns, a few sub-districts with significant changes are: Jagakarsa, Ciganjur, and Kebon Melati. Out of curiousity, I will first be performing a temporal trend analysis on Ciganjur. For the remaining 2 sub-districts, I will be using the top 2 emerging sub-districts, where their p-values are the highest.\n\n5.2.1 CIGANJUR\n\ncgj <- gi_stars %>% \n  filter(KELURAHAN == \"CIGANJUR\") |> \n  select(KELURAHAN, dateMonth, gi_star)\n\nggplot(data = cgj, \n       aes(x = dateMonth, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()+\n  ggtitle(\"Ciganjur Temporal Trend\")\n\n\n\n\n\n5.2.1.1 Significance and Conclusion\n\nehsa %>% \n  filter(KELURAHAN == \"CIGANJUR\")\n\n# A tibble: 1 × 6\n  KELURAHAN   tau      sl     S     D  varS\n  <chr>     <dbl>   <dbl> <dbl> <dbl> <dbl>\n1 CIGANJUR  0.697 0.00203    46  66.0  213.\n\n\nUsing the calculated Mann-Kendall test, the p-value (sl column) of the trend in monthly vaccination rate in Ciganjur is 0.00079 (2 s.f.), stating that this upward trend is extremely significant.\n\n\n\n5.2.2 Emerging Sub-districts\nTo calculate the emerging sub-districts, use the arrange() function and arrange it via the p-value (sl) column and test statistics (tau) column.\n\nemerging <- ehsa %>% \n  arrange(sl, abs(tau)) %>% \n  slice(1:5)\n\n\nhead(emerging, n=2)\n\n# A tibble: 2 × 6\n  KELURAHAN   tau       sl     S     D  varS\n  <chr>     <dbl>    <dbl> <dbl> <dbl> <dbl>\n1 CIKOKO    0.848 0.000162    56  66.0  213.\n2 CIPULIR   0.848 0.000162    56  66.0  213.\n\n\nFor the remaining 2 sub-districts, I will be using Tugu Selatan and Jelambar to perform the temporal trend analysis.\n\n\n5.2.3 Tugu Selatan\n\ntgslt <- gi_stars %>% \n  filter(KELURAHAN == \"TUGU SELATAN\") |> \n  select(KELURAHAN, dateMonth, gi_star)\n\nggplot(data = tgslt, \n       aes(x = dateMonth, \n           y = gi_star)) +\n  geom_line() +\n  theme_light() +\n  ggtitle(\"Tugu Selatan Temporal Trend\")\n\n\n\n\n\n5.2.3.1 Significance and Conclusion\n\nehsa %>% \n  filter(KELURAHAN == \"TUGU SELATAN\")\n\n# A tibble: 1 × 6\n  KELURAHAN      tau     sl     S     D  varS\n  <chr>        <dbl>  <dbl> <dbl> <dbl> <dbl>\n1 TUGU SELATAN 0.576 0.0112    38  66.0  213.\n\n\nThere is an overall significant upward trend from July 2021 to June 2022 with a slight decrease around the October 2021 period.\n\n\n\n5.2.4 Jelambar\n\njlb <- gi_stars %>% \n  filter(KELURAHAN == \"JELAMBAR\") |> \n  select(KELURAHAN, dateMonth, gi_star)\n\nggplot(data = jlb, \n       aes(x = dateMonth, \n           y = gi_star)) +\n  geom_line() +\n  theme_light() +\n  ggtitle(\"Jelambar Temporal Trend\")\n\n\n\n\n\n5.2.4.1 Significance and Conclusion\n\nehsa %>% \n  filter(KELURAHAN == \"JELAMBAR\")\n\n# A tibble: 1 × 6\n  KELURAHAN   tau     sl     S     D  varS\n  <chr>     <dbl>  <dbl> <dbl> <dbl> <dbl>\n1 JELAMBAR  0.455 0.0467    30  66.0  213.\n\n\nThere is an overall significant upward trend from July 2021 to June 2022 with an exponential increase from August 2021 to January 2022."
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#ehsa-map",
    "href": "take_home_ex/THE2/THE2.html#ehsa-map",
    "title": "Take-home Exercise 2",
    "section": "5.3 EHSA Map",
    "text": "5.3 EHSA Map\nLastly, I will run a emerging hotspot analysis using emerging_hotspot_analysis() function on the “monthly_vacc_rate” variable of the completed spacetime cube, running for 100 tests.\n\nvacc_data_st_complete$monthly_vacc_rate[is.na(vacc_data_st_complete$monthly_vacc_rate)] <- 0\nehsa <- emerging_hotspot_analysis(\n  x = vacc_data_st_complete, \n  .var = \"monthly_vacc_rate\", \n  k = 1, \n  nsim = 99\n)\n\nI will then combine the computed ehsa into the jkt shapefile using the left_join() function with columns “KELURAHAN” from jkt and “location” from ehsa.\n\njkt_ehsa <- jkt %>%\n  left_join(ehsa, by = c(\"KELURAHAN\" = \"location\" ))\n\nTo plot out the significant emerging hotspot analysis results, I will filter out the results that have p-values lesser than 0.05 with the filter() function.\n\nehsa_sig <- jkt_ehsa  %>%\n  filter(p_value < 0.05)\ntmap_mode(\"view\")\ntm_shape(jkt_ehsa) +\n  tm_polygons() +\n  tm_borders(alpha = 0.5) +\n  tm_text(\"KELURAHAN\", size = 0.7) +\ntm_shape(ehsa_sig) +\n  tm_fill(\"classification\") + \n  tm_borders(alpha = 0.4) +\n  tm_view(set.zoom.limits = c(11,14))"
  },
  {
    "objectID": "take_home_ex/THE2/THE2.html#spatial-patterns-1",
    "href": "take_home_ex/THE2/THE2.html#spatial-patterns-1",
    "title": "Take-home Exercise 2",
    "section": "5.4 Spatial Patterns",
    "text": "5.4 Spatial Patterns\nMajority of the sub-districts have a classification of oscillating hotspot. This aligns with the previous Local Gi* maps with the bottom half being majority of the hotspot.\nSome notable sub-districts include:\n\nPetojo Utara: Persistent coldspot\nPademangan Timur: Intensifying hotspot\n\nIt is interesting how the areas I have mentioned to be significant earlier not remotely near the 2 sub-districts computed to be significant here."
  },
  {
    "objectID": "handson_ex/HE8/HE8.html",
    "href": "handson_ex/HE8/HE8.html",
    "title": "Hands-on Exercise 8",
    "section": "",
    "text": "pacman::p_load(olsrr, corrplot, ggpubr, sf, spdep, GWmodel, tmap, tidyverse, gtsummary)\n\n\nolsrr: build OLS and perform diagnostic tests\ncorrplot: multivariate data visualisation and analysis\nggpubr:\nGWmodel: calibrate geographical weighted family of models\ngtsummary:\n\n\n\n\n\n\n\nmpsz = st_read(\n  dsn = \"data/geospatial\",\n  layer = \"MP14_SUBZONE_WEB_PL\"\n)\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `D:\\bellekwang\\IS415\\handson_ex\\HE8\\data\\geospatial' using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\n\n\nEnsure that the CRS is has the correct ESPG code (3414).\n\nmpsz_svy21 <- st_transform(mpsz, 3414)\n\n\nst_crs(mpsz_svy21)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n\n\n\n\n\n\n\ncondo_resale = read_csv(\"data/aspatial/Condo_resale_2015.csv\")\n\n\n\n\n\ncondo_resale.sf <- st_as_sf(\n  condo_resale,\n  coords = c(\"LONGITUDE\", \"LATITUDE\"),\n  crs = 4326\n) %>%\n  st_transform(crs = 3414)\n\n\n\n\n\nhead(condo_resale.sf)\n\nSimple feature collection with 6 features and 21 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 22085.12 ymin: 29951.54 xmax: 41042.56 ymax: 34546.2\nProjected CRS: SVY21 / Singapore TM\n# A tibble: 6 × 22\n  POSTCODE SELLI…¹ AREA_…²   AGE PROX_…³ PROX_…⁴ PROX_…⁵ PROX_…⁶ PROX_…⁷ PROX_…⁸\n     <dbl>   <dbl>   <dbl> <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1   118635 3000000     309    30    7.94   0.166   2.52     6.62   1.77   0.0584\n2   288420 3880000     290    32    6.61   0.280   1.93     7.51   0.545  0.616 \n3   267833 3325000     248    33    6.90   0.429   0.502    6.46   0.378  0.141 \n4   258380 4250000     127     7    4.04   0.395   1.99     4.91   1.68   0.382 \n5   467169 1400000     145    28   11.8    0.119   1.12     6.41   0.565  0.461 \n6   466472 1320000     139    22   10.3    0.125   0.789    5.09   0.781  0.0994\n# … with 12 more variables: PROX_MRT <dbl>, PROX_PARK <dbl>,\n#   PROX_PRIMARY_SCH <dbl>, PROX_TOP_PRIMARY_SCH <dbl>,\n#   PROX_SHOPPING_MALL <dbl>, PROX_SUPERMARKET <dbl>, PROX_BUS_STOP <dbl>,\n#   NO_Of_UNITS <dbl>, FAMILY_FRIENDLY <dbl>, FREEHOLD <dbl>,\n#   LEASEHOLD_99YR <dbl>, geometry <POINT [m]>, and abbreviated variable names\n#   ¹​SELLING_PRICE, ²​AREA_SQM, ³​PROX_CBD, ⁴​PROX_CHILDCARE, ⁵​PROX_ELDERLYCARE,\n#   ⁶​PROX_URA_GROWTH_AREA, ⁷​PROX_HAWKER_MARKET, ⁸​PROX_KINDERGARTEN"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#statistical-graphics",
    "href": "handson_ex/HE8/HE8.html#statistical-graphics",
    "title": "Hands-on Exercise 8",
    "section": "2.1 Statistical Graphics",
    "text": "2.1 Statistical Graphics\n\n2.1.1 Selling Price\n\nggplot(\n  data = condo_resale.sf,\n  aes(x=`SELLING_PRICE`)\n) +\n  geom_histogram(\n    bins = 20, color = \"black\", fill = \"light blue\"\n  )\n\n\n\n\n\nThere is a right skewed distribution, more condominium units were transacted at relatively lower prices.\n\nTo normalise the distribution, use the log transformation and create a new column using the mutate() function.\n\ncondo_resale.sf <- condo_resale.sf %>%\n  mutate(`LOG_SELLING_PRICE` = log(SELLING_PRICE))\n\nPlotting the new transformed column:\n\nggplot(\n  data = condo_resale.sf,\n  aes(x=`LOG_SELLING_PRICE`)\n) +\n  geom_histogram(\n    bins = 20, color = \"black\", fill = \"light blue\"\n  )\n\n\n\n\n\nDistribution is relatively less skewed 😄"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#multiple-histogram-plots-distribution-of-variables",
    "href": "handson_ex/HE8/HE8.html#multiple-histogram-plots-distribution-of-variables",
    "title": "Hands-on Exercise 8",
    "section": "2.2 Multiple Histogram Plots Distribution of Variables",
    "text": "2.2 Multiple Histogram Plots Distribution of Variables\nTo draw multiple small histograms, use ggarange() to organise the number of rows and columns.\n\nAREA_SQM <- ggplot(data=condo_resale.sf, aes(x= `AREA_SQM`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nAGE <- ggplot(data=condo_resale.sf, aes(x= `AGE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CBD <- ggplot(data=condo_resale.sf, aes(x= `PROX_CBD`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_CHILDCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_CHILDCARE`)) + \n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_ELDERLYCARE <- ggplot(data=condo_resale.sf, aes(x= `PROX_ELDERLYCARE`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_URA_GROWTH_AREA <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_URA_GROWTH_AREA`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_HAWKER_MARKET <- ggplot(data=condo_resale.sf, aes(x= `PROX_HAWKER_MARKET`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_KINDERGARTEN <- ggplot(data=condo_resale.sf, aes(x= `PROX_KINDERGARTEN`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_MRT <- ggplot(data=condo_resale.sf, aes(x= `PROX_MRT`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PARK <- ggplot(data=condo_resale.sf, aes(x= `PROX_PARK`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_PRIMARY_SCH <- ggplot(data=condo_resale.sf, aes(x= `PROX_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nPROX_TOP_PRIMARY_SCH <- ggplot(data=condo_resale.sf, \n                               aes(x= `PROX_TOP_PRIMARY_SCH`)) +\n  geom_histogram(bins=20, color=\"black\", fill=\"light blue\")\n\nggarrange(AREA_SQM, AGE, PROX_CBD, PROX_CHILDCARE, PROX_ELDERLYCARE, \n          PROX_URA_GROWTH_AREA, PROX_HAWKER_MARKET, PROX_KINDERGARTEN, PROX_MRT,\n          PROX_PARK, PROX_PRIMARY_SCH, PROX_TOP_PRIMARY_SCH,  \n          ncol = 3, nrow = 4)"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#statistical-point-map",
    "href": "handson_ex/HE8/HE8.html#statistical-point-map",
    "title": "Hands-on Exercise 8",
    "section": "2.3 Statistical Point Map",
    "text": "2.3 Statistical Point Map\n\ntmap_mode(\"view\")\ntm_shape(mpsz_svy21)+\n  tm_polygons() +\n  tmap_options(check.and.fix = TRUE) +\ntm_shape(condo_resale.sf) +  \n  tm_dots(col = \"SELLING_PRICE\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(10,14))"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#simple-linear-regression",
    "href": "handson_ex/HE8/HE8.html#simple-linear-regression",
    "title": "Hands-on Exercise 8",
    "section": "3.1 Simple Linear Regression",
    "text": "3.1 Simple Linear Regression\nTo build a simple linear regression model, call the lm() function.\n\nformula = dependent variable ~ independent variable\n\n\ncondo.slr <- lm(\n  formula = SELLING_PRICE ~ AREA_SQM,\n  data = condo_resale.sf\n)\n\n\nsummary(condo.slr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM, data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3695815  -391764   -87517   258900 13503875 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -258121.1    63517.2  -4.064 5.09e-05 ***\nAREA_SQM      14719.0      428.1  34.381  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 942700 on 1434 degrees of freedom\nMultiple R-squared:  0.4518,    Adjusted R-squared:  0.4515 \nF-statistic:  1182 on 1 and 1434 DF,  p-value: < 2.2e-16\n\n\n\n\\(SELLINGPRICE = -258121.1 + 14719x1\\)\nR-sqaured: 0.4518\n\nmodel built is able to explain about 45% of the resale prices\n\np-value << 0.0001\n\nreject null hypothesis, mean is a good estimator of selling price\nslr model is a good estimator\n\n\n\n3.1.1 Best Fit Curve\n\nggplot(data=condo_resale.sf,  \n       aes(x=`AREA_SQM`, y=`SELLING_PRICE`)) +\n  geom_point() +\n  geom_smooth(method = lm)\n\n\n\n\n\nThere are a few statistical outliers with relatively high selling prices"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#multiple-linear-regression",
    "href": "handson_ex/HE8/HE8.html#multiple-linear-regression",
    "title": "Hands-on Exercise 8",
    "section": "3.2 Multiple Linear Regression",
    "text": "3.2 Multiple Linear Regression\n\n3.2.1 Relationship of Independent Variables\nUnderstanding the multicollinearity of the variables is important before building the MLR model. The independent variables should not be highly correlated to each other.\n\ncorrplot(cor(condo_resale[, 5:23]), diag = FALSE, order = \"AOE\",\n         tl.pos = \"td\", tl.cex = 0.5, method = \"number\", type = \"upper\")\n\n\n\n\n\nFreehold is highly correlated to LEASE_99YEAR, LEASE_99YEAR will be excluded\n\n\n\n3.2.2 Building the MLR Model\n\ncondo.mlr <- lm(\n  formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + PROX_KINDERGARTEN + PROX_MRT  + PROX_PARK + PROX_PRIMARY_SCH + PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD,\n  data=condo_resale.sf)\nsummary(condo.mlr)\n\n\nCall:\nlm(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + PROX_CHILDCARE + \n    PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_HAWKER_MARKET + \n    PROX_KINDERGARTEN + PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + \n    PROX_TOP_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_SUPERMARKET + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sf)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3475964  -293923   -23069   241043 12260381 \n\nCoefficients:\n                       Estimate Std. Error t value Pr(>|t|)    \n(Intercept)           481728.40  121441.01   3.967 7.65e-05 ***\nAREA_SQM               12708.32     369.59  34.385  < 2e-16 ***\nAGE                   -24440.82    2763.16  -8.845  < 2e-16 ***\nPROX_CBD              -78669.78    6768.97 -11.622  < 2e-16 ***\nPROX_CHILDCARE       -351617.91  109467.25  -3.212  0.00135 ** \nPROX_ELDERLYCARE      171029.42   42110.51   4.061 5.14e-05 ***\nPROX_URA_GROWTH_AREA   38474.53   12523.57   3.072  0.00217 ** \nPROX_HAWKER_MARKET     23746.10   29299.76   0.810  0.41782    \nPROX_KINDERGARTEN     147468.99   82668.87   1.784  0.07466 .  \nPROX_MRT             -314599.68   57947.44  -5.429 6.66e-08 ***\nPROX_PARK             563280.50   66551.68   8.464  < 2e-16 ***\nPROX_PRIMARY_SCH      180186.08   65237.95   2.762  0.00582 ** \nPROX_TOP_PRIMARY_SCH    2280.04   20410.43   0.112  0.91107    \nPROX_SHOPPING_MALL   -206604.06   42840.60  -4.823 1.57e-06 ***\nPROX_SUPERMARKET      -44991.80   77082.64  -0.584  0.55953    \nPROX_BUS_STOP         683121.35  138353.28   4.938 8.85e-07 ***\nNO_Of_UNITS             -231.18      89.03  -2.597  0.00951 ** \nFAMILY_FRIENDLY       140340.77   47020.55   2.985  0.00289 ** \nFREEHOLD              359913.01   49220.22   7.312 4.38e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 755800 on 1417 degrees of freedom\nMultiple R-squared:  0.6518,    Adjusted R-squared:  0.6474 \nF-statistic: 147.4 on 18 and 1417 DF,  p-value: < 2.2e-16\n\n\n\nLooking at the p-values of the independent variables, not all variables are statistically significant.\n\nPROX_HAWKER_MARKET, PROX_KINDERGARTEN, PROX_TOP_PRIMARY_SCH, PROX_SUPERMARKET\nThese variables should be removed.\n\n\n\ncondo.mlr1 <- lm(\n  formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_MRT  + PROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD,\n data=condo_resale.sf)\n\n\n\n3.2.3 Preparing Publication Quality Table (olsrr)\nUsing ols_regress() function, calibrate the revised model.\n\nols_regress(condo.mlr1)\n\n                             Model Summary                               \n------------------------------------------------------------------------\nR                       0.807       RMSE                     755957.289 \nR-Squared               0.651       Coef. Var                    43.168 \nAdj. R-Squared          0.647       MSE                571471422208.591 \nPred R-Squared          0.638       MAE                      414819.628 \n------------------------------------------------------------------------\n RMSE: Root Mean Square Error \n MSE: Mean Square Error \n MAE: Mean Absolute Error \n\n                                     ANOVA                                       \n--------------------------------------------------------------------------------\n                    Sum of                                                      \n                   Squares          DF         Mean Square       F         Sig. \n--------------------------------------------------------------------------------\nRegression    1.512586e+15          14        1.080418e+14    189.059    0.0000 \nResidual      8.120609e+14        1421    571471422208.591                      \nTotal         2.324647e+15        1435                                          \n--------------------------------------------------------------------------------\n\n                                               Parameter Estimates                                                \n-----------------------------------------------------------------------------------------------------------------\n               model           Beta    Std. Error    Std. Beta       t        Sig           lower          upper \n-----------------------------------------------------------------------------------------------------------------\n         (Intercept)     527633.222    108183.223                   4.877    0.000     315417.244     739849.200 \n            AREA_SQM      12777.523       367.479        0.584     34.771    0.000      12056.663      13498.382 \n                 AGE     -24687.739      2754.845       -0.167     -8.962    0.000     -30091.739     -19283.740 \n            PROX_CBD     -77131.323      5763.125       -0.263    -13.384    0.000     -88436.469     -65826.176 \n      PROX_CHILDCARE    -318472.751    107959.512       -0.084     -2.950    0.003    -530249.889    -106695.613 \n    PROX_ELDERLYCARE     185575.623     39901.864        0.090      4.651    0.000     107302.737     263848.510 \nPROX_URA_GROWTH_AREA      39163.254     11754.829        0.060      3.332    0.001      16104.571      62221.936 \n            PROX_MRT    -294745.107     56916.367       -0.112     -5.179    0.000    -406394.234    -183095.980 \n           PROX_PARK     570504.807     65507.029        0.150      8.709    0.000     442003.938     699005.677 \n    PROX_PRIMARY_SCH     159856.136     60234.599        0.062      2.654    0.008      41697.849     278014.424 \n  PROX_SHOPPING_MALL    -220947.251     36561.832       -0.115     -6.043    0.000    -292668.213    -149226.288 \n       PROX_BUS_STOP     682482.221    134513.243        0.134      5.074    0.000     418616.359     946348.082 \n         NO_Of_UNITS       -245.480        87.947       -0.053     -2.791    0.005       -418.000        -72.961 \n     FAMILY_FRIENDLY     146307.576     46893.021        0.057      3.120    0.002      54320.593     238294.560 \n            FREEHOLD     350599.812     48506.485        0.136      7.228    0.000     255447.802     445751.821 \n-----------------------------------------------------------------------------------------------------------------\n\n\n\n\n3.2.4 Preparing Publication Quality Table (gtsummary)\nThis method is prettier 🎀\n\ntbl_regression(condo.mlr1, intercept = TRUE)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n3.2.4.1 Adding Model Statistics\nUsing add_glance_table() or add_glance_source_note() function to add model statistics into the report table.\n\ntbl_regression(condo.mlr1, \n               intercept = TRUE) %>% \n  add_glance_source_note(\n    label = list(sigma ~ \"\\U03C3\"),\n    include = c(r.squared, adj.r.squared, \n                AIC, statistic,\n                p.value, sigma))\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    (Intercept)\n527,633\n315,417, 739,849\n<0.001\n    AREA_SQM\n12,778\n12,057, 13,498\n<0.001\n    AGE\n-24,688\n-30,092, -19,284\n<0.001\n    PROX_CBD\n-77,131\n-88,436, -65,826\n<0.001\n    PROX_CHILDCARE\n-318,473\n-530,250, -106,696\n0.003\n    PROX_ELDERLYCARE\n185,576\n107,303, 263,849\n<0.001\n    PROX_URA_GROWTH_AREA\n39,163\n16,105, 62,222\n<0.001\n    PROX_MRT\n-294,745\n-406,394, -183,096\n<0.001\n    PROX_PARK\n570,505\n442,004, 699,006\n<0.001\n    PROX_PRIMARY_SCH\n159,856\n41,698, 278,014\n0.008\n    PROX_SHOPPING_MALL\n-220,947\n-292,668, -149,226\n<0.001\n    PROX_BUS_STOP\n682,482\n418,616, 946,348\n<0.001\n    NO_Of_UNITS\n-245\n-418, -73\n0.005\n    FAMILY_FRIENDLY\n146,308\n54,321, 238,295\n0.002\n    FREEHOLD\n350,600\n255,448, 445,752\n<0.001\n  \n  \n    \n      R² = 0.651; Adjusted R² = 0.647; AIC = 42,967; Statistic = 189; p-value = <0.001; σ = 755,957\n    \n  \n  \n    \n      1 CI = Confidence Interval"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#checking-for-multicolinearity",
    "href": "handson_ex/HE8/HE8.html#checking-for-multicolinearity",
    "title": "Hands-on Exercise 8",
    "section": "3.3 Checking for Multicolinearity",
    "text": "3.3 Checking for Multicolinearity\n\nols_vif_tol(condo.mlr1)\n\n              Variables Tolerance      VIF\n1              AREA_SQM 0.8728554 1.145665\n2                   AGE 0.7071275 1.414172\n3              PROX_CBD 0.6356147 1.573280\n4        PROX_CHILDCARE 0.3066019 3.261559\n5      PROX_ELDERLYCARE 0.6598479 1.515501\n6  PROX_URA_GROWTH_AREA 0.7510311 1.331503\n7              PROX_MRT 0.5236090 1.909822\n8             PROX_PARK 0.8279261 1.207837\n9      PROX_PRIMARY_SCH 0.4524628 2.210126\n10   PROX_SHOPPING_MALL 0.6738795 1.483945\n11        PROX_BUS_STOP 0.3514118 2.845664\n12          NO_Of_UNITS 0.6901036 1.449058\n13      FAMILY_FRIENDLY 0.7244157 1.380423\n14             FREEHOLD 0.6931163 1.442759\n\n\n\nif VIF < 10: no sign of multicollinearity among independent variables\n\n\n3.3.1 Checking for Non-linearity\nMLR model should fufill assumption that linearity and additivity of the relationship between dependent and independent variables.\nPlot out the residual vs fitted values to perform linearity assumption test with ols_plot_resid_fit().\n\nols_plot_resid_fit(condo.mlr1)\n\n\n\n\n\nMost of the data points are scattered around the 0 line, relationship between dependent and independent variables are linear.\n\n\n\n3.3.2 Checking for Normality Assumption\n\n3.3.2.1 Via Plotting\n\nols_plot_resid_hist(condo.mlr1)\n\n\n\n\n\nResidual of MLR model resembles normal distribution.\n\n\n\n3.3.2.2 Via p-values\n\nols_test_normality(condo.mlr1)\n\n-----------------------------------------------\n       Test             Statistic       pvalue  \n-----------------------------------------------\nShapiro-Wilk              0.6856         0.0000 \nKolmogorov-Smirnov        0.1366         0.0000 \nCramer-von Mises         121.0768        0.0000 \nAnderson-Darling         67.9551         0.0000 \n-----------------------------------------------\n\n\n\np-values << 0.05\n\nreject the null hypothesis, there is statistical evidence that residual are normally distributed\n\n\n\n\n\n3.3.3 Checking for Spatial Autocorrelation\nFirst, export the residual values as a data frame.\n\nmlr.output <- as.data.frame(condo.mlr1$residuals)\n\nCombine it with the condo_resale.sf object.\n\ncondo_resale.res.sf <- cbind(condo_resale.sf, \n                        condo.mlr1$residuals) %>%\nrename(`MLR_RES` = `condo.mlr1.residuals`)\n\nNext, convert condo_resale.sf from a sf data frame into a spatial points data frame.\n\ncondo_resale.sp <- as_Spatial(condo_resale.res.sf)\ncondo_resale.sp\n\nclass       : SpatialPointsDataFrame \nfeatures    : 1436 \nextent      : 14940.85, 43352.45, 24765.67, 48382.81  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 23\nnames       : POSTCODE, SELLING_PRICE, AREA_SQM, AGE,    PROX_CBD, PROX_CHILDCARE, PROX_ELDERLYCARE, PROX_URA_GROWTH_AREA, PROX_HAWKER_MARKET, PROX_KINDERGARTEN,    PROX_MRT,   PROX_PARK, PROX_PRIMARY_SCH, PROX_TOP_PRIMARY_SCH, PROX_SHOPPING_MALL, ... \nmin values  :    18965,        540000,       34,   0, 0.386916393,    0.004927023,      0.054508623,          0.214539508,        0.051817113,       0.004927023, 0.052779424, 0.029064164,      0.077106132,          0.077106132,                  0, ... \nmax values  :   828833,       1.8e+07,      619,  37, 19.18042832,     3.46572633,      3.949157205,           9.15540001,        5.374348075,       2.229045366,  3.48037319,  2.16104919,      3.928989144,          6.748192062,        3.477433767, ... \n\n\n\n3.3.3.1 Plotting the Distribution of Residuals\n\ntmap_mode(\"view\")\ntm_shape(mpsz_svy21)+\n  tmap_options(check.and.fix = TRUE) +\n  tm_polygons(alpha = 0.4) +\ntm_shape(condo_resale.res.sf) +  \n  tm_dots(col = \"MLR_RES\",\n          alpha = 0.6,\n          style=\"quantile\") +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\nThere is a sign of spatial autocorrelation.\n\n\n\n3.3.3.2 Moran’s I\nTo proof that there is sign of spatial autocorrelation, perform the Moran’s I test.\n\nnb <- dnearneigh(coordinates(condo_resale.sp), 0, 1500, longlat = FALSE)\nnb_lw <- nb2listw(nb, style = 'W')\nlm.morantest(condo.mlr1, nb_lw)\n\n\n    Global Moran I for regression residuals\n\ndata:  \nmodel: lm(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD +\nPROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + PROX_MRT +\nPROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_BUS_STOP +\nNO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, data = condo_resale.sf)\nweights: nb_lw\n\nMoran I statistic standard deviate = 24.366, p-value < 2.2e-16\nalternative hypothesis: greater\nsample estimates:\nObserved Moran I      Expectation         Variance \n    1.438876e-01    -5.487594e-03     3.758259e-05 \n\n\n\np-value << 0.05\n\nreject null hypothesis that the residuals are randomly distributed\n\nObserved Moran I = 0.143 > 0\n\nthe residual resembles cluster distribution"
  },
  {
    "objectID": "handson_ex/HE8/HE8.html#gwmodel",
    "href": "handson_ex/HE8/HE8.html#gwmodel",
    "title": "Hands-on Exercise 8",
    "section": "3.4 GWModel",
    "text": "3.4 GWModel\n\n3.4.1 Fixed Bandwidth GWR Model\n\n3.4.1.1 Computing Fixed Bandwidth\n\nbw.fixed <- bw.gwr(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n                     PROX_CHILDCARE + PROX_ELDERLYCARE  + PROX_URA_GROWTH_AREA + \n                     PROX_MRT   + PROX_PARK + PROX_PRIMARY_SCH + \n                     PROX_SHOPPING_MALL + PROX_BUS_STOP + NO_Of_UNITS + \n                     FAMILY_FRIENDLY + FREEHOLD, \n                   data=condo_resale.sp, \n                   approach=\"CV\", \n                   kernel=\"gaussian\", \n                   adaptive=FALSE, \n                   longlat=FALSE)\n\nFixed bandwidth: 17660.96 CV score: 8.259118e+14 \nFixed bandwidth: 10917.26 CV score: 7.970454e+14 \nFixed bandwidth: 6749.419 CV score: 7.273273e+14 \nFixed bandwidth: 4173.553 CV score: 6.300006e+14 \nFixed bandwidth: 2581.58 CV score: 5.404958e+14 \nFixed bandwidth: 1597.687 CV score: 4.857515e+14 \nFixed bandwidth: 989.6077 CV score: 4.722431e+14 \nFixed bandwidth: 613.7939 CV score: 1.378294e+16 \nFixed bandwidth: 1221.873 CV score: 4.778717e+14 \nFixed bandwidth: 846.0596 CV score: 4.791629e+14 \nFixed bandwidth: 1078.325 CV score: 4.751406e+14 \nFixed bandwidth: 934.7772 CV score: 4.72518e+14 \nFixed bandwidth: 1023.495 CV score: 4.730305e+14 \nFixed bandwidth: 968.6643 CV score: 4.721317e+14 \nFixed bandwidth: 955.7206 CV score: 4.722072e+14 \nFixed bandwidth: 976.6639 CV score: 4.721387e+14 \nFixed bandwidth: 963.7202 CV score: 4.721484e+14 \nFixed bandwidth: 971.7199 CV score: 4.721293e+14 \nFixed bandwidth: 973.6083 CV score: 4.721309e+14 \nFixed bandwidth: 970.5527 CV score: 4.721295e+14 \nFixed bandwidth: 972.4412 CV score: 4.721296e+14 \nFixed bandwidth: 971.2741 CV score: 4.721292e+14 \nFixed bandwidth: 970.9985 CV score: 4.721293e+14 \nFixed bandwidth: 971.4443 CV score: 4.721292e+14 \nFixed bandwidth: 971.5496 CV score: 4.721293e+14 \nFixed bandwidth: 971.3793 CV score: 4.721292e+14 \nFixed bandwidth: 971.3391 CV score: 4.721292e+14 \nFixed bandwidth: 971.3143 CV score: 4.721292e+14 \nFixed bandwidth: 971.3545 CV score: 4.721292e+14 \nFixed bandwidth: 971.3296 CV score: 4.721292e+14 \nFixed bandwidth: 971.345 CV score: 4.721292e+14 \nFixed bandwidth: 971.3355 CV score: 4.721292e+14 \nFixed bandwidth: 971.3413 CV score: 4.721292e+14 \nFixed bandwidth: 971.3377 CV score: 4.721292e+14 \nFixed bandwidth: 971.34 CV score: 4.721292e+14 \nFixed bandwidth: 971.3405 CV score: 4.721292e+14 \nFixed bandwidth: 971.3408 CV score: 4.721292e+14 \nFixed bandwidth: 971.3403 CV score: 4.721292e+14 \nFixed bandwidth: 971.3406 CV score: 4.721292e+14 \nFixed bandwidth: 971.3404 CV score: 4.721292e+14 \nFixed bandwidth: 971.3405 CV score: 4.721292e+14 \nFixed bandwidth: 971.3405 CV score: 4.721292e+14 \n\n\n\nThe fixed bandwidth should be 971.3405m.\n\n\n\n3.4.1.2 Creating the Model\n\ngwr.fixed <- gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n                         PROX_CHILDCARE + PROX_ELDERLYCARE  + PROX_URA_GROWTH_AREA + \n                         PROX_MRT   + PROX_PARK + PROX_PRIMARY_SCH + \n                         PROX_SHOPPING_MALL + PROX_BUS_STOP + NO_Of_UNITS + \n                         FAMILY_FRIENDLY + FREEHOLD, \n                       data=condo_resale.sp, \n                       bw=bw.fixed, \n                       kernel = 'gaussian', \n                       longlat = FALSE)\n\n\ngwr.fixed\n\n   ***********************************************************************\n   *                       Package   GWmodel                             *\n   ***********************************************************************\n   Program starts at: 2023-03-06 09:52:27 \n   Call:\n   gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + \n    PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sp, bw = bw.fixed, kernel = \"gaussian\", \n    longlat = FALSE)\n\n   Dependent (y) variable:  SELLING_PRICE\n   Independent variables:  AREA_SQM AGE PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE PROX_URA_GROWTH_AREA PROX_MRT PROX_PARK PROX_PRIMARY_SCH PROX_SHOPPING_MALL PROX_BUS_STOP NO_Of_UNITS FAMILY_FRIENDLY FREEHOLD\n   Number of data points: 1436\n   ***********************************************************************\n   *                    Results of Global Regression                     *\n   ***********************************************************************\n\n   Call:\n    lm(formula = formula, data = data)\n\n   Residuals:\n     Min       1Q   Median       3Q      Max \n-3470778  -298119   -23481   248917 12234210 \n\n   Coefficients:\n                          Estimate Std. Error t value Pr(>|t|)    \n   (Intercept)           527633.22  108183.22   4.877 1.20e-06 ***\n   AREA_SQM               12777.52     367.48  34.771  < 2e-16 ***\n   AGE                   -24687.74    2754.84  -8.962  < 2e-16 ***\n   PROX_CBD              -77131.32    5763.12 -13.384  < 2e-16 ***\n   PROX_CHILDCARE       -318472.75  107959.51  -2.950 0.003231 ** \n   PROX_ELDERLYCARE      185575.62   39901.86   4.651 3.61e-06 ***\n   PROX_URA_GROWTH_AREA   39163.25   11754.83   3.332 0.000885 ***\n   PROX_MRT             -294745.11   56916.37  -5.179 2.56e-07 ***\n   PROX_PARK             570504.81   65507.03   8.709  < 2e-16 ***\n   PROX_PRIMARY_SCH      159856.14   60234.60   2.654 0.008046 ** \n   PROX_SHOPPING_MALL   -220947.25   36561.83  -6.043 1.93e-09 ***\n   PROX_BUS_STOP         682482.22  134513.24   5.074 4.42e-07 ***\n   NO_Of_UNITS             -245.48      87.95  -2.791 0.005321 ** \n   FAMILY_FRIENDLY       146307.58   46893.02   3.120 0.001845 ** \n   FREEHOLD              350599.81   48506.48   7.228 7.98e-13 ***\n\n   ---Significance stars\n   Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n   Residual standard error: 756000 on 1421 degrees of freedom\n   Multiple R-squared: 0.6507\n   Adjusted R-squared: 0.6472 \n   F-statistic: 189.1 on 14 and 1421 DF,  p-value: < 2.2e-16 \n   ***Extra Diagnostic information\n   Residual sum of squares: 8.120609e+14\n   Sigma(hat): 752522.9\n   AIC:  42966.76\n   AICc:  42967.14\n   BIC:  41731.39\n   ***********************************************************************\n   *          Results of Geographically Weighted Regression              *\n   ***********************************************************************\n\n   *********************Model calibration information*********************\n   Kernel function: gaussian \n   Fixed bandwidth: 971.3405 \n   Regression points: the same locations as observations are used.\n   Distance metric: Euclidean distance metric is used.\n\n   ****************Summary of GWR coefficient estimates:******************\n                               Min.     1st Qu.      Median     3rd Qu.\n   Intercept            -3.5988e+07 -5.1998e+05  7.6780e+05  1.7412e+06\n   AREA_SQM              1.0003e+03  5.2758e+03  7.4740e+03  1.2301e+04\n   AGE                  -1.3475e+05 -2.0813e+04 -8.6260e+03 -3.7784e+03\n   PROX_CBD             -7.7047e+07 -2.3608e+05 -8.3600e+04  3.4646e+04\n   PROX_CHILDCARE       -6.0097e+06 -3.3667e+05 -9.7425e+04  2.9007e+05\n   PROX_ELDERLYCARE     -3.5000e+06 -1.5970e+05  3.1971e+04  1.9577e+05\n   PROX_URA_GROWTH_AREA -3.0170e+06 -8.2013e+04  7.0749e+04  2.2612e+05\n   PROX_MRT             -3.5282e+06 -6.5836e+05 -1.8833e+05  3.6922e+04\n   PROX_PARK            -1.2062e+06 -2.1732e+05  3.5383e+04  4.1335e+05\n   PROX_PRIMARY_SCH     -2.2695e+07 -1.7066e+05  4.8472e+04  5.1555e+05\n   PROX_SHOPPING_MALL   -7.2585e+06 -1.6684e+05 -1.0517e+04  1.5923e+05\n   PROX_BUS_STOP        -1.4676e+06 -4.5207e+04  3.7601e+05  1.1664e+06\n   NO_Of_UNITS          -1.3170e+03 -2.4822e+02 -3.0846e+01  2.5496e+02\n   FAMILY_FRIENDLY      -2.2749e+06 -1.1140e+05  7.6214e+03  1.6107e+05\n   FREEHOLD             -9.2067e+06  3.8073e+04  1.5169e+05  3.7528e+05\n                             Max.\n   Intercept            112793548\n   AREA_SQM                 21575\n   AGE                     434201\n   PROX_CBD               2704596\n   PROX_CHILDCARE         1654087\n   PROX_ELDERLYCARE      38867814\n   PROX_URA_GROWTH_AREA  78515730\n   PROX_MRT               3124316\n   PROX_PARK             18122425\n   PROX_PRIMARY_SCH       4637503\n   PROX_SHOPPING_MALL     1529952\n   PROX_BUS_STOP         11342182\n   NO_Of_UNITS              12907\n   FAMILY_FRIENDLY        1720744\n   FREEHOLD               6073636\n   ************************Diagnostic information*************************\n   Number of data points: 1436 \n   Effective number of parameters (2trace(S) - trace(S'S)): 438.3804 \n   Effective degrees of freedom (n-2trace(S) + trace(S'S)): 997.6196 \n   AICc (GWR book, Fotheringham, et al. 2002, p. 61, eq 2.33): 42263.61 \n   AIC (GWR book, Fotheringham, et al. 2002,GWR p. 96, eq. 4.22): 41632.36 \n   BIC (GWR book, Fotheringham, et al. 2002,GWR p. 61, eq. 2.34): 42515.71 \n   Residual sum of squares: 2.53407e+14 \n   R-square value:  0.8909912 \n   Adjusted R-square value:  0.8430417 \n\n   ***********************************************************************\n   Program stops at: 2023-03-06 09:52:29 \n\n\n\nAICc of GWR is 42263.1\n\nsignificantly smaller than the global MLR model of 42967.1\n\n\n\n\n\n3.4.2 Adaptive Bandwidth GWR Model\n\n3.4.2.1 Computing the Adaptive Bandwidth\n\nbw.adaptive <- bw.gwr(formula = SELLING_PRICE ~ AREA_SQM + AGE  + \n                        PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE    + \n                        PROX_URA_GROWTH_AREA + PROX_MRT + PROX_PARK + \n                        PROX_PRIMARY_SCH + PROX_SHOPPING_MALL   + PROX_BUS_STOP + \n                        NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                      data=condo_resale.sp, \n                      approach=\"CV\", \n                      kernel=\"gaussian\", \n                      adaptive=TRUE, \n                      longlat=FALSE)\n\nAdaptive bandwidth: 895 CV score: 7.952401e+14 \nAdaptive bandwidth: 561 CV score: 7.667364e+14 \nAdaptive bandwidth: 354 CV score: 6.953454e+14 \nAdaptive bandwidth: 226 CV score: 6.15223e+14 \nAdaptive bandwidth: 147 CV score: 5.674373e+14 \nAdaptive bandwidth: 98 CV score: 5.426745e+14 \nAdaptive bandwidth: 68 CV score: 5.168117e+14 \nAdaptive bandwidth: 49 CV score: 4.859631e+14 \nAdaptive bandwidth: 37 CV score: 4.646518e+14 \nAdaptive bandwidth: 30 CV score: 4.422088e+14 \nAdaptive bandwidth: 25 CV score: 4.430816e+14 \nAdaptive bandwidth: 32 CV score: 4.505602e+14 \nAdaptive bandwidth: 27 CV score: 4.462172e+14 \nAdaptive bandwidth: 30 CV score: 4.422088e+14 \n\n\n\nRecommended data points to use: 30\n\n\n\n3.4.2.2 Creating the Model\n\ngwr.adaptive <- gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + \n                            PROX_CBD + PROX_CHILDCARE + PROX_ELDERLYCARE + \n                            PROX_URA_GROWTH_AREA + PROX_MRT + PROX_PARK + \n                            PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + PROX_BUS_STOP + \n                            NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n                          data=condo_resale.sp, bw=bw.adaptive, \n                          kernel = 'gaussian', \n                          adaptive=TRUE, \n                          longlat = FALSE)\n\n\ngwr.adaptive\n\n   ***********************************************************************\n   *                       Package   GWmodel                             *\n   ***********************************************************************\n   Program starts at: 2023-03-06 09:52:39 \n   Call:\n   gwr.basic(formula = SELLING_PRICE ~ AREA_SQM + AGE + PROX_CBD + \n    PROX_CHILDCARE + PROX_ELDERLYCARE + PROX_URA_GROWTH_AREA + \n    PROX_MRT + PROX_PARK + PROX_PRIMARY_SCH + PROX_SHOPPING_MALL + \n    PROX_BUS_STOP + NO_Of_UNITS + FAMILY_FRIENDLY + FREEHOLD, \n    data = condo_resale.sp, bw = bw.adaptive, kernel = \"gaussian\", \n    adaptive = TRUE, longlat = FALSE)\n\n   Dependent (y) variable:  SELLING_PRICE\n   Independent variables:  AREA_SQM AGE PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE PROX_URA_GROWTH_AREA PROX_MRT PROX_PARK PROX_PRIMARY_SCH PROX_SHOPPING_MALL PROX_BUS_STOP NO_Of_UNITS FAMILY_FRIENDLY FREEHOLD\n   Number of data points: 1436\n   ***********************************************************************\n   *                    Results of Global Regression                     *\n   ***********************************************************************\n\n   Call:\n    lm(formula = formula, data = data)\n\n   Residuals:\n     Min       1Q   Median       3Q      Max \n-3470778  -298119   -23481   248917 12234210 \n\n   Coefficients:\n                          Estimate Std. Error t value Pr(>|t|)    \n   (Intercept)           527633.22  108183.22   4.877 1.20e-06 ***\n   AREA_SQM               12777.52     367.48  34.771  < 2e-16 ***\n   AGE                   -24687.74    2754.84  -8.962  < 2e-16 ***\n   PROX_CBD              -77131.32    5763.12 -13.384  < 2e-16 ***\n   PROX_CHILDCARE       -318472.75  107959.51  -2.950 0.003231 ** \n   PROX_ELDERLYCARE      185575.62   39901.86   4.651 3.61e-06 ***\n   PROX_URA_GROWTH_AREA   39163.25   11754.83   3.332 0.000885 ***\n   PROX_MRT             -294745.11   56916.37  -5.179 2.56e-07 ***\n   PROX_PARK             570504.81   65507.03   8.709  < 2e-16 ***\n   PROX_PRIMARY_SCH      159856.14   60234.60   2.654 0.008046 ** \n   PROX_SHOPPING_MALL   -220947.25   36561.83  -6.043 1.93e-09 ***\n   PROX_BUS_STOP         682482.22  134513.24   5.074 4.42e-07 ***\n   NO_Of_UNITS             -245.48      87.95  -2.791 0.005321 ** \n   FAMILY_FRIENDLY       146307.58   46893.02   3.120 0.001845 ** \n   FREEHOLD              350599.81   48506.48   7.228 7.98e-13 ***\n\n   ---Significance stars\n   Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n   Residual standard error: 756000 on 1421 degrees of freedom\n   Multiple R-squared: 0.6507\n   Adjusted R-squared: 0.6472 \n   F-statistic: 189.1 on 14 and 1421 DF,  p-value: < 2.2e-16 \n   ***Extra Diagnostic information\n   Residual sum of squares: 8.120609e+14\n   Sigma(hat): 752522.9\n   AIC:  42966.76\n   AICc:  42967.14\n   BIC:  41731.39\n   ***********************************************************************\n   *          Results of Geographically Weighted Regression              *\n   ***********************************************************************\n\n   *********************Model calibration information*********************\n   Kernel function: gaussian \n   Adaptive bandwidth: 30 (number of nearest neighbours)\n   Regression points: the same locations as observations are used.\n   Distance metric: Euclidean distance metric is used.\n\n   ****************Summary of GWR coefficient estimates:******************\n                               Min.     1st Qu.      Median     3rd Qu.\n   Intercept            -1.3487e+08 -2.4669e+05  7.7928e+05  1.6194e+06\n   AREA_SQM              3.3188e+03  5.6285e+03  7.7825e+03  1.2738e+04\n   AGE                  -9.6746e+04 -2.9288e+04 -1.4043e+04 -5.6119e+03\n   PROX_CBD             -2.5330e+06 -1.6256e+05 -7.7242e+04  2.6624e+03\n   PROX_CHILDCARE       -1.2790e+06 -2.0175e+05  8.7158e+03  3.7778e+05\n   PROX_ELDERLYCARE     -1.6212e+06 -9.2050e+04  6.1029e+04  2.8184e+05\n   PROX_URA_GROWTH_AREA -7.2686e+06 -3.0350e+04  4.5869e+04  2.4613e+05\n   PROX_MRT             -4.3781e+07 -6.7282e+05 -2.2115e+05 -7.4593e+04\n   PROX_PARK            -2.9020e+06 -1.6782e+05  1.1601e+05  4.6572e+05\n   PROX_PRIMARY_SCH     -8.6418e+05 -1.6627e+05 -7.7853e+03  4.3222e+05\n   PROX_SHOPPING_MALL   -1.8272e+06 -1.3175e+05 -1.4049e+04  1.3799e+05\n   PROX_BUS_STOP        -2.0579e+06 -7.1461e+04  4.1104e+05  1.2071e+06\n   NO_Of_UNITS          -2.1993e+03 -2.3685e+02 -3.4699e+01  1.1657e+02\n   FAMILY_FRIENDLY      -5.9879e+05 -5.0927e+04  2.6173e+04  2.2481e+05\n   FREEHOLD             -1.6340e+05  4.0765e+04  1.9023e+05  3.7960e+05\n                            Max.\n   Intercept            18758355\n   AREA_SQM                23064\n   AGE                     13303\n   PROX_CBD             11346650\n   PROX_CHILDCARE        2892127\n   PROX_ELDERLYCARE      2465671\n   PROX_URA_GROWTH_AREA  7384059\n   PROX_MRT              1186242\n   PROX_PARK             2588497\n   PROX_PRIMARY_SCH      3381462\n   PROX_SHOPPING_MALL   38038564\n   PROX_BUS_STOP        12081592\n   NO_Of_UNITS              1010\n   FAMILY_FRIENDLY       2072414\n   FREEHOLD              1813995\n   ************************Diagnostic information*************************\n   Number of data points: 1436 \n   Effective number of parameters (2trace(S) - trace(S'S)): 350.3088 \n   Effective degrees of freedom (n-2trace(S) + trace(S'S)): 1085.691 \n   AICc (GWR book, Fotheringham, et al. 2002, p. 61, eq 2.33): 41982.22 \n   AIC (GWR book, Fotheringham, et al. 2002,GWR p. 96, eq. 4.22): 41546.74 \n   BIC (GWR book, Fotheringham, et al. 2002,GWR p. 61, eq. 2.34): 41914.08 \n   Residual sum of squares: 2.528227e+14 \n   R-square value:  0.8912425 \n   Adjusted R-square value:  0.8561185 \n\n   ***********************************************************************\n   Program stops at: 2023-03-06 09:52:40 \n\n\n\nAICc of adaptive distance GWR: 41982.22\n\neven smaller than AICc of fixed distance GWR of 42263.61\n\n\n\n\n\n3.4.3 Visualising GWR Output\n\n3.4.3.1 Convert SDF into sf data frame\n\ncondo_resale.sf.adaptive <- st_as_sf(gwr.adaptive$SDF) %>%\n  st_transform(crs=3414)\ncondo_resale.sf.adaptive.svy21 <- st_transform(condo_resale.sf.adaptive, 3414)\ncondo_resale.sf.adaptive.svy21  \n\nSimple feature collection with 1436 features and 51 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 14940.85 ymin: 24765.67 xmax: 43352.45 ymax: 48382.81\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n    Intercept  AREA_SQM        AGE  PROX_CBD PROX_CHILDCARE PROX_ELDERLYCARE\n1   2050011.7  9561.892  -9514.634 -120681.9      319266.92       -393417.79\n2   1633128.2 16576.853 -58185.479 -149434.2      441102.18        325188.74\n3   3433608.2 13091.861 -26707.386 -259397.8     -120116.82        535855.81\n4    234358.9 20730.601 -93308.988 2426853.7      480825.28        314783.72\n5   2285804.9  6722.836 -17608.018 -316835.5       90764.78       -137384.61\n6  -3568877.4  6039.581 -26535.592  327306.1     -152531.19       -700392.85\n7  -2874842.4 16843.575 -59166.727 -983577.2     -177810.50       -122384.02\n8   2038086.0  6905.135 -17681.897 -285076.6       70259.40        -96012.78\n9   1718478.4  9580.703 -14401.128  105803.4     -657698.02       -123276.00\n10  3457054.0 14072.011 -31579.884 -234895.4       79961.45        548581.04\n   PROX_URA_GROWTH_AREA    PROX_MRT  PROX_PARK PROX_PRIMARY_SCH\n1            -159980.20  -299742.96 -172104.47        242668.03\n2            -142290.39 -2510522.23  523379.72       1106830.66\n3            -253621.21  -936853.28  209099.85        571462.33\n4           -2679297.89 -2039479.50 -759153.26       3127477.21\n5             303714.81   -44567.05  -10284.62         30413.56\n6             -28051.25   733566.47 1511488.92        320878.23\n7            1397676.38 -2745430.34  710114.74       1786570.95\n8             269368.71   -14552.99   73533.34         53359.73\n9            -361974.72  -476785.32 -132067.59        -40128.92\n10           -150024.38 -1503835.53  574155.47        108996.67\n   PROX_SHOPPING_MALL PROX_BUS_STOP  NO_Of_UNITS FAMILY_FRIENDLY  FREEHOLD\n1          300881.390     1210615.4  104.8290640       -9075.370  303955.6\n2          -87693.378     1843587.2 -288.3441183      310074.664  396221.3\n3         -126732.712     1411924.9   -9.5532945        5949.746  168821.7\n4          -29593.342     7225577.5 -161.3551620     1556178.531 1212515.6\n5           -7490.586      677577.0   42.2659674       58986.951  328175.2\n6          258583.881     1086012.6 -214.3671271      201992.641  471873.1\n7         -384251.210     5094060.5   -0.9212521      359659.512  408871.9\n8          -39634.902      735767.1   30.1741069       55602.506  347075.0\n9          276718.757     2815772.4  675.1615559      -30453.297  503872.8\n10        -454726.822     2123557.0  -21.3044311     -100935.586  213324.6\n         y    yhat    residual CV_Score Stud_residual Intercept_SE AREA_SQM_SE\n1  3000000 2886532   113468.16        0    0.38207013     516105.5    823.2860\n2  3880000 3466801   413198.52        0    1.01433140     488083.5    825.2380\n3  3325000 3616527  -291527.20        0   -0.83780678     963711.4    988.2240\n4  4250000 5435482 -1185481.63        0   -2.84614670     444185.5    617.4007\n5  1400000 1388166    11834.26        0    0.03404453    2119620.6   1376.2778\n6  1320000 1516702  -196701.94        0   -0.72065800   28572883.7   2348.0091\n7  3410000 3266881   143118.77        0    0.41291992     679546.6    893.5893\n8  1420000 1431955   -11955.27        0   -0.03033109    2217773.1   1415.2604\n9  2025000 1832799   192200.83        0    0.52018109     814281.8    943.8434\n10 2550000 2223364   326635.53        0    1.10559735    2410252.0   1271.4073\n      AGE_SE PROX_CBD_SE PROX_CHILDCARE_SE PROX_ELDERLYCARE_SE\n1   5889.782    37411.22          319111.1           120633.34\n2   6226.916    23615.06          299705.3            84546.69\n3   6510.236    56103.77          349128.5           129687.07\n4   6010.511   469337.41          304965.2           127150.69\n5   8180.361   410644.47          698720.6           327371.55\n6  14601.909  5272846.47         1141599.8          1653002.19\n7   8970.629   346164.20          530101.1           148598.71\n8   8661.309   438035.69          742532.8           399221.05\n9  11791.208    89148.35          704630.7           329683.30\n10  9941.980   173532.77          500976.2           281876.74\n   PROX_URA_GROWTH_AREA_SE PROX_MRT_SE PROX_PARK_SE PROX_PRIMARY_SCH_SE\n1                 56207.39    185181.3     205499.6            152400.7\n2                 76956.50    281133.9     229358.7            165150.7\n3                 95774.60    275483.7     314124.3            196662.6\n4                470762.12    279877.1     227249.4            240878.9\n5                474339.56    363830.0     364580.9            249087.7\n6               5496627.21    730453.2    1741712.0            683265.5\n7                371692.97    375511.9     297400.9            344602.8\n8                517977.91    423155.4     440984.4            261251.2\n9                153436.22    285325.4     304998.4            278258.5\n10               239182.57    571355.7     599131.8            331284.8\n   PROX_SHOPPING_MALL_SE PROX_BUS_STOP_SE NO_Of_UNITS_SE FAMILY_FRIENDLY_SE\n1               109268.8         600668.6       218.1258           131474.7\n2                98906.8         410222.1       208.9410           114989.1\n3               119913.3         464156.7       210.9828           146607.2\n4               177104.1         562810.8       361.7767           108726.6\n5               301032.9         740922.4       299.5034           160663.7\n6              2931208.6        1418333.3       602.5571           331727.0\n7               249969.5         821236.4       532.1978           129241.2\n8               351634.0         775038.4       338.6777           171895.1\n9               289872.7         850095.5       439.9037           220223.4\n10              265529.7         631399.2       259.0169           189125.5\n   FREEHOLD_SE Intercept_TV AREA_SQM_TV     AGE_TV PROX_CBD_TV\n1     115954.0    3.9720784   11.614302  -1.615447 -3.22582173\n2     130110.0    3.3460017   20.087361  -9.344188 -6.32792021\n3     141031.5    3.5629010   13.247868  -4.102368 -4.62353528\n4     138239.1    0.5276150   33.577223 -15.524302  5.17080808\n5     210641.1    1.0784029    4.884795  -2.152474 -0.77155660\n6     374347.3   -0.1249043    2.572214  -1.817269  0.06207388\n7     182216.9   -4.2305303   18.849348  -6.595605 -2.84136028\n8     216649.4    0.9189786    4.879056  -2.041481 -0.65080678\n9     220473.7    2.1104224   10.150733  -1.221345  1.18682383\n10    206346.2    1.4343123   11.068059  -3.176418 -1.35360852\n   PROX_CHILDCARE_TV PROX_ELDERLYCARE_TV PROX_URA_GROWTH_AREA_TV PROX_MRT_TV\n1         1.00048819          -3.2612693            -2.846248368 -1.61864578\n2         1.47178634           3.8462625            -1.848971738 -8.92998600\n3        -0.34404755           4.1319138            -2.648105057 -3.40075727\n4         1.57665606           2.4756745            -5.691404992 -7.28705261\n5         0.12990138          -0.4196596             0.640289855 -0.12249416\n6        -0.13361179          -0.4237096            -0.005103357  1.00426206\n7        -0.33542751          -0.8235874             3.760298131 -7.31116712\n8         0.09462126          -0.2405003             0.520038994 -0.03439159\n9        -0.93339393          -0.3739225            -2.359121712 -1.67102293\n10        0.15961128           1.9461735            -0.627237944 -2.63204802\n   PROX_PARK_TV PROX_PRIMARY_SCH_TV PROX_SHOPPING_MALL_TV PROX_BUS_STOP_TV\n1   -0.83749312           1.5923022            2.75358842        2.0154464\n2    2.28192684           6.7019454           -0.88662640        4.4941192\n3    0.66565951           2.9058009           -1.05686949        3.0419145\n4   -3.34061770          12.9836105           -0.16709578       12.8383775\n5   -0.02820944           0.1220998           -0.02488294        0.9145046\n6    0.86781794           0.4696245            0.08821750        0.7656963\n7    2.38773567           5.1844351           -1.53719231        6.2029165\n8    0.16674816           0.2042469           -0.11271635        0.9493299\n9   -0.43301073          -0.1442145            0.95462153        3.3123012\n10   0.95831249           0.3290120           -1.71252687        3.3632555\n   NO_Of_UNITS_TV FAMILY_FRIENDLY_TV FREEHOLD_TV  Local_R2\n1     0.480589953        -0.06902748    2.621347 0.8846744\n2    -1.380026395         2.69655779    3.045280 0.8899773\n3    -0.045279967         0.04058290    1.197050 0.8947007\n4    -0.446007570        14.31276425    8.771149 0.9073605\n5     0.141120178         0.36714544    1.557983 0.9510057\n6    -0.355762335         0.60891234    1.260522 0.9247586\n7    -0.001731033         2.78285441    2.243875 0.8310458\n8     0.089093858         0.32346758    1.602012 0.9463936\n9     1.534793921        -0.13828365    2.285410 0.8380365\n10   -0.082251138        -0.53369623    1.033819 0.9080753\n                    geometry\n1  POINT (22085.12 29951.54)\n2   POINT (25656.84 34546.2)\n3   POINT (23963.99 32890.8)\n4  POINT (27044.28 32319.77)\n5  POINT (41042.56 33743.64)\n6   POINT (39717.04 32943.1)\n7   POINT (28419.1 33513.37)\n8  POINT (40763.57 33879.61)\n9  POINT (23595.63 28884.78)\n10 POINT (24586.56 33194.31)\n\n\n\ngwr.adaptive.output <- as.data.frame(gwr.adaptive$SDF)\ncondo_resale.sf.adaptive <- cbind(condo_resale.res.sf, as.matrix(gwr.adaptive.output))\n\n\nglimpse(condo_resale.sf.adaptive)\n\nRows: 1,436\nColumns: 77\n$ POSTCODE                <dbl> 118635, 288420, 267833, 258380, 467169, 466472…\n$ SELLING_PRICE           <dbl> 3000000, 3880000, 3325000, 4250000, 1400000, 1…\n$ AREA_SQM                <dbl> 309, 290, 248, 127, 145, 139, 218, 141, 165, 1…\n$ AGE                     <dbl> 30, 32, 33, 7, 28, 22, 24, 24, 27, 31, 17, 22,…\n$ PROX_CBD                <dbl> 7.941259, 6.609797, 6.898000, 4.038861, 11.783…\n$ PROX_CHILDCARE          <dbl> 0.16597932, 0.28027246, 0.42922669, 0.39473543…\n$ PROX_ELDERLYCARE        <dbl> 2.5198118, 1.9333338, 0.5021395, 1.9910316, 1.…\n$ PROX_URA_GROWTH_AREA    <dbl> 6.618741, 7.505109, 6.463887, 4.906512, 6.4106…\n$ PROX_HAWKER_MARKET      <dbl> 1.76542207, 0.54507614, 0.37789301, 1.68259969…\n$ PROX_KINDERGARTEN       <dbl> 0.05835552, 0.61592412, 0.14120309, 0.38200076…\n$ PROX_MRT                <dbl> 0.5607188, 0.6584461, 0.3053433, 0.6910183, 0.…\n$ PROX_PARK               <dbl> 1.1710446, 0.1992269, 0.2779886, 0.9832843, 0.…\n$ PROX_PRIMARY_SCH        <dbl> 1.6340256, 0.9747834, 1.4715016, 1.4546324, 0.…\n$ PROX_TOP_PRIMARY_SCH    <dbl> 3.3273195, 0.9747834, 1.4715016, 2.3006394, 0.…\n$ PROX_SHOPPING_MALL      <dbl> 2.2102717, 2.9374279, 1.2256850, 0.3525671, 1.…\n$ PROX_SUPERMARKET        <dbl> 0.9103958, 0.5900617, 0.4135583, 0.4162219, 0.…\n$ PROX_BUS_STOP           <dbl> 0.10336166, 0.28673408, 0.28504777, 0.29872340…\n$ NO_Of_UNITS             <dbl> 18, 20, 27, 30, 30, 31, 32, 32, 32, 32, 34, 34…\n$ FAMILY_FRIENDLY         <dbl> 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0…\n$ FREEHOLD                <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1…\n$ LEASEHOLD_99YR          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ LOG_SELLING_PRICE       <dbl> 14.91412, 15.17135, 15.01698, 15.26243, 14.151…\n$ MLR_RES                 <dbl> -1489099.55, 415494.57, 194129.69, 1088992.71,…\n$ Intercept               <dbl> 2050011.67, 1633128.24, 3433608.17, 234358.91,…\n$ AREA_SQM.1              <dbl> 9561.892, 16576.853, 13091.861, 20730.601, 672…\n$ AGE.1                   <dbl> -9514.634, -58185.479, -26707.386, -93308.988,…\n$ PROX_CBD.1              <dbl> -120681.94, -149434.22, -259397.77, 2426853.66…\n$ PROX_CHILDCARE.1        <dbl> 319266.925, 441102.177, -120116.816, 480825.28…\n$ PROX_ELDERLYCARE.1      <dbl> -393417.795, 325188.741, 535855.806, 314783.72…\n$ PROX_URA_GROWTH_AREA.1  <dbl> -159980.203, -142290.389, -253621.206, -267929…\n$ PROX_MRT.1              <dbl> -299742.96, -2510522.23, -936853.28, -2039479.…\n$ PROX_PARK.1             <dbl> -172104.47, 523379.72, 209099.85, -759153.26, …\n$ PROX_PRIMARY_SCH.1      <dbl> 242668.03, 1106830.66, 571462.33, 3127477.21, …\n$ PROX_SHOPPING_MALL.1    <dbl> 300881.390, -87693.378, -126732.712, -29593.34…\n$ PROX_BUS_STOP.1         <dbl> 1210615.44, 1843587.22, 1411924.90, 7225577.51…\n$ NO_Of_UNITS.1           <dbl> 104.8290640, -288.3441183, -9.5532945, -161.35…\n$ FAMILY_FRIENDLY.1       <dbl> -9075.370, 310074.664, 5949.746, 1556178.531, …\n$ FREEHOLD.1              <dbl> 303955.61, 396221.27, 168821.75, 1212515.58, 3…\n$ y                       <dbl> 3000000, 3880000, 3325000, 4250000, 1400000, 1…\n$ yhat                    <dbl> 2886531.8, 3466801.5, 3616527.2, 5435481.6, 13…\n$ residual                <dbl> 113468.16, 413198.52, -291527.20, -1185481.63,…\n$ CV_Score                <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ Stud_residual           <dbl> 0.38207013, 1.01433140, -0.83780678, -2.846146…\n$ Intercept_SE            <dbl> 516105.5, 488083.5, 963711.4, 444185.5, 211962…\n$ AREA_SQM_SE             <dbl> 823.2860, 825.2380, 988.2240, 617.4007, 1376.2…\n$ AGE_SE                  <dbl> 5889.782, 6226.916, 6510.236, 6010.511, 8180.3…\n$ PROX_CBD_SE             <dbl> 37411.22, 23615.06, 56103.77, 469337.41, 41064…\n$ PROX_CHILDCARE_SE       <dbl> 319111.1, 299705.3, 349128.5, 304965.2, 698720…\n$ PROX_ELDERLYCARE_SE     <dbl> 120633.34, 84546.69, 129687.07, 127150.69, 327…\n$ PROX_URA_GROWTH_AREA_SE <dbl> 56207.39, 76956.50, 95774.60, 470762.12, 47433…\n$ PROX_MRT_SE             <dbl> 185181.3, 281133.9, 275483.7, 279877.1, 363830…\n$ PROX_PARK_SE            <dbl> 205499.6, 229358.7, 314124.3, 227249.4, 364580…\n$ PROX_PRIMARY_SCH_SE     <dbl> 152400.7, 165150.7, 196662.6, 240878.9, 249087…\n$ PROX_SHOPPING_MALL_SE   <dbl> 109268.8, 98906.8, 119913.3, 177104.1, 301032.…\n$ PROX_BUS_STOP_SE        <dbl> 600668.6, 410222.1, 464156.7, 562810.8, 740922…\n$ NO_Of_UNITS_SE          <dbl> 218.1258, 208.9410, 210.9828, 361.7767, 299.50…\n$ FAMILY_FRIENDLY_SE      <dbl> 131474.73, 114989.07, 146607.22, 108726.62, 16…\n$ FREEHOLD_SE             <dbl> 115954.0, 130110.0, 141031.5, 138239.1, 210641…\n$ Intercept_TV            <dbl> 3.9720784, 3.3460017, 3.5629010, 0.5276150, 1.…\n$ AREA_SQM_TV             <dbl> 11.614302, 20.087361, 13.247868, 33.577223, 4.…\n$ AGE_TV                  <dbl> -1.6154474, -9.3441881, -4.1023685, -15.524301…\n$ PROX_CBD_TV             <dbl> -3.22582173, -6.32792021, -4.62353528, 5.17080…\n$ PROX_CHILDCARE_TV       <dbl> 1.000488185, 1.471786337, -0.344047555, 1.5766…\n$ PROX_ELDERLYCARE_TV     <dbl> -3.26126929, 3.84626245, 4.13191383, 2.4756745…\n$ PROX_URA_GROWTH_AREA_TV <dbl> -2.846248368, -1.848971738, -2.648105057, -5.6…\n$ PROX_MRT_TV             <dbl> -1.61864578, -8.92998600, -3.40075727, -7.2870…\n$ PROX_PARK_TV            <dbl> -0.83749312, 2.28192684, 0.66565951, -3.340617…\n$ PROX_PRIMARY_SCH_TV     <dbl> 1.59230221, 6.70194543, 2.90580089, 12.9836104…\n$ PROX_SHOPPING_MALL_TV   <dbl> 2.753588422, -0.886626400, -1.056869486, -0.16…\n$ PROX_BUS_STOP_TV        <dbl> 2.0154464, 4.4941192, 3.0419145, 12.8383775, 0…\n$ NO_Of_UNITS_TV          <dbl> 0.480589953, -1.380026395, -0.045279967, -0.44…\n$ FAMILY_FRIENDLY_TV      <dbl> -0.06902748, 2.69655779, 0.04058290, 14.312764…\n$ FREEHOLD_TV             <dbl> 2.6213469, 3.0452799, 1.1970499, 8.7711485, 1.…\n$ Local_R2                <dbl> 0.8846744, 0.8899773, 0.8947007, 0.9073605, 0.…\n$ coords.x1               <dbl> 22085.12, 25656.84, 23963.99, 27044.28, 41042.…\n$ coords.x2               <dbl> 29951.54, 34546.20, 32890.80, 32319.77, 33743.…\n$ geometry                <POINT [m]> POINT (22085.12 29951.54), POINT (25656.…\n\n\n\n\n3.4.3.2 Visualising Local R2\n\ntmap_mode(\"view\")\ntm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"Local_R2\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\n\n3.4.3.3 Visualising Coefficient Estimates\n\ntmap_mode(\"view\")\nAREA_SQM_SE <- tm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"AREA_SQM_SE\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\nAREA_SQM_TV <- tm_shape(mpsz_svy21)+\n  tm_polygons(alpha = 0.1) +\ntm_shape(condo_resale.sf.adaptive) +  \n  tm_dots(col = \"AREA_SQM_TV\",\n          border.col = \"gray60\",\n          border.lwd = 1) +\n  tm_view(set.zoom.limits = c(11,14))\n\ntmap_arrange(AREA_SQM_SE, AREA_SQM_TV, \n             asp=1, ncol=2,\n             sync = TRUE)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3.4.3.4 Plotting by URA Planning Region\n\ntm_shape(mpsz_svy21[mpsz_svy21$REGION_N==\"CENTRAL REGION\", ])+\n  tm_polygons()+\ntm_shape(condo_resale.sf.adaptive) + \n  tm_bubbles(col = \"Local_R2\",\n           size = 0.15,\n           border.col = \"gray60\",\n           border.lwd = 1)"
  }
]