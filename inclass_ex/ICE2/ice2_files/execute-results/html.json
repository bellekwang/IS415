{
  "hash": "157fc5ea2715ab5110b39cd66801b1cf",
  "result": {
    "markdown": "---\ntitle: \"In-Class Exercise 2: Geospatial Data Wrangling\"\ndate: \"2023-01-16\"\n---\n\n\n# In-Class Exercise 2\n\n## Creating Simple Features\n\n### Aspatial Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, tidyverse, funModeling)\n```\n:::\n\n\nImporting WPdx+ data set\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpdx <- read_csv(\"data/wpdx.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1000 Columns: 70\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (36): source, status_id, water_source_clean, water_source_category, wat...\ndbl  (21): row_id, lat_deg, lon_deg, install_year, fecal_coliform_value, dis...\nlgl  (10): clean_adm3, clean_adm4, rehab_year, rehabilitator, fecal_coliform...\ndttm  (3): report_date, created_timestamp, updated\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\nCreating Feature Data Frame for WPDX\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpdx_sf <- st_as_sf(wpdx,\n                    coords = c(\"lon_deg\", \"lat_deg\"),\n                    crs=4326) %>%\n  st_transform(crs=26392)\n```\n:::\n\n\n### Geospatial Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nadmin_bound = st_read(dsn=\"data/NGA_cnty_admin2\", layer = \"nga_polnda_adm2_1m_salb\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `nga_polnda_adm2_1m_salb' from data source \n  `D:\\bellekwang\\IS415\\inclass_ex\\ICE2\\data\\NGA_cnty_admin2' \n  using driver `ESRI Shapefile'\nSimple feature collection with 773 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668432 ymin: 4.277144 xmax: 14.67808 ymax: 13.90103\nGeodetic CRS:  WGS 84\n```\n:::\n:::\n\n\nConvert EPSG code to Nigeria's\n\n\n::: {.cell}\n\n```{.r .cell-code}\nadmin_bound26392 <- st_transform(admin_bound, 26392)\n```\n:::\n\n\n## LGA Level\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwpdx_sf %>%\n  group_by(water_source_clean) %>%\n  summarise(n = n()) %>%\n  mutate(freq = n / sum(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSimple feature collection with 6 features and 3 fields\nGeometry type: GEOMETRY\nDimension:     XY\nBounding box:  xmin: 32641.6 ymin: 35935.16 xmax: 1292841 ymax: 963498.8\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 6 × 4\n  water_source_clean         n                                    geometry  freq\n* <chr>                  <int>                              <GEOMETRY [m]> <dbl>\n1 Borehole                 640 MULTIPOINT ((43897.13 282975.7), (49138.18… 0.64 \n2 Piped Water                3 MULTIPOINT ((103956.4 350486.9), (885856.5… 0.003\n3 Protected Shallow Well    24 MULTIPOINT ((67182.59 298773.7), (75487.21… 0.024\n4 Protected Spring          30 MULTIPOINT ((117673.1 271705.9), (272479.7… 0.03 \n5 Protected Well             1                    POINT (1261389 895410.5) 0.001\n6 <NA>                     302 MULTIPOINT ((32641.6 281060.9), (38160.14 … 0.302\n```\n:::\n:::\n\n\n## Combining Geospatial and Aspatial Data Frames into Simple Feature Data Frame\n\n## Distribution of Water Points\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}